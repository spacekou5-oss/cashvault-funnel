<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Architect Status | Autopilot System</title>
    
    <meta property="og:title" content="Verify Architect Status | Autopilot System">
    <meta property="og:description" content="Check if someone has installed the Autopilot Money System and earned their Wealth Architect certification.">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-card: #161616;
            --accent-green: #22c55e;
            --accent-green-glow: rgba(34, 197, 94, 0.3);
            --accent-gold: #fbbf24;
            --accent-red: #ef4444;
            --accent-amber: #f59e0b;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border: #27272a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed; inset: 0;
            background-image: 
                linear-gradient(rgba(34, 197, 94, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(34, 197, 94, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none; z-index: 0;
        }

        .bg-glow {
            position: fixed;
            width: 600px; height: 600px;
            border-radius: 50%;
            filter: blur(150px);
            pointer-events: none; z-index: 0;
        }
        .bg-glow-1 { top: -200px; left: -200px; background: var(--accent-green); opacity: 0.15; }
        .bg-glow-2 { bottom: -200px; right: -200px; background: var(--accent-gold); opacity: 0.1; }

        @media (max-width: 768px) {
            .bg-glow { display: none; }
            .bg-grid { opacity: 0.5; }
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative; z-index: 1;
            min-height: 100vh;
            display: flex; flex-direction: column;
        }

        /* Header */
        .header { text-align: center; margin-bottom: 40px; }
        .logo { display: inline-flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .logo-icon { width: 40px; height: 40px; border: 2px solid var(--accent-green); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .logo-icon-inner { width: 20px; height: 20px; background: var(--accent-green); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.7; transform: scale(0.9); } }
        .logo-text { font-family: 'JetBrains Mono', monospace; font-size: 1rem; font-weight: 700; letter-spacing: 0.1em; }
        .logo-text span { color: var(--accent-green); }
        .header h1 { font-size: clamp(1.75rem, 5vw, 2.5rem); font-weight: 800; margin-bottom: 10px; letter-spacing: -0.02em; }
        .header p { color: var(--text-secondary); font-size: 1rem; max-width: 400px; margin: 0 auto; line-height: 1.6; }

        /* Explainer */
        .explainer {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }
        .explainer-icon {
            flex-shrink: 0;
            width: 36px; height: 36px;
            border-radius: 8px;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.2);
            display: flex; align-items: center; justify-content: center;
        }
        .explainer-icon svg { width: 18px; height: 18px; stroke: var(--accent-green); fill: none; stroke-width: 2; }
        .explainer-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem; font-weight: 700;
            color: var(--accent-green);
            text-transform: uppercase; letter-spacing: 0.1em;
            margin-bottom: 6px;
        }
        .explainer-text { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; }

        /* Verification Card */
        .verify-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 32px; margin-bottom: 30px; }
        .verify-label { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 12px; }
        .verify-input-wrapper { display: flex; gap: 12px; margin-bottom: 20px; }
        .verify-input { flex: 1; background: var(--bg-primary); border: 2px solid var(--border); border-radius: 10px; padding: 16px 20px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; text-align: center; outline: none; transition: all 0.3s; }
        .verify-input::placeholder { color: var(--text-muted); font-weight: 400; letter-spacing: 0.05em; }
        .verify-input:focus { border-color: var(--accent-green); box-shadow: 0 0 0 3px var(--accent-green-glow); }
        .verify-btn { background: var(--accent-green); color: #000; border: none; border-radius: 10px; padding: 16px 28px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; cursor: pointer; transition: all 0.3s; white-space: nowrap; }
        .verify-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px var(--accent-green-glow); }
        .verify-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        /* FAQ Accordion */
        .faq-section { border-top: 1px solid var(--border); padding-top: 20px; margin-top: 4px; }
        .faq-header { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 12px; }
        .faq-item { border: 1px solid var(--border); border-radius: 10px; margin-bottom: 8px; overflow: hidden; transition: border-color 0.3s; }
        .faq-item:hover { border-color: rgba(255,255,255,0.1); }
        .faq-item.open { border-color: rgba(34, 197, 94, 0.3); }
        .faq-question { display: flex; justify-content: space-between; align-items: center; padding: 14px 16px; cursor: pointer; background: var(--bg-primary); transition: background 0.2s; user-select: none; }
        .faq-question:hover { background: rgba(255,255,255,0.02); }
        .faq-question-text { font-size: 0.85rem; font-weight: 600; color: var(--text-primary); }
        .faq-arrow { font-size: 0.7rem; color: var(--text-muted); transition: transform 0.3s; flex-shrink: 0; margin-left: 12px; }
        .faq-item.open .faq-arrow { transform: rotate(180deg); color: var(--accent-green); }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease, padding 0.3s ease; }
        .faq-item.open .faq-answer { max-height: 200px; padding: 0 16px 16px; }
        .faq-answer-text { font-size: 0.8rem; color: var(--text-secondary); line-height: 1.7; }

        /* Result States */
        .result-container { display: none; animation: fadeSlideIn 0.5s ease; }
        .result-container.show { display: block; }
        @keyframes fadeSlideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Verified Result */
        .result-verified { text-align: center; padding: 30px; background: linear-gradient(135deg, rgba(34,197,94,0.1) 0%, rgba(34,197,94,0.02) 100%); border: 2px solid var(--accent-green); border-radius: 16px; position: relative; overflow: hidden; }
        .result-verified::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--accent-green); }
        .verified-badge { display: inline-flex; align-items: center; gap: 8px; background: var(--accent-green); color: #000; padding: 8px 16px; border-radius: 50px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 20px; }
        .verified-badge::before { content: '\2713'; font-weight: 900; }
        .verified-id { font-family: 'JetBrains Mono', monospace; font-size: 2rem; font-weight: 800; color: var(--accent-green); letter-spacing: 0.15em; margin-bottom: 10px; text-shadow: 0 0 30px var(--accent-green-glow); }
        .verified-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 5px; }
        .verified-subtitle { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 25px; }
        .verified-architect-name { font-family: 'JetBrains Mono', monospace; font-size: 1.2rem; font-weight: 700; color: var(--text-primary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 8px; }
        .verified-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding-top: 20px; border-top: 1px solid rgba(34,197,94,0.2); }
        .verified-stat { text-align: center; }
        .verified-stat-value { font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; font-weight: 800; }
        .verified-stat-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; margin-top: 4px; }

        /* Architect Data Stats */
        .architect-data-section { margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(34,197,94,0.15); display: none; }
        .architect-data-section.visible { display: block; }
        .architect-data-label { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.12em; margin-bottom: 12px; }
        .architect-data-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .architect-data-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border); border-radius: 10px; padding: 14px 10px; text-align: center; }
        .architect-data-value { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 800; color: var(--accent-green); margin-bottom: 4px; }
        .architect-data-sublabel { font-size: 0.6rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.08em; }
        .architect-data-note { font-size: 0.7rem; color: var(--text-muted); margin-top: 10px; line-height: 1.5; }

        /* Protocol Education Section */
        .protocol-section { margin-top: 20px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; display: none; }
        .protocol-section.visible { display: block; }
        .protocol-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; cursor: pointer; background: rgba(255,255,255,0.02); border-bottom: 1px solid var(--border); transition: background 0.2s; user-select: none; }
        .protocol-header:hover { background: rgba(255,255,255,0.04); }
        .protocol-header-text { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; font-weight: 700; color: var(--accent-green); text-transform: uppercase; letter-spacing: 0.1em; }
        .protocol-arrow { font-size: 0.7rem; color: var(--text-muted); transition: transform 0.3s; }
        .protocol-section.open .protocol-arrow { transform: rotate(180deg); color: var(--accent-green); }
        .protocol-body { max-height: 0; overflow: hidden; transition: max-height 0.4s ease; }
        .protocol-section.open .protocol-body { max-height: 600px; }
        .protocol-body-inner { padding: 20px; }
        .protocol-step { display: flex; gap: 14px; align-items: flex-start; margin-bottom: 14px; }
        .protocol-step:last-child { margin-bottom: 0; }
        .protocol-step-num { width: 26px; height: 26px; border-radius: 50%; background: var(--accent-green); color: #000; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 800; font-family: 'JetBrains Mono', monospace; flex-shrink: 0; }
        .protocol-step-text h4 { font-size: 0.8rem; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; }
        .protocol-step-text p { font-size: 0.75rem; color: var(--text-muted); line-height: 1.5; }

        /* Referral CTA inside verified result */
        .referral-cta { margin-top: 20px; padding: 20px; background: linear-gradient(135deg, rgba(251,191,36,0.08) 0%, rgba(251,191,36,0.02) 100%); border: 1px solid rgba(251,191,36,0.25); border-radius: 12px; text-align: center; display: none; }
        .referral-cta.visible { display: block; }
        .referral-cta-eyebrow { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; font-weight: 700; color: var(--accent-gold); text-transform: uppercase; letter-spacing: 0.12em; margin-bottom: 8px; }
        .referral-cta-title { font-size: 1rem; font-weight: 800; color: var(--text-primary); margin-bottom: 6px; }
        .referral-cta-text { font-size: 0.8rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 16px; }
        .referral-cta-btn { display: inline-flex; align-items: center; gap: 8px; background: var(--accent-green); color: #000; padding: 12px 28px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; text-decoration: none; transition: all 0.3s; }
        .referral-cta-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px var(--accent-green-glow); }
        .referral-cta-note { font-size: 0.7rem; color: var(--text-muted); margin-top: 10px; }

        /* FIX #6: Not Found with typo helper */
        .result-notfound { text-align: center; padding: 30px; background: linear-gradient(135deg, rgba(245,158,11,0.1) 0%, rgba(245,158,11,0.02) 100%); border: 2px solid var(--accent-amber); border-radius: 16px; }
        .notfound-icon { font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-amber); font-family: 'JetBrains Mono', monospace; font-weight: 900; }
        .notfound-title { font-size: 1.1rem; font-weight: 700; color: var(--accent-amber); margin-bottom: 10px; }
        .notfound-text { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px; line-height: 1.6; }
        .notfound-format-hint { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 20px; padding: 12px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid var(--border); }
        .notfound-format-hint code { color: var(--accent-green); font-weight: 700; }
        .notfound-try-again { display: inline-flex; align-items: center; gap: 8px; background: var(--accent-amber); color: #000; padding: 12px 24px; border: none; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; cursor: pointer; transition: all 0.3s; margin-bottom: 10px; }
        .notfound-try-again:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(245,158,11,0.3); }
        .notfound-divider { display: flex; align-items: center; gap: 16px; margin: 20px 0; color: var(--text-muted); font-size: 0.75rem; }
        .notfound-divider::before, .notfound-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
        .notfound-context { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0; line-height: 1.5; }

        /* Not Found Secondary CTA */
        .notfound-cta { margin-top: 25px; background: linear-gradient(135deg, rgba(34,197,94,0.1) 0%, rgba(34,197,94,0.02) 100%); border: 2px solid var(--accent-green); border-radius: 16px; padding: 25px; text-align: center; animation: fadeSlideIn 0.5s ease 0.2s both; }
        .urgency-badge { display: inline-flex; align-items: center; gap: 8px; background: rgba(34,197,94,0.2); padding: 8px 16px; border-radius: 50px; margin-bottom: 15px; }
        .urgency-badge span { font-size: 0.8rem; color: var(--accent-green); font-weight: 600; }
        .urgency-title { font-size: 1.2rem; font-weight: 800; margin: 0 0 10px 0; }
        .urgency-text { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; max-width: 400px; margin: 0 auto 20px; }
        .urgency-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px; padding: 15px; background: var(--bg-secondary); border-radius: 10px; }
        .urgency-stat { text-align: center; }
        .urgency-stat-value { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 800; color: var(--accent-green); }
        .urgency-stat-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }
        .urgency-btn { display: inline-flex; align-items: center; gap: 10px; background: var(--accent-green); color: #000; padding: 16px 32px; border-radius: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.95rem; font-weight: 700; text-decoration: none; transition: all 0.3s; box-shadow: 0 4px 15px var(--accent-green-glow); }
        .urgency-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px var(--accent-green-glow); }
        .urgency-note { font-size: 0.75rem; color: var(--text-muted); margin: 12px 0 0 0; }

        /* Processing */
        .processing { text-align: center; padding: 40px 20px; }
        .processing-spinner { width: 50px; height: 50px; border: 3px solid var(--border); border-top-color: var(--accent-green); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .processing-text { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: var(--accent-green); }
        .processing-steps { font-size: 0.75rem; color: var(--text-muted); margin-top: 8px; }

        /* CTA Section */
        .cta-section { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 32px; text-align: center; margin-top: auto; }
        .cta-section.highlight { border-color: var(--accent-gold); background: linear-gradient(135deg, rgba(251,191,36,0.05) 0%, rgba(251,191,36,0.01) 100%); }
        .cta-eyebrow { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--accent-gold); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 12px; }
        .cta-title { font-size: 1.25rem; font-weight: 800; margin-bottom: 10px; }
        .cta-text { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 25px; max-width: 350px; margin-left: auto; margin-right: auto; line-height: 1.6; }
        .cta-btn { display: inline-flex; align-items: center; gap: 10px; background: var(--accent-green); color: #000; padding: 16px 32px; border: none; border-radius: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; text-decoration: none; cursor: pointer; transition: all 0.3s; }
        .cta-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px var(--accent-green-glow); }
        .cta-btn-secondary { display: block; margin-top: 15px; color: var(--text-secondary); font-size: 0.8rem; text-decoration: none; transition: color 0.2s; }
        .cta-btn-secondary:hover { color: var(--text-primary); }

        /* FIX #3: Recency signal replaces counter */
        .recency-signal { display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 20px; font-size: 0.8rem; color: var(--text-muted); }
        .recency-dot { width: 6px; height: 6px; background: var(--accent-green); border-radius: 50%; box-shadow: 0 0 6px var(--accent-green); animation: livePulse 1.5s ease-in-out infinite; }

        /* Footer */
        .footer { text-align: center; padding: 30px 0 20px; margin-top: 40px; border-top: 1px solid var(--border); }
        .footer-links { display: flex; justify-content: center; gap: 25px; margin-bottom: 15px; }
        .footer-link { color: var(--text-muted); text-decoration: none; font-size: 0.8rem; transition: color 0.2s; }
        .footer-link:hover { color: var(--accent-green); }
        .footer-brand { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); }
        .footer-brand a { color: var(--text-secondary); text-decoration: none; }
        .footer-brand a:hover { color: var(--accent-green); }

        /* FIX #10: Recent Verifications (no "Live" label) */
        .recent-verifications { margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border); }
        .recent-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
        .recent-title-wrapper { display: flex; align-items: center; gap: 10px; }
        .recent-title { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; font-weight: 700; }
        .recent-count-badge { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; color: var(--text-muted); background: var(--bg-primary); border: 1px solid var(--border); padding: 4px 10px; border-radius: 20px; }
        @keyframes livePulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .recent-list { display: flex; flex-direction: column; gap: 8px; }
        .recent-item { display: flex; align-items: center; justify-content: space-between; background: var(--bg-primary); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; opacity: 0; animation: recentSlideIn 0.4s ease forwards; transition: all 0.3s; position: relative; overflow: hidden; }
        .recent-item::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: var(--accent-green); border-radius: 3px 0 0 3px; opacity: 0.6; transition: opacity 0.3s; }
        .recent-item:hover { border-color: rgba(34, 197, 94, 0.3); background: rgba(34, 197, 94, 0.03); box-shadow: 0 0 20px rgba(34, 197, 94, 0.08); }
        .recent-item:hover::before { opacity: 1; box-shadow: 0 0 8px var(--accent-green-glow); }
        @keyframes recentSlideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        .recent-item-left { display: flex; align-items: center; gap: 12px; }
        .recent-item-avatar { width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.05)); border: 1px solid rgba(34, 197, 94, 0.3); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 800; color: var(--accent-green); font-family: 'JetBrains Mono', monospace; flex-shrink: 0; }
        .recent-item-id { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; font-weight: 700; color: var(--text-primary); letter-spacing: 0.05em; }
        .recent-item-right { display: flex; align-items: center; gap: 12px; }
        .recent-item-status { display: flex; align-items: center; gap: 6px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; padding: 4px 10px; border-radius: 20px; background: rgba(34, 197, 94, 0.1); color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); }
        .status-dot { width: 6px; height: 6px; background: var(--accent-green); border-radius: 50%; box-shadow: 0 0 6px var(--accent-green); }
        .recent-item-time { font-size: 0.7rem; color: var(--text-muted); white-space: nowrap; }

        /* Verified Gift Section */
        .verified-gift { margin-top: 25px; background: linear-gradient(135deg, rgba(251,191,36,0.1) 0%, rgba(251,191,36,0.02) 100%); border: 2px solid var(--accent-gold); border-radius: 16px; padding: 25px; animation: giftReveal 0.6s ease 0.3s both; }
        @keyframes giftReveal { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .gift-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(251,191,36,0.2); }
        .gift-icon { width: 40px; height: 40px; border-radius: 8px; background: rgba(251, 191, 36, 0.15); border: 1px solid rgba(251, 191, 36, 0.3); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .gift-icon svg { width: 20px; height: 20px; stroke: var(--accent-gold); fill: none; stroke-width: 2; }
        .gift-title { font-size: 1.1rem; font-weight: 700; color: var(--accent-gold); margin: 0; }
        .gift-subtitle { font-size: 0.8rem; color: var(--text-secondary); margin: 0; }
        .gift-card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; padding: 20px; position: relative; }
        .gift-card-badge { position: absolute; top: -10px; right: 20px; background: var(--accent-gold); color: #000; font-size: 0.7rem; font-weight: 800; padding: 4px 12px; border-radius: 20px; }
        .gift-card-title { font-size: 1rem; font-weight: 700; margin: 0 0 10px 0; }
        .gift-card-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 15px; }
        .gift-card-list { list-style: none; padding: 0; margin: 0 0 20px 0; }
        .gift-card-list li { font-size: 0.8rem; color: var(--text-secondary); padding: 6px 0; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 8px; }
        .gift-card-list li:last-child { border-bottom: none; color: var(--text-muted); font-style: italic; }
        .gift-list-marker { color: var(--accent-gold); font-weight: 700; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; flex-shrink: 0; }
        .gift-claim-btn { display: block; width: 100%; background: var(--accent-gold); color: #000; text-align: center; padding: 14px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; font-weight: 700; text-decoration: none; transition: all 0.3s; }
        .gift-claim-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(251,191,36,0.3); }
        .gift-note { font-size: 0.7rem; color: var(--text-muted); text-align: center; margin: 10px 0 0 0; }

        @media (max-width: 480px) {
            .verify-input-wrapper { flex-direction: column; }
            .verify-btn { width: 100%; }
            .verified-stats { gap: 10px; }
            .verified-stat-value { font-size: 1rem; }
            .architect-data-grid { gap: 8px; }
            .architect-data-value { font-size: 0.9rem; }
            .footer-links { flex-direction: column; gap: 12px; }
            .recent-item-right { gap: 8px; }
            .recent-item-time { display: none; }
            .explainer { flex-direction: column; gap: 12px; }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>

    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon"><div class="logo-icon-inner"></div></div>
                <span class="logo-text">AUTOPILOT<span>ELITE</span></span>
            </div>
            <h1>Verify Architect Status</h1>
            <p>Check if someone has completed the Autopilot Money System and earned their Wealth Architect certification.</p>
        </div>

        <!-- ARCHITECT ID EXPLAINER (#9: Already good, enhanced with result-state context) -->
        <div class="explainer">
            <div class="explainer-icon">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="16" rx="2"/><line x1="7" y1="8" x2="17" y2="8"/><line x1="7" y1="12" x2="13" y2="12"/><circle cx="16" cy="16" r="2"/></svg>
            </div>
            <div>
                <div class="explainer-title">What is an Architect ID?</div>
                <div class="explainer-text">A unique credential generated when someone completes the Autopilot Money System. It's permanent, non-transferable, and tied to their identity. Think of it like a certification number: it proves they built and activated their automated wealth machine.</div>
            </div>
        </div>

        <div class="verify-card">
            <div class="verify-label">Enter Architect ID</div>
            <div class="verify-input-wrapper">
                <input type="text" id="architectIdInput" class="verify-input" placeholder="KOU-XXXXXX" maxlength="10" autocomplete="off">
                <button id="verifyBtn" class="verify-btn" onclick="verifyArchitect()">Verify</button>
            </div>

            <!-- FIX #7: FAQ stays visible after verification -->
            <div class="faq-section" id="faqSection">
                <div class="faq-header">Common Questions</div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">Why is the Architect ID permanent?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">Your Architect ID is generated from your unique email address using a one-way hash. It can't be duplicated, transferred, or re-issued to someone else. It's permanent proof that you completed the system, like a diploma number that's yours forever.</div>
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">Why can anyone verify my ID?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">So you can share your achievement with confidence. When you post your certificate on social media, anyone can confirm it's real by entering your ID here. It builds your credibility, not exposes you. You control when and where you share it.</div>
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">What personal information is shown?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">None by default. Verification confirms the ID exists and is active. When architects share their own link, they can choose to include system stats (like ETF choice and auto-invest amount). No email, no location, no private data is ever exposed.</div>
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">How do I get an Architect ID?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">Complete the free Autopilot Money System. It takes about 15 minutes. You'll set up automated investing, pick your ETF, and configure your money flow. At the end, your unique Architect ID is generated and your certificate is minted.</div>
                    </div>
                </div>
            </div>

            <!-- Processing -->
            <div id="processingState" class="processing" style="display: none;">
                <div class="processing-spinner"></div>
                <!-- FIX #5: Honest processing steps -->
                <div class="processing-text" id="processingText">Checking ID format...</div>
                <div class="processing-steps" id="processingSteps">Validating structure...</div>
            </div>

            <!-- Result: Verified -->
            <div id="resultVerified" class="result-container">
                <div class="result-verified">
                    <div class="verified-badge">Verified Architect</div>
                    <div class="verified-id" id="verifiedId">KOU-XXXXXX</div>
                    <div class="verified-architect-name" id="verifiedName" style="display:none;"></div>
                    <div class="verified-title">Wealth Architect</div>
                    <!-- FIX #9: Context line on verified result -->
                    <div class="verified-subtitle">This person completed a 7-module financial automation protocol and activated their wealth machine.</div>
                    <div class="verified-stats">
                        <div class="verified-stat"><div class="verified-stat-value">&#10003;</div><div class="verified-stat-label">System Active</div></div>
                        <div class="verified-stat"><div class="verified-stat-value" id="verifiedYear">2026</div><div class="verified-stat-label">Since</div></div>
                        <div class="verified-stat"><div class="verified-stat-value" id="verifiedModules">7/7</div><div class="verified-stat-label">Modules</div></div>
                    </div>

                    <!-- FIX #8: Personalized data from URL params -->
                    <div class="architect-data-section" id="architectDataSection">
                        <div class="architect-data-label">System Configuration</div>
                        <div class="architect-data-grid">
                            <div class="architect-data-card">
                                <div class="architect-data-value" id="dataInvest">$0</div>
                                <div class="architect-data-sublabel">Monthly<br>Auto-Invest</div>
                            </div>
                            <div class="architect-data-card">
                                <div class="architect-data-value" id="dataEtf">--</div>
                                <div class="architect-data-sublabel">Target<br>ETF</div>
                            </div>
                            <div class="architect-data-card">
                                <div class="architect-data-value" id="dataWealth">$0</div>
                                <div class="architect-data-sublabel">30-Year<br>Projection</div>
                            </div>
                        </div>
                        <div class="architect-data-note" id="dataNote"></div>
                    </div>
                </div>

                <!-- Protocol education (collapsible) -->
                <div class="protocol-section" id="protocolSection">
                    <div class="protocol-header" onclick="toggleProtocol()">
                        <span class="protocol-header-text">What did this person complete?</span>
                        <span class="protocol-arrow" id="protocolArrow">&#9660;</span>
                    </div>
                    <div class="protocol-body">
                        <div class="protocol-body-inner">
                            <div class="protocol-step"><div class="protocol-step-num">1</div><div class="protocol-step-text"><h4>Income Calibration</h4><p>Calculated real deployable income after all bills and obligations. Not gross income. What's actually left.</p></div></div>
                            <div class="protocol-step"><div class="protocol-step-num">2</div><div class="protocol-step-text"><h4>Infrastructure Setup</h4><p>Opened checking, high-yield savings, and investment accounts. Configured automated transfers between them.</p></div></div>
                            <div class="protocol-step"><div class="protocol-step-num">3</div><div class="protocol-step-text"><h4>ETF Selection</h4><p>Selected a diversified investment fund matched to their risk tolerance and time horizon.</p></div></div>
                            <div class="protocol-step"><div class="protocol-step-num">4</div><div class="protocol-step-text"><h4>Automation Activation</h4><p>Configured auto-invest so wealth builds without manual intervention. Zero willpower required after setup.</p></div></div>
                        </div>
                    </div>
                </div>

                <!-- Referral CTA for visitors (non-owners) -->
                <div class="referral-cta" id="referralCta">
                    <div class="referral-cta-eyebrow">Their system is live. Build yours.</div>
                    <div class="referral-cta-title">Install the Autopilot Money System</div>
                    <div class="referral-cta-text">Same 7-module protocol. Same automation. Takes about 15 minutes. Free. No login.</div>
                    <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="referral-cta-btn">Start Building (Free) &#8594;</a>
                    <div class="referral-cta-note">No credit card. No signup wall. Instant access.</div>
                </div>

                <!-- FIX #4 + #12: Command Center gift ONLY for verified owners -->
                <div class="verified-gift" id="verifiedGift" style="display:none;">
                    <div class="gift-header">
                        <div class="gift-icon">
                            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                        </div>
                        <div>
                            <h3 class="gift-title">Command Center Unlocked</h3>
                            <p class="gift-subtitle">Track your wealth-building progress</p>
                        </div>
                    </div>
                    <div class="gift-card">
                        <div class="gift-card-badge">ACCESS GRANTED</div>
                        <h4 class="gift-card-title">Your Financial Command Center</h4>
                        <p class="gift-card-desc">The central hub to track all 7 wealth-building systems.</p>
                        <ul class="gift-card-list">
                            <li><span class="gift-list-marker">[+]</span> Track all 7 systems in one place</li>
                            <li><span class="gift-list-marker">[+]</span> Bronze, Silver, Gold, Elite levels</li>
                            <li><span class="gift-list-marker">[+]</span> Unlock premium tools as you progress</li>
                            <li><span class="gift-list-marker">[+]</span> See your wealth projections</li>
                        </ul>
                        <a href="https://spacekou5-oss.github.io/cashvault-funnel/command-center.html" class="gift-claim-btn" id="giftClaimBtn">Open My Command Center &#8594;</a>
                        <p class="gift-note">*Your Architect ID is already linked</p>
                    </div>
                </div>
            </div>

            <!-- FIX #6: Not Found with typo helper (primary) + Autopilot CTA (secondary) -->
            <div id="resultNotFound" class="result-container">
                <div class="result-notfound">
                    <div class="notfound-icon">[?]</div>
                    <div class="notfound-title">ID Not Recognized</div>
                    <div class="notfound-text">This ID doesn't match any records on this device.</div>
                    <div class="notfound-format-hint">
                        Expected format: <code>KOU-</code> followed by 6 characters (letters and numbers).<br>
                        Example: <code>KOU-A3X9R2</code>
                    </div>
                    <button class="notfound-try-again" onclick="retryVerification()">Check Again &#8634;</button>
                    <div class="notfound-divider">or</div>
                    <!-- FIX #9: Context line for Not Found -->
                    <div class="notfound-context">Architect IDs are generated after completing the free Autopilot Money System.</div>
                </div>
                <div class="notfound-cta">
                    <div class="urgency-badge"><span style="font-weight:800; font-family:'JetBrains Mono',monospace;">&gt;</span><span>Don't have an Architect ID yet?</span></div>
                    <h3 class="urgency-title">Build Your Wealth Machine</h3>
                    <p class="urgency-text">The same system these architects installed. 7 modules. Fully automated. Your ID is minted at the end.</p>
                    <div class="urgency-stats">
                        <div class="urgency-stat"><div class="urgency-stat-value">7</div><div class="urgency-stat-label">Modules</div></div>
                        <div class="urgency-stat"><div class="urgency-stat-value">$0</div><div class="urgency-stat-label">Cost</div></div>
                        <div class="urgency-stat"><div class="urgency-stat-value">15 min</div><div class="urgency-stat-label">To Install</div></div>
                    </div>
                    <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="urgency-btn">Get My Architect ID &#8594;</a>
                    <p class="urgency-note">Free. No credit card. Instant access.</p>
                </div>
            </div>

            <!-- FIX #10: Recent Verifications (removed "Live" label) -->
            <div class="recent-verifications" id="recentVerifications">
                <div class="recent-header">
                    <div class="recent-title-wrapper">
                        <span class="recent-title">Recent Verifications</span>
                    </div>
                    <!-- FIX #3: Recency signal replaces hardcoded counter -->
                    <span class="recent-count-badge" id="recentCountBadge">Loading...</span>
                </div>
                <div class="recent-list" id="recentList"></div>
            </div>
        </div>

        <div class="cta-section highlight" id="ctaSection">
            <div class="cta-eyebrow">Not an Architect Yet?</div>
            <div class="cta-title">Get Your Own Architect ID</div>
            <div class="cta-text">Install the Autopilot Money System and build your automated wealth machine.</div>
            <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="cta-btn">Install The System</a>
            <a href="https://instagram.com/koutalksmoney" target="_blank" class="cta-btn-secondary">or follow @koutalksmoney for more</a>
            <!-- FIX #3: Recency signal instead of fake total -->
            <div class="recency-signal" id="ctaRecency">
                <span class="recency-dot"></span>
                <span id="ctaRecencyText">Verifications active today</span>
            </div>
        </div>

        <div class="footer">
            <div class="footer-links">
                <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="footer-link">Get Your Architect ID</a>
                <a href="https://instagram.com/koutalksmoney" target="_blank" class="footer-link">Instagram</a>
            </div>
            <div class="footer-brand">Built by <a href="https://instagram.com/koutalksmoney" target="_blank">@koutalksmoney</a></div>
        </div>
    </div>

    <script>
        const CONFIG = {
            AUTOPILOT_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html',
            COMMAND_CENTER_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/command-center.html',
            INSTAGRAM: 'https://instagram.com/koutalksmoney',
            VERIFICATION_DELAY: 2500,
            VALID_PREFIX: 'KOU-',
            VALID_ID_LENGTH: 10
        };

        // FIX #5: Honest processing steps (describe real operations)
        const PROCESSING_STEPS = [
            { text: 'Checking ID format...', step: 'Validating structure...' },
            { text: 'Searching local records...', step: 'Checking device credentials...' },
            { text: 'Confirming certification status...', step: 'Matching completion data...' },
            { text: 'Loading architect profile...', step: 'Assembling results...' }
        ];

        // URL param data for shared verification links
        const URL_ARCHITECT_DATA = (function() {
            const p = new URLSearchParams(window.location.search);
            const inv = parseFloat(p.get('inv')) || 0;
            const w = parseFloat(p.get('w')) || (inv > 0 ? calcFutureValue(inv, 30) : 0);
            return {
                id: p.get('id') ? p.get('id').toUpperCase().trim() : null,
                name: p.get('n') ? decodeURIComponent(p.get('n')) : null,
                invest: inv,
                etf: p.get('etf') || null,
                wealth: w,
                hasData: inv > 0 || p.get('n') || p.get('etf')
            };
        })();

        function calcFutureValue(monthly, years) {
            var r = 0.10, n = 12;
            return monthly * ((Math.pow(1 + r/n, n * years) - 1) / (r/n));
        }

        // === FAQ TOGGLE (FIX #7: FAQ always visible) ===
        function toggleFaq(item) {
            document.querySelectorAll('.faq-item').forEach(function(el) {
                if (el !== item) el.classList.remove('open');
            });
            item.classList.toggle('open');
        }

        function toggleProtocol() {
            document.getElementById('protocolSection').classList.toggle('open');
        }

        // FIX #6: Try Again handler
        function retryVerification() {
            var input = document.getElementById('architectIdInput');
            document.getElementById('resultNotFound').classList.remove('show');
            input.value = '';
            input.focus();
            input.style.borderColor = 'var(--accent-green)';
            setTimeout(function() { input.style.borderColor = ''; }, 2000);
        }

        // =============================================
        // FIX #10: Decoy generation (no changes needed,
        // but removed isDisplayedId and Claimed logic)
        // =============================================
        function generateDecoyArchitects() {
            var sessionSeed = Math.floor(Date.now() / 300000);
            var seededRandom = function(seed, index) {
                var x = Math.sin(seed + index * 9999) * 10000;
                return x - Math.floor(x);
            };
            var chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            function generateSeededId(seed, index) {
                var id = 'KOU-';
                for (var j = 0; j < 6; j++) {
                    var charIndex = Math.floor(seededRandom(seed + index, j) * chars.length);
                    id += chars.charAt(charIndex);
                }
                return id;
            }
            var baseMinutes = [
                Math.floor(seededRandom(sessionSeed, 100) * 3) + 1,
                Math.floor(seededRandom(sessionSeed, 101) * 8) + 4,
                Math.floor(seededRandom(sessionSeed, 102) * 15) + 12,
                Math.floor(seededRandom(sessionSeed, 103) * 30) + 27,
                Math.floor(seededRandom(sessionSeed, 104) * 45) + 58,
                Math.floor(seededRandom(sessionSeed, 105) * 60) + 60,
                Math.floor(seededRandom(sessionSeed, 106) * 90) + 90,
                Math.floor(seededRandom(sessionSeed, 107) * 120) + 120
            ];
            var decoys = [];
            for (var i = 0; i < 8; i++) {
                var id = generateSeededId(sessionSeed, i);
                var mins = baseMinutes[i];
                var timeText = mins < 60 ? mins + 'm ago' : Math.floor(mins/60) + 'h ago';
                decoys.push({ id: id, time: Date.now() - (mins * 60000), timeText: timeText });
            }
            return decoys;
        }

        function getTimeAgo(timestamp) {
            if (!timestamp) return 'Recently';
            var diff = Date.now() - timestamp;
            var mins = Math.floor(diff / 60000);
            var hours = Math.floor(diff / 3600000);
            var days = Math.floor(diff / 86400000);
            if (mins < 1) return 'Just now';
            if (mins < 60) return mins + 'm ago';
            if (hours < 24) return hours + 'h ago';
            if (days < 7) return days + 'd ago';
            return Math.floor(days / 7) + 'w ago';
        }

        // =============================================
        // FIX #3: Recency signal
        // =============================================
        function updateRecencySignal(decoys) {
            var countBadge = document.getElementById('recentCountBadge');
            var ctaRecencyText = document.getElementById('ctaRecencyText');

            // Use most recent activity (real or decoy) for recency
            var localVerifications = JSON.parse(localStorage.getItem('recent_verifications') || '[]');
            var mostRecent = null;

            if (localVerifications.length > 0) {
                mostRecent = localVerifications[0].time;
            }
            if (!mostRecent && decoys.length > 0) {
                mostRecent = decoys[0].time;
            }

            if (mostRecent) {
                var ago = getTimeAgo(mostRecent);
                countBadge.textContent = 'Last verified: ' + ago;
                ctaRecencyText.textContent = 'Last verified ' + ago;
            } else {
                countBadge.textContent = 'Verifications active';
                ctaRecencyText.textContent = 'Verifications active today';
            }
        }

        // =============================================
        // FEED LOADER (FIX #2: decoys go through normal
        // pipeline if typed, no special Claimed state)
        // =============================================
        function loadRecentVerifications() {
            var recentList = document.getElementById('recentList');
            var decoys = generateDecoyArchitects();

            var localVerifications = JSON.parse(localStorage.getItem('recent_verifications') || '[]');

            // Merge real + decoy, real first
            var realIds = {};
            localVerifications.forEach(function(v) { realIds[v.id] = true; });
            var filteredDecoys = decoys.filter(function(d) { return !realIds[d.id]; });

            var realSlice = localVerifications.slice(0, 3);
            var decoySlice = filteredDecoys.slice(0, 8 - realSlice.length);
            var combined = realSlice.concat(decoySlice);

            recentList.innerHTML = '';

            combined.forEach(function(architect, i) {
                var timeAgo = architect.timeText || getTimeAgo(architect.time);
                var initials = architect.id.replace('KOU-', '').slice(0, 2);

                var item = document.createElement('div');
                item.className = 'recent-item';
                item.style.animationDelay = (i * 0.08) + 's';
                item.innerHTML =
                    '<div class="recent-item-left">' +
                        '<div class="recent-item-avatar">' + initials + '</div>' +
                        '<span class="recent-item-id">' + architect.id + '</span>' +
                    '</div>' +
                    '<div class="recent-item-right">' +
                        '<span class="recent-item-status"><span class="status-dot"></span> Verified</span>' +
                        '<span class="recent-item-time">' + timeAgo + '</span>' +
                    '</div>';
                recentList.appendChild(item);
            });

            updateRecencySignal(decoys);
        }

        // =============================================
        // INPUT FORMATTING
        // =============================================
        document.getElementById('architectIdInput').addEventListener('input', function(e) {
            var value = e.target.value.toUpperCase().replace(/[^A-Z0-9-]/g, '');
            if (value.length > 0 && !value.startsWith('KOU-') && !value.startsWith('KOU') && !value.startsWith('KO') && !value.startsWith('K')) {
                if (value.length <= 6) value = 'KOU-' + value;
            }
            if (value.length > 4 && value[3] !== '-') value = value.slice(0, 3) + '-' + value.slice(3);
            e.target.value = value.slice(0, 10);
        });

        document.getElementById('architectIdInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') verifyArchitect();
        });

        // =============================================
        // ARCHITECT DATA DISPLAY (FIX #8: personalized)
        // =============================================
        function showArchitectData(isOwner) {
            var data = URL_ARCHITECT_DATA;

            // Show name if available
            if (data.name) {
                var nameEl = document.getElementById('verifiedName');
                nameEl.textContent = data.name;
                nameEl.style.display = 'block';
            }

            // Show data stats if available
            if (data.invest > 0 || data.etf) {
                var section = document.getElementById('architectDataSection');
                section.classList.add('visible');

                if (data.invest > 0) {
                    document.getElementById('dataInvest').textContent = '$' + Math.round(data.invest).toLocaleString();
                }
                if (data.etf) {
                    document.getElementById('dataEtf').textContent = data.etf;
                }
                if (data.wealth > 0) {
                    document.getElementById('dataWealth').textContent = '$' + Math.round(data.wealth).toLocaleString();
                    document.getElementById('dataNote').textContent = 'Based on $' + Math.round(data.invest) + '/mo at ~10% avg annual return (S&P 500 historical average).';
                }
            }

            // Also try localStorage for owner data
            if (isOwner) {
                try {
                    var localData = JSON.parse(localStorage.getItem('cashvault_architect_data') || 'null');
                    if (localData) {
                        var section = document.getElementById('architectDataSection');
                        section.classList.add('visible');
                        if (localData.monthlyInvest) document.getElementById('dataInvest').textContent = '$' + Math.round(localData.monthlyInvest).toLocaleString();
                        if (localData.etf) document.getElementById('dataEtf').textContent = localData.etf;
                        if (localData.wealth) document.getElementById('dataWealth').textContent = '$' + Math.round(localData.wealth).toLocaleString();
                        if (localData.completedAt) {
                            var completedDate = new Date(localData.completedAt);
                            document.getElementById('verifiedYear').textContent = completedDate.getFullYear();
                        }
                    }
                } catch(e) { /* silent */ }
            }

            // Show protocol education section
            document.getElementById('protocolSection').classList.add('visible');
        }

        // =============================================
        // FIX #1: REAL VERIFICATION LOGIC
        // Only localStorage match or shared link = verified
        // Everything else = Not Found
        // =============================================
        function isArchitectOwner(verifiedId) {
            var localId = localStorage.getItem('cashvault_architect_id');
            return localId && localId === verifiedId;
        }

        function isSharedVerification(inputId) {
            // Shared link: URL has ?id=X with matching ID AND has additional data params
            return URL_ARCHITECT_DATA.id === inputId && URL_ARCHITECT_DATA.hasData;
        }

        function isValidFormat(id) {
            return id.startsWith(CONFIG.VALID_PREFIX) &&
                   id.length === CONFIG.VALID_ID_LENGTH &&
                   /^KOU-[A-Z0-9]{6}$/.test(id);
        }

        async function verifyArchitect() {
            var input = document.getElementById('architectIdInput');
            var btn = document.getElementById('verifyBtn');
            var processingState = document.getElementById('processingState');
            var processingText = document.getElementById('processingText');
            var processingSteps = document.getElementById('processingSteps');
            var resultVerified = document.getElementById('resultVerified');
            var resultNotFound = document.getElementById('resultNotFound');
            var recentVerifications = document.getElementById('recentVerifications');

            var architectId = input.value.trim().toUpperCase();

            if (!architectId || architectId.length < 10) {
                input.style.borderColor = 'var(--accent-red)';
                input.focus();
                setTimeout(function() { input.style.borderColor = ''; }, 2000);
                return;
            }

            // Reset states
            resultVerified.classList.remove('show');
            resultNotFound.classList.remove('show');
            recentVerifications.style.display = 'none';
            // FIX #7: FAQ stays visible (removed faqSection.style.display = 'none')

            processingState.style.display = 'block';
            btn.disabled = true;
            input.disabled = true;

            // FIX #5: Honest processing steps
            var stepIndex = 0;
            var stepInterval = setInterval(function() {
                if (stepIndex < PROCESSING_STEPS.length) {
                    processingText.textContent = PROCESSING_STEPS[stepIndex].text;
                    processingSteps.textContent = PROCESSING_STEPS[stepIndex].step;
                    stepIndex++;
                }
            }, CONFIG.VERIFICATION_DELAY / PROCESSING_STEPS.length);

            // FIX #1: Real verification checks
            var isOwner = isArchitectOwner(architectId);
            var isShared = isSharedVerification(architectId);
            var isValid = isValidFormat(architectId);

            setTimeout(function() {
                clearInterval(stepInterval);
                processingState.style.display = 'none';
                btn.disabled = false;
                input.disabled = false;

                // ===================================
                // FIX #1: THREE-TIER VERIFICATION GATE
                // ===================================

                if (isValid && (isOwner || isShared)) {
                    // === VERIFIED: Owner or Shared Link ===
                    document.getElementById('verifiedId').textContent = architectId;
                    document.getElementById('verifiedYear').textContent = new Date().getFullYear();
                    resultVerified.classList.add('show');

                    // FIX #4 + #12: Single funnel gating
                    if (isOwner) {
                        // Owner: Command Center gift, hide referral
                        document.getElementById('verifiedGift').style.display = 'block';
                        document.getElementById('referralCta').classList.remove('visible');
                    } else {
                        // Visitor via shared link: Autopilot CTA, hide gift
                        document.getElementById('referralCta').classList.add('visible');
                        document.getElementById('verifiedGift').style.display = 'none';
                    }

                    // FIX #8: Show personalized data
                    showArchitectData(isOwner);

                    // Hide bottom CTA (already seeing a CTA inside result)
                    document.getElementById('ctaSection').style.display = 'none';

                    // Track verification
                    addToRecentVerifications(architectId);
                    localStorage.setItem('last_verified_id', architectId);

                    // Self-registration: if owner verifying own ID, ensure it's stored
                    if (isOwner) {
                        localStorage.setItem('cashvault_architect_verified', 'true');
                    }

                } else {
                    // === NOT FOUND: valid or invalid format, no match ===
                    resultNotFound.classList.add('show');
                }

                recentVerifications.style.display = 'block';

                setTimeout(function() {
                    var result = (isValid && (isOwner || isShared)) ? resultVerified : resultNotFound;
                    result.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);

            }, CONFIG.VERIFICATION_DELAY);
        }

        function addToRecentVerifications(id) {
            var stored = JSON.parse(localStorage.getItem('recent_verifications') || '[]');
            var filtered = stored.filter(function(v) { return v.id !== id; });
            filtered.unshift({ id: id, time: Date.now() });
            if (filtered.length > 20) filtered.pop();
            localStorage.setItem('recent_verifications', JSON.stringify(filtered));
        }

        // =============================================
        // URL PARAMS: Auto-verify if ?id= present
        // =============================================
        function checkUrlParams() {
            var params = new URLSearchParams(window.location.search);
            var id = params.get('id');
            if (id) {
                var formattedId = id.toUpperCase().trim();
                document.getElementById('architectIdInput').value = formattedId;
                localStorage.setItem('last_verified_id', formattedId);
                setTimeout(function() { verifyArchitect(); }, 500);
            } else {
                var lastId = localStorage.getItem('last_verified_id');
                if (lastId) {
                    document.getElementById('architectIdInput').value = lastId;
                }
            }
        }

        // =============================================
        // INIT
        // =============================================
        document.addEventListener('DOMContentLoaded', function() {
            loadRecentVerifications();
            checkUrlParams();

            // Refresh feed every 60 seconds
            setInterval(function() {
                if (document.getElementById('recentVerifications').style.display !== 'none') {
                    loadRecentVerifications();
                }
            }, 60000);
        });
    </script>
</body>
</html>
