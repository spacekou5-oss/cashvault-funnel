<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Architect Status | Autopilot System</title>
    
    <meta property="og:title" content="Verify Architect Status | Autopilot System">
    <meta property="og:description" content="Check if someone has installed the Autopilot Money System and earned their Wealth Architect certification.">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-card: #161616;
            --accent-green: #22c55e;
            --accent-green-glow: rgba(34, 197, 94, 0.3);
            --accent-gold: #fbbf24;
            --accent-red: #ef4444;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border: #27272a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed; inset: 0;
            background-image: 
                linear-gradient(rgba(34, 197, 94, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(34, 197, 94, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none; z-index: 0;
        }

        .bg-glow {
            position: fixed;
            width: 600px; height: 600px;
            border-radius: 50%;
            filter: blur(150px);
            pointer-events: none; z-index: 0;
        }
        .bg-glow-1 { top: -200px; left: -200px; background: var(--accent-green); opacity: 0.15; }
        .bg-glow-2 { bottom: -200px; right: -200px; background: var(--accent-gold); opacity: 0.1; }

        @media (max-width: 768px) {
            .bg-glow { display: none; }
            .bg-grid { opacity: 0.5; }
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative; z-index: 1;
            min-height: 100vh;
            display: flex; flex-direction: column;
        }

        /* Header */
        .header { text-align: center; margin-bottom: 40px; }
        .logo { display: inline-flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .logo-icon { width: 40px; height: 40px; border: 2px solid var(--accent-green); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .logo-icon-inner { width: 20px; height: 20px; background: var(--accent-green); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.7; transform: scale(0.9); } }
        .logo-text { font-family: 'JetBrains Mono', monospace; font-size: 1rem; font-weight: 700; letter-spacing: 0.1em; }
        .logo-text span { color: var(--accent-green); }
        .header h1 { font-size: clamp(1.75rem, 5vw, 2.5rem); font-weight: 800; margin-bottom: 10px; letter-spacing: -0.02em; }
        .header p { color: var(--text-secondary); font-size: 1rem; max-width: 400px; margin: 0 auto; line-height: 1.6; }

        /* Explainer */
        .explainer {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }
        .explainer-icon {
            flex-shrink: 0;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .explainer-icon svg { width: 18px; height: 18px; stroke: var(--accent-green); fill: none; stroke-width: 2; }
        .explainer-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--accent-green);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 6px;
        }
        .explainer-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Verification Card */
        .verify-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 32px; margin-bottom: 30px; }
        .verify-label { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 12px; }
        .verify-input-wrapper { display: flex; gap: 12px; margin-bottom: 20px; }
        .verify-input { flex: 1; background: var(--bg-primary); border: 2px solid var(--border); border-radius: 10px; padding: 16px 20px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; text-align: center; outline: none; transition: all 0.3s; }
        .verify-input::placeholder { color: var(--text-muted); font-weight: 400; letter-spacing: 0.05em; }
        .verify-input:focus { border-color: var(--accent-green); box-shadow: 0 0 0 3px var(--accent-green-glow); }
        .verify-btn { background: var(--accent-green); color: #000; border: none; border-radius: 10px; padding: 16px 28px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; cursor: pointer; transition: all 0.3s; white-space: nowrap; }
        .verify-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px var(--accent-green-glow); }
        .verify-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        /* FAQ Accordion */
        .faq-section {
            border-top: 1px solid var(--border);
            padding-top: 20px;
            margin-top: 4px;
        }
        .faq-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 12px;
        }
        .faq-item {
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 8px;
            overflow: hidden;
            transition: border-color 0.3s;
        }
        .faq-item:hover { border-color: rgba(255,255,255,0.1); }
        .faq-item.open { border-color: rgba(34, 197, 94, 0.3); }
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 16px;
            cursor: pointer;
            background: var(--bg-primary);
            transition: background 0.2s;
            user-select: none;
        }
        .faq-question:hover { background: rgba(255,255,255,0.02); }
        .faq-question-text {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        .faq-arrow {
            font-size: 0.7rem;
            color: var(--text-muted);
            transition: transform 0.3s;
            flex-shrink: 0;
            margin-left: 12px;
        }
        .faq-item.open .faq-arrow { transform: rotate(180deg); color: var(--accent-green); }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }
        .faq-item.open .faq-answer {
            max-height: 200px;
            padding: 0 16px 16px;
        }
        .faq-answer-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Result States */
        .result-container { display: none; animation: fadeSlideIn 0.5s ease; }
        .result-container.show { display: block; }
        @keyframes fadeSlideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Verified Result */
        .result-verified { text-align: center; padding: 30px; background: linear-gradient(135deg, rgba(34,197,94,0.1) 0%, rgba(34,197,94,0.02) 100%); border: 2px solid var(--accent-green); border-radius: 16px; position: relative; overflow: hidden; }
        .result-verified::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--accent-green); }
        .verified-badge { display: inline-flex; align-items: center; gap: 8px; background: var(--accent-green); color: #000; padding: 8px 16px; border-radius: 50px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 20px; }
        .verified-badge::before { content: '\2713'; font-weight: 900; }
        .verified-id { font-family: 'JetBrains Mono', monospace; font-size: 2rem; font-weight: 800; color: var(--accent-green); letter-spacing: 0.15em; margin-bottom: 10px; text-shadow: 0 0 30px var(--accent-green-glow); }
        .verified-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 5px; }
        .verified-subtitle { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 25px; }

        /* === NEW: Verified architect name === */
        .verified-architect-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 8px;
        }

        .verified-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding-top: 20px; border-top: 1px solid rgba(34,197,94,0.2); }
        .verified-stat { text-align: center; }
        .verified-stat-value { font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; font-weight: 800; }
        .verified-stat-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; margin-top: 4px; }

        /* === NEW: Architect Data Stats (from URL params) === */
        .architect-data-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(34,197,94,0.15);
            display: none;
        }
        .architect-data-section.visible { display: block; }
        .architect-data-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            margin-bottom: 12px;
        }
        .architect-data-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        .architect-data-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 14px 10px;
            text-align: center;
        }
        .architect-data-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--accent-green);
            margin-bottom: 4px;
        }
        .architect-data-sublabel {
            font-size: 0.6rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }
        .architect-data-note {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 10px;
            line-height: 1.5;
        }

        /* === NEW: Protocol Education Section === */
        .protocol-section {
            margin-top: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            display: none;
        }
        .protocol-section.visible { display: block; }
        .protocol-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            cursor: pointer;
            background: rgba(255,255,255,0.02);
            border-bottom: 1px solid var(--border);
            transition: background 0.2s;
            user-select: none;
        }
        .protocol-header:hover { background: rgba(255,255,255,0.04); }
        .protocol-header-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--accent-green);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .protocol-arrow {
            font-size: 0.7rem;
            color: var(--text-muted);
            transition: transform 0.3s;
        }
        .protocol-section.open .protocol-arrow { transform: rotate(180deg); color: var(--accent-green); }
        .protocol-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }
        .protocol-section.open .protocol-body {
            max-height: 600px;
        }
        .protocol-body-inner {
            padding: 20px;
        }
        .protocol-step {
            display: flex;
            gap: 14px;
            align-items: flex-start;
            margin-bottom: 14px;
        }
        .protocol-step:last-child { margin-bottom: 0; }
        .protocol-step-num {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: var(--accent-green);
            color: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            flex-shrink: 0;
        }
        .protocol-step-text h4 {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2px;
        }
        .protocol-step-text p {
            font-size: 0.75rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* === NEW: Referral CTA inside verified result === */
        .referral-cta {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(251,191,36,0.08) 0%, rgba(251,191,36,0.02) 100%);
            border: 1px solid rgba(251,191,36,0.25);
            border-radius: 12px;
            text-align: center;
            display: none;
        }
        .referral-cta.visible { display: block; }
        .referral-cta-eyebrow {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            font-weight: 700;
            color: var(--accent-gold);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            margin-bottom: 8px;
        }
        .referral-cta-title {
            font-size: 1rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 6px;
        }
        .referral-cta-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 16px;
        }
        .referral-cta-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--accent-green);
            color: #000;
            padding: 12px 28px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            text-decoration: none;
            transition: all 0.3s;
        }
        .referral-cta-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px var(--accent-green-glow); }
        .referral-cta-note {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 10px;
        }

        /* Not Found Result */
        .result-notfound { text-align: center; padding: 30px; background: linear-gradient(135deg, rgba(239,68,68,0.1) 0%, rgba(239,68,68,0.02) 100%); border: 2px solid var(--accent-red); border-radius: 16px; }
        .notfound-icon { font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-red); font-family: 'JetBrains Mono', monospace; font-weight: 900; }
        .notfound-title { font-size: 1.1rem; font-weight: 700; color: var(--accent-red); margin-bottom: 10px; }
        .notfound-text { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 20px; }

        /* Processing */
        .processing { text-align: center; padding: 40px 20px; }
        .processing-spinner { width: 50px; height: 50px; border: 3px solid var(--border); border-top-color: var(--accent-green); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .processing-text { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: var(--accent-green); }
        .processing-steps { font-size: 0.75rem; color: var(--text-muted); margin-top: 8px; }

        /* CTA Section */
        .cta-section { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 32px; text-align: center; margin-top: auto; }
        .cta-section.highlight { border-color: var(--accent-gold); background: linear-gradient(135deg, rgba(251,191,36,0.05) 0%, rgba(251,191,36,0.01) 100%); }
        .cta-eyebrow { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--accent-gold); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 12px; }
        .cta-title { font-size: 1.25rem; font-weight: 800; margin-bottom: 10px; }
        .cta-text { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 25px; max-width: 350px; margin-left: auto; margin-right: auto; line-height: 1.6; }
        .cta-btn { display: inline-flex; align-items: center; gap: 10px; background: var(--accent-green); color: #000; padding: 16px 32px; border: none; border-radius: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; text-decoration: none; cursor: pointer; transition: all 0.3s; }
        .cta-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px var(--accent-green-glow); }
        .cta-btn-secondary { display: block; margin-top: 15px; color: var(--text-secondary); font-size: 0.8rem; text-decoration: none; transition: color 0.2s; }
        .cta-btn-secondary:hover { color: var(--text-primary); }

        .social-proof { display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 20px; font-size: 0.8rem; color: var(--text-muted); }
        .social-proof-count { color: var(--accent-green); font-weight: 700; font-family: 'JetBrains Mono', monospace; }

        /* Footer */
        .footer { text-align: center; padding: 30px 0 20px; margin-top: 40px; border-top: 1px solid var(--border); }
        .footer-links { display: flex; justify-content: center; gap: 25px; margin-bottom: 15px; }
        .footer-link { color: var(--text-muted); text-decoration: none; font-size: 0.8rem; transition: color 0.2s; }
        .footer-link:hover { color: var(--accent-green); }
        .footer-brand { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); }
        .footer-brand a { color: var(--text-secondary); text-decoration: none; }
        .footer-brand a:hover { color: var(--accent-green); }

        /* Recent Verifications */
        .recent-verifications { margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border); }
        .recent-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
        .recent-title-wrapper { display: flex; align-items: center; gap: 10px; }
        .live-dot { width: 8px; height: 8px; background: var(--accent-green); border-radius: 50%; animation: livePulse 1.5s ease-in-out infinite; box-shadow: 0 0 8px var(--accent-green), 0 0 16px var(--accent-green-glow); }
        @keyframes livePulse { 0%, 100% { opacity: 1; box-shadow: 0 0 8px var(--accent-green), 0 0 16px var(--accent-green-glow); } 50% { opacity: 0.5; box-shadow: 0 0 4px var(--accent-green), 0 0 8px var(--accent-green-glow); } }
        .recent-title { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--accent-green); text-transform: uppercase; letter-spacing: 0.1em; font-weight: 700; }
        .recent-count-badge { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; color: var(--text-muted); background: var(--bg-primary); border: 1px solid var(--border); padding: 4px 10px; border-radius: 20px; }
        .recent-list { display: flex; flex-direction: column; gap: 8px; }
        .recent-item { display: flex; align-items: center; justify-content: space-between; background: var(--bg-primary); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; opacity: 0; animation: recentSlideIn 0.4s ease forwards; transition: all 0.3s; position: relative; overflow: hidden; }
        .recent-item::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: var(--accent-green); border-radius: 3px 0 0 3px; opacity: 0.6; transition: opacity 0.3s; }
        .recent-item:hover { border-color: rgba(34, 197, 94, 0.3); background: rgba(34, 197, 94, 0.03); box-shadow: 0 0 20px rgba(34, 197, 94, 0.08); }
        .recent-item:hover::before { opacity: 1; box-shadow: 0 0 8px var(--accent-green-glow); }
        @keyframes recentSlideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        .recent-item-left { display: flex; align-items: center; gap: 12px; }
        .recent-item-avatar { width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.05)); border: 1px solid rgba(34, 197, 94, 0.3); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 800; color: var(--accent-green); font-family: 'JetBrains Mono', monospace; flex-shrink: 0; }
        .recent-item-id { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; font-weight: 700; color: var(--text-primary); letter-spacing: 0.05em; }
        .recent-item-right { display: flex; align-items: center; gap: 12px; }
        .recent-item-status { display: flex; align-items: center; gap: 6px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; padding: 4px 10px; border-radius: 20px; background: rgba(34, 197, 94, 0.1); color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); }
        .status-dot { width: 6px; height: 6px; background: var(--accent-green); border-radius: 50%; box-shadow: 0 0 6px var(--accent-green); }
        .recent-item-time { font-size: 0.7rem; color: var(--text-muted); white-space: nowrap; }
        .recent-empty { text-align: center; padding: 30px 20px; color: var(--text-muted); font-size: 0.85rem; }

        /* Verified Gift Section */
        .verified-gift { margin-top: 25px; background: linear-gradient(135deg, rgba(251,191,36,0.1) 0%, rgba(251,191,36,0.02) 100%); border: 2px solid var(--accent-gold); border-radius: 16px; padding: 25px; animation: giftReveal 0.6s ease 0.3s both; }
        @keyframes giftReveal { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .gift-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(251,191,36,0.2); }
        .gift-icon { width: 40px; height: 40px; border-radius: 8px; background: rgba(251, 191, 36, 0.15); border: 1px solid rgba(251, 191, 36, 0.3); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .gift-icon svg { width: 20px; height: 20px; stroke: var(--accent-gold); fill: none; stroke-width: 2; }
        .gift-title { font-size: 1.1rem; font-weight: 700; color: var(--accent-gold); margin: 0; }
        .gift-subtitle { font-size: 0.8rem; color: var(--text-secondary); margin: 0; }
        .gift-card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; padding: 20px; position: relative; }
        .gift-card-badge { position: absolute; top: -10px; right: 20px; background: var(--accent-gold); color: #000; font-size: 0.7rem; font-weight: 800; padding: 4px 12px; border-radius: 20px; }
        .gift-card-title { font-size: 1rem; font-weight: 700; margin: 0 0 10px 0; }
        .gift-card-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 15px; }
        .gift-card-list { list-style: none; padding: 0; margin: 0 0 20px 0; }
        .gift-card-list li { font-size: 0.8rem; color: var(--text-secondary); padding: 6px 0; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 8px; }
        .gift-card-list li:last-child { border-bottom: none; color: var(--text-muted); font-style: italic; }
        .gift-list-marker { color: var(--accent-gold); font-weight: 700; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; flex-shrink: 0; }
        .gift-claim-btn { display: block; width: 100%; background: var(--accent-gold); color: #000; text-align: center; padding: 14px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; font-weight: 700; text-decoration: none; transition: all 0.3s; }
        .gift-claim-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(251,191,36,0.3); }
        .gift-note { font-size: 0.7rem; color: var(--text-muted); text-align: center; margin: 10px 0 0 0; }

        /* Not Found Urgency CTA */
        .notfound-cta { margin-top: 25px; background: linear-gradient(135deg, rgba(34,197,94,0.1) 0%, rgba(34,197,94,0.02) 100%); border: 2px solid var(--accent-green); border-radius: 16px; padding: 25px; text-align: center; animation: fadeSlideIn 0.5s ease 0.2s both; }
        .urgency-badge { display: inline-flex; align-items: center; gap: 8px; background: rgba(34,197,94,0.2); padding: 8px 16px; border-radius: 50px; margin-bottom: 15px; }
        .urgency-badge span { font-size: 0.8rem; color: var(--accent-green); font-weight: 600; }
        .urgency-title { font-size: 1.2rem; font-weight: 800; margin: 0 0 10px 0; }
        .urgency-text { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; max-width: 400px; margin: 0 auto 20px; }
        .urgency-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px; padding: 15px; background: var(--bg-secondary); border-radius: 10px; }
        .urgency-stat { text-align: center; }
        .urgency-stat-value { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 800; color: var(--accent-green); }
        .urgency-stat-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }
        .urgency-btn { display: inline-flex; align-items: center; gap: 10px; background: var(--accent-green); color: #000; padding: 16px 32px; border-radius: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.95rem; font-weight: 700; text-decoration: none; transition: all 0.3s; box-shadow: 0 4px 15px var(--accent-green-glow); }
        .urgency-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px var(--accent-green-glow); }
        .urgency-note { font-size: 0.75rem; color: var(--text-muted); margin: 12px 0 0 0; }

        /* Claimed ID Result */
        .result-claimed { background: linear-gradient(135deg, rgba(239,68,68,0.1) 0%, var(--bg-card) 100%); border: 2px solid var(--accent-red); border-radius: 16px; padding: 30px; text-align: center; margin-bottom: 20px; }
        .claimed-icon { font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-red); font-family: 'JetBrains Mono', monospace; font-weight: 900; }
        .claimed-title { font-size: 1.3rem; font-weight: 800; color: var(--accent-red); margin-bottom: 10px; }
        .claimed-id { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--text-muted); text-decoration: line-through; margin-bottom: 15px; padding: 8px 16px; background: rgba(239,68,68,0.1); border-radius: 8px; display: inline-block; }
        .claimed-text { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        .claimed-cta { background: linear-gradient(135deg, rgba(34,197,94,0.1) 0%, var(--bg-card) 100%); border: 2px solid var(--accent-green); border-radius: 16px; padding: 25px; text-align: center; }
        .claimed-badge-cta { display: inline-flex; align-items: center; gap: 8px; background: var(--accent-green); color: #000; padding: 6px 14px; border-radius: 50px; font-size: 0.75rem; font-weight: 700; margin-bottom: 15px; }
        .claimed-cta-title { font-size: 1.2rem; font-weight: 800; margin-bottom: 10px; }
        .claimed-cta-text { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; max-width: 400px; margin-left: auto; margin-right: auto; }
        .claimed-btn { display: inline-flex; align-items: center; gap: 10px; background: var(--accent-green); color: #000; padding: 16px 32px; border-radius: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.95rem; font-weight: 700; text-decoration: none; transition: all 0.3s; }
        .claimed-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px var(--accent-green-glow); }
        .claimed-note { font-size: 0.75rem; color: var(--text-muted); margin: 12px 0 0 0; }

        @media (max-width: 480px) {
            .verify-input-wrapper { flex-direction: column; }
            .verify-btn { width: 100%; }
            .verified-stats { gap: 10px; }
            .verified-stat-value { font-size: 1rem; }
            .architect-data-grid { gap: 8px; }
            .architect-data-value { font-size: 0.9rem; }
            .footer-links { flex-direction: column; gap: 12px; }
            .recent-item-right { gap: 8px; }
            .recent-item-time { display: none; }
            .explainer { flex-direction: column; gap: 12px; }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>

    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon"><div class="logo-icon-inner"></div></div>
                <span class="logo-text">AUTOPILOT<span>ELITE</span></span>
            </div>
            <h1>Verify Architect Status</h1>
            <p>Check if someone has completed the Autopilot Money System and earned their Wealth Architect certification.</p>
        </div>

        <!-- ARCHITECT ID EXPLAINER -->
        <div class="explainer">
            <div class="explainer-icon">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="16" rx="2"/><line x1="7" y1="8" x2="17" y2="8"/><line x1="7" y1="12" x2="13" y2="12"/><circle cx="16" cy="16" r="2"/></svg>
            </div>
            <div>
                <div class="explainer-title">What is an Architect ID?</div>
                <div class="explainer-text">A unique credential generated when someone completes the Autopilot Money System. It's permanent, non-transferable, and tied to their identity. Think of it like a certification number: it proves they built and activated their automated wealth machine.</div>
            </div>
        </div>

        <div class="verify-card">
            <div class="verify-label">Enter Architect ID</div>
            <div class="verify-input-wrapper">
                <input type="text" id="architectIdInput" class="verify-input" placeholder="KOU-XXXXXX" maxlength="10" autocomplete="off">
                <button id="verifyBtn" class="verify-btn" onclick="verifyArchitect()">Verify</button>
            </div>

            <!-- FAQ ACCORDION -->
            <div class="faq-section" id="faqSection">
                <div class="faq-header">Common Questions</div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">Why is the Architect ID permanent?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">Your Architect ID is generated from your unique email address using a one-way hash. It can't be duplicated, transferred, or re-issued to someone else. It's permanent proof that you completed the system, like a diploma number that's yours forever.</div>
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">Why can anyone verify my ID?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">So you can share your achievement with confidence. When you post your certificate on social media, anyone can confirm it's real by entering your ID here. It builds your credibility, not exposes you. You control when and where you share it.</div>
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">What personal information is shown?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">None. Verification only confirms the ID exists and is active. No name, no email, no financial data, no location. The only thing displayed is the Architect ID itself and its verification status. Privacy is absolute.</div>
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        <span class="faq-question-text">How do I get an Architect ID?</span>
                        <span class="faq-arrow">&#9660;</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-text">Complete the free Autopilot Money System. It takes about 15 minutes. You'll set up automated investing, pick your ETF, and configure your money flow. At the end, your unique Architect ID is generated and your certificate is minted.</div>
                    </div>
                </div>
            </div>

            <div id="processingState" class="processing" style="display: none;">
                <div class="processing-spinner"></div>
                <div class="processing-text" id="processingText">Accessing verification database...</div>
                <div class="processing-steps" id="processingSteps">Validating credentials...</div>
            </div>

            <!-- Result: Verified -->
            <div id="resultVerified" class="result-container">
                <div class="result-verified">
                    <div class="verified-badge">Verified Architect</div>
                    <div class="verified-id" id="verifiedId">KOU-XXXXXX</div>
                    <!-- NEW: Architect name from URL params -->
                    <div class="verified-architect-name" id="verifiedName" style="display:none;"></div>
                    <div class="verified-title">Wealth Architect</div>
                    <div class="verified-subtitle">This person has installed the Autopilot Money System</div>
                    <div class="verified-stats">
                        <div class="verified-stat"><div class="verified-stat-value">&#10003;</div><div class="verified-stat-label">System Active</div></div>
                        <div class="verified-stat"><div class="verified-stat-value" id="verifiedYear">2026</div><div class="verified-stat-label">Since</div></div>
                        <div class="verified-stat"><div class="verified-stat-value">Elite</div><div class="verified-stat-label">Status</div></div>
                    </div>

                    <!-- NEW: Architect data stats from URL params -->
                    <div class="architect-data-section" id="architectDataSection">
                        <div class="architect-data-label">System Configuration</div>
                        <div class="architect-data-grid">
                            <div class="architect-data-card">
                                <div class="architect-data-value" id="dataInvest">$0</div>
                                <div class="architect-data-sublabel">Monthly<br>Auto-Invest</div>
                            </div>
                            <div class="architect-data-card">
                                <div class="architect-data-value" id="dataEtf">--</div>
                                <div class="architect-data-sublabel">Target<br>ETF</div>
                            </div>
                            <div class="architect-data-card">
                                <div class="architect-data-value" id="dataWealth">$0</div>
                                <div class="architect-data-sublabel">30-Year<br>Projection</div>
                            </div>
                        </div>
                        <div class="architect-data-note" id="dataNote"></div>
                    </div>
                </div>

                <!-- NEW: Protocol education (collapsible) -->
                <div class="protocol-section" id="protocolSection">
                    <div class="protocol-header" onclick="toggleProtocol()">
                        <span class="protocol-header-text">What did this person complete?</span>
                        <span class="protocol-arrow" id="protocolArrow">&#9660;</span>
                    </div>
                    <div class="protocol-body">
                        <div class="protocol-body-inner">
                            <div class="protocol-step">
                                <div class="protocol-step-num">1</div>
                                <div class="protocol-step-text"><h4>Income Calibration</h4><p>Calculated real deployable income after all bills and obligations. Not gross income. What's actually left.</p></div>
                            </div>
                            <div class="protocol-step">
                                <div class="protocol-step-num">2</div>
                                <div class="protocol-step-text"><h4>Infrastructure Setup</h4><p>Opened checking, high-yield savings, and investment accounts. Configured automated transfers between them.</p></div>
                            </div>
                            <div class="protocol-step">
                                <div class="protocol-step-num">3</div>
                                <div class="protocol-step-text"><h4>ETF Selection</h4><p>Selected a diversified investment fund matched to their risk tolerance and time horizon.</p></div>
                            </div>
                            <div class="protocol-step">
                                <div class="protocol-step-num">4</div>
                                <div class="protocol-step-text"><h4>Automation Activation</h4><p>Configured auto-invest so wealth builds without manual intervention. Zero willpower required after setup.</p></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NEW: Referral CTA for cold visitors -->
                <div class="referral-cta" id="referralCta">
                    <div class="referral-cta-eyebrow">Their machine is running. Is yours?</div>
                    <div class="referral-cta-title">Build Your Own Autopilot System</div>
                    <div class="referral-cta-text">Same 7-module protocol. Same automation. Takes about 4 minutes. Free. No login.</div>
                    <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="referral-cta-btn">Start Building (Free) &#8594;</a>
                    <div class="referral-cta-note">No credit card. No signup wall. Instant access.</div>
                </div>

                <div class="verified-gift" id="verifiedGift">
                    <div class="gift-header">
                        <div class="gift-icon">
                            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                        </div>
                        <div>
                            <h3 class="gift-title">Command Center Unlocked</h3>
                            <p class="gift-subtitle">Track your wealth-building progress</p>
                        </div>
                    </div>
                    <div class="gift-card">
                        <div class="gift-card-badge">ACCESS GRANTED</div>
                        <h4 class="gift-card-title">Your Financial Command Center</h4>
                        <p class="gift-card-desc">The central hub to track all 7 wealth-building systems.</p>
                        <ul class="gift-card-list">
                            <li><span class="gift-list-marker">[+]</span> Track all 7 systems in one place</li>
                            <li><span class="gift-list-marker">[+]</span> Bronze, Silver, Gold, Elite levels</li>
                            <li><span class="gift-list-marker">[+]</span> Unlock premium tools as you progress</li>
                            <li><span class="gift-list-marker">[+]</span> See your wealth projections</li>
                        </ul>
                        <a href="https://spacekou5-oss.github.io/cashvault-funnel/command-center.html" class="gift-claim-btn" id="giftClaimBtn">Open My Command Center &#8594;</a>
                        <p class="gift-note">*Your Architect ID is already linked</p>
                    </div>
                </div>
            </div>

            <!-- Result: Not Found -->
            <div id="resultNotFound" class="result-container">
                <div class="result-notfound">
                    <div class="notfound-icon">[?]</div>
                    <div class="notfound-title">Architect ID Not Recognized</div>
                    <div class="notfound-text">This ID doesn't match our records. The person may not have completed the Autopilot System yet.</div>
                </div>
                <div class="notfound-cta">
                    <div class="urgency-badge"><span style="font-weight:800; font-family:'JetBrains Mono',monospace;">&gt;</span><span>Don't have an Architect ID yet?</span></div>
                    <h3 class="urgency-title">You're Missing Out on the Machine</h3>
                    <p class="urgency-text">While you're reading this, verified architects have their wealth growing on autopilot.</p>
                    <div class="urgency-stats">
                        <div class="urgency-stat"><div class="urgency-stat-value" id="urgencyCount">14,847</div><div class="urgency-stat-label">Already Verified</div></div>
                        <div class="urgency-stat"><div class="urgency-stat-value">$0</div><div class="urgency-stat-label">Cost to Start</div></div>
                        <div class="urgency-stat"><div class="urgency-stat-value">15 min</div><div class="urgency-stat-label">To Install</div></div>
                    </div>
                    <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="urgency-btn">Get My Architect ID Now</a>
                    <p class="urgency-note">Free. No credit card. Instant access.</p>
                </div>
            </div>

            <!-- Result: Claimed -->
            <div id="resultClaimed" class="result-container">
                <div class="result-claimed">
                    <div class="claimed-icon">[X]</div>
                    <div class="claimed-title">This Architect Is Already Active</div>
                    <div class="claimed-id" id="claimedAttemptedId">KOU-XXXXXX</div>
                    <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin:20px 0; padding:16px; background:rgba(0,0,0,0.3); border-radius:10px; border:1px solid var(--border);">
                        <div style="text-align:center;"><div style="font-family:'JetBrains Mono',monospace; font-size:1.1rem; font-weight:800; color:var(--accent-green);">&#10003;</div><div style="font-size:0.6rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.08em; margin-top:4px;">System Live</div></div>
                        <div style="text-align:center;"><div style="font-family:'JetBrains Mono',monospace; font-size:1.1rem; font-weight:800; color:var(--accent-green);">Auto</div><div style="font-size:0.6rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.08em; margin-top:4px;">Investing</div></div>
                        <div style="text-align:center;"><div style="font-family:'JetBrains Mono',monospace; font-size:1.1rem; font-weight:800; color:var(--accent-green);">Elite</div><div style="font-size:0.6rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.08em; margin-top:4px;">Status</div></div>
                    </div>
                    <div class="claimed-text">This ID is registered to a verified architect whose wealth machine is running right now. <strong>Architect IDs are one-per-person and permanently locked to the original owner.</strong></div>
                </div>
                <div class="claimed-cta">
                    <div class="claimed-badge-cta"><span style="font-weight:800;">&gt;</span><span>Their machine is running. Yours isn't.</span></div>
                    <h3 class="claimed-cta-title">Get Your Own Architect ID</h3>
                    <p class="claimed-cta-text">Every ID is generated from your unique email. No two are the same. No one can take yours once it's minted.</p>
                    <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:20px; padding:14px; background:var(--bg-secondary); border-radius:10px;">
                        <div style="text-align:center;"><div style="font-family:'JetBrains Mono',monospace; font-size:1.1rem; font-weight:800; color:var(--accent-green);" id="claimedCountStat">14,847</div><div style="font-size:0.6rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.05em; margin-top:4px;">Already Claimed</div></div>
                        <div style="text-align:center;"><div style="font-family:'JetBrains Mono',monospace; font-size:1.1rem; font-weight:800; color:var(--accent-green);">$0</div><div style="font-size:0.6rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.05em; margin-top:4px;">Cost</div></div>
                        <div style="text-align:center;"><div style="font-family:'JetBrains Mono',monospace; font-size:1.1rem; font-weight:800; color:var(--accent-green);">15 min</div><div style="font-size:0.6rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.05em; margin-top:4px;">To Install</div></div>
                    </div>
                    <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="claimed-btn">Build My Machine & Mint My ID</a>
                    <p class="claimed-note">Free. Permanent. Non-transferable. Yours forever.</p>
                </div>
            </div>

            <!-- Recent Verifications -->
            <div class="recent-verifications" id="recentVerifications">
                <div class="recent-header">
                    <div class="recent-title-wrapper">
                        <div class="live-dot"></div>
                        <span class="recent-title">Live Verification Feed</span>
                    </div>
                    <span class="recent-count-badge" id="recentCountBadge">Loading...</span>
                </div>
                <div class="recent-list" id="recentList"></div>
            </div>
        </div>

        <div class="cta-section highlight" id="ctaSection">
            <div class="cta-eyebrow">Not an Architect Yet?</div>
            <div class="cta-title">Get Your Own Architect ID</div>
            <div class="cta-text">Install the Autopilot Money System and join thousands who are building wealth on autopilot.</div>
            <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="cta-btn">Install The System</a>
            <a href="https://instagram.com/koutalksmoney" target="_blank" class="cta-btn-secondary">or follow @koutalksmoney for more</a>
            <div class="social-proof"><span class="social-proof-count" id="architectCount">14,847</span><span>architects verified</span></div>
        </div>

        <div class="footer">
            <div class="footer-links">
                <a href="https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html" class="footer-link">Get Your Architect ID</a>
                <a href="https://instagram.com/koutalksmoney" target="_blank" class="footer-link">Instagram</a>
            </div>
            <div class="footer-brand">Built by <a href="https://instagram.com/koutalksmoney" target="_blank">@koutalksmoney</a></div>
        </div>
    </div>

    <script>
        const CONFIG = {
            AUTOPILOT_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html',
            INSTAGRAM: 'https://instagram.com/koutalksmoney',
            VERIFICATION_DELAY: 2500,
            VALID_PREFIX: 'KOU-',
            VALID_ID_LENGTH: 10
        };

        const PROCESSING_STEPS = [
            { text: 'Accessing verification database...', step: 'Connecting to secure server...' },
            { text: 'Validating Architect ID format...', step: 'Checking ID structure...' },
            { text: 'Cross-referencing credentials...', step: 'Matching against records...' },
            { text: 'Retrieving architect data...', step: 'Finalizing verification...' }
        ];

        // === NEW: URL PARAM DATA FOR REFERRAL CONTEXT ===
        // When someone shares their verify link with params like ?id=KOU-ABC123&n=Kou&inv=300&etf=VTI&w=586000
        // we read and display this data in the verified result
        const URL_ARCHITECT_DATA = (function() {
            const p = new URLSearchParams(window.location.search);
            const inv = parseFloat(p.get('inv')) || 0;
            const w = parseFloat(p.get('w')) || (inv > 0 ? calcFutureValue(inv, 30) : 0);
            return {
                name: p.get('n') ? decodeURIComponent(p.get('n')) : null,
                invest: inv,
                etf: p.get('etf') || null,
                wealth: w,
                hasData: inv > 0 || p.get('n') || p.get('etf')
            };
        })();

        function calcFutureValue(monthly, years) {
            var r = 0.10, n = 12;
            return monthly * ((Math.pow(1 + r/n, n * years) - 1) / (r/n));
        }

        // === FAQ TOGGLE ===
        function toggleFaq(item) {
            document.querySelectorAll('.faq-item').forEach(el => {
                if (el !== item) el.classList.remove('open');
            });
            item.classList.toggle('open');
        }

        // === NEW: Protocol section toggle ===
        function toggleProtocol() {
            document.getElementById('protocolSection').classList.toggle('open');
        }

        // === PERSISTENT STORAGE HELPERS ===
        async function getFromSharedStorage(key) {
            try {
                if (window.storage) {
                    const result = await window.storage.get(key, true);
                    return result ? JSON.parse(result.value) : null;
                }
            } catch(e) { /* silent */ }
            return null;
        }

        async function saveToSharedStorage(key, value) {
            try {
                if (window.storage) {
                    await window.storage.set(key, JSON.stringify(value), true);
                    return true;
                }
            } catch(e) { /* silent */ }
            return false;
        }

        window.DISPLAY_IDS = [];
        window.DECOY_IDS = [];

        async function loadRecentVerifications() {
            const recentList = document.getElementById('recentList');
            const countBadge = document.getElementById('recentCountBadge');
            
            const decoys = generateDecoyArchitects();
            
            let realArchitects = [];
            try {
                const sharedData = await getFromSharedStorage('architects-recent');
                if (sharedData && Array.isArray(sharedData)) realArchitects = [...sharedData];
            } catch(e) { /* silent */ }

            const localVerifications = JSON.parse(localStorage.getItem('recent_verifications') || '[]');
            localVerifications.forEach(local => {
                if (!realArchitects.find(a => a.id === local.id)) {
                    realArchitects.push(local);
                }
            });

            realArchitects.sort((a, b) => (b.time || 0) - (a.time || 0));
            
            const realIds = new Set(realArchitects.map(a => a.id));
            const filteredDecoys = decoys.filter(d => !realIds.has(d.id));
            
            const realSlice = realArchitects.slice(0, 3);
            const decoySlice = filteredDecoys.slice(0, 8 - realSlice.length);
            const combined = [...realSlice, ...decoySlice];
            
            window.DISPLAY_IDS = combined.map(a => a.id);
            window.DECOY_IDS = decoys.map(a => a.id);

            recentList.innerHTML = '';
            const totalCount = 14847 + realArchitects.length;
            countBadge.textContent = `${totalCount.toLocaleString()} verified`;

            combined.forEach((architect, i) => {
                const timeAgo = architect.timeText || getTimeAgo(architect.time);
                const initials = architect.id.replace('KOU-', '').slice(0, 2);
                
                const item = document.createElement('div');
                item.className = 'recent-item';
                item.style.animationDelay = `${i * 0.08}s`;
                item.innerHTML = `
                    <div class="recent-item-left">
                        <div class="recent-item-avatar">${initials}</div>
                        <span class="recent-item-id">${architect.id}</span>
                    </div>
                    <div class="recent-item-right">
                        <span class="recent-item-status"><span class="status-dot"></span> Verified</span>
                        <span class="recent-item-time">${timeAgo}</span>
                    </div>
                `;
                recentList.appendChild(item);
            });
        }

        function getTimeAgo(timestamp) {
            if (!timestamp) return 'Recently';
            const diff = Date.now() - timestamp;
            const mins = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            if (mins < 1) return 'Just now';
            if (mins < 60) return `${mins}m ago`;
            if (hours < 24) return `${hours}h ago`;
            if (days < 7) return `${days}d ago`;
            return `${Math.floor(days / 7)}w ago`;
        }

        function generateDecoyArchitects() {
            const sessionSeed = Math.floor(Date.now() / 300000);
            const seededRandom = (seed, index) => {
                const x = Math.sin(seed + index * 9999) * 10000;
                return x - Math.floor(x);
            };
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            function generateSeededId(seed, index) {
                let id = 'KOU-';
                for (let j = 0; j < 6; j++) {
                    const charIndex = Math.floor(seededRandom(seed + index, j) * chars.length);
                    id += chars.charAt(charIndex);
                }
                return id;
            }
            const baseMinutes = [
                Math.floor(seededRandom(sessionSeed, 100) * 3) + 1,
                Math.floor(seededRandom(sessionSeed, 101) * 8) + 4,
                Math.floor(seededRandom(sessionSeed, 102) * 15) + 12,
                Math.floor(seededRandom(sessionSeed, 103) * 30) + 27,
                Math.floor(seededRandom(sessionSeed, 104) * 45) + 58,
                Math.floor(seededRandom(sessionSeed, 105) * 60) + 60,
                Math.floor(seededRandom(sessionSeed, 106) * 90) + 90,
                Math.floor(seededRandom(sessionSeed, 107) * 120) + 120
            ];
            const decoys = [];
            for (let i = 0; i < 8; i++) {
                const id = generateSeededId(sessionSeed, i);
                const mins = baseMinutes[i];
                const timeText = mins < 60 ? `${mins}m ago` : `${Math.floor(mins/60)}h ago`;
                decoys.push({ id, time: Date.now() - (mins * 60000), timeText });
            }
            return decoys;
        }

        function isDisplayedId(id) {
            if (window.DECOY_IDS && window.DECOY_IDS.includes(id)) return true;
            if (window.DISPLAY_IDS && window.DISPLAY_IDS.includes(id)) return true;
            return false;
        }

        function animateCounter() {
            const counter = document.getElementById('architectCount');
            const target = 14847 + Math.floor(Math.random() * 200);
            let current = 14000;
            const increment = Math.ceil((target - current) / 40);
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) { current = target; clearInterval(timer); }
                counter.textContent = current.toLocaleString();
            }, 30);
        }

        document.getElementById('architectIdInput').addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9-]/g, '');
            if (value.length > 0 && !value.startsWith('KOU-') && !value.startsWith('KOU') && !value.startsWith('KO') && !value.startsWith('K')) {
                if (value.length <= 6) value = 'KOU-' + value;
            }
            if (value.length > 4 && value[3] !== '-') value = value.slice(0, 3) + '-' + value.slice(3);
            e.target.value = value.slice(0, 10);
        });

        document.getElementById('architectIdInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') verifyArchitect();
        });

        // === NEW: Populate architect data in verified result ===
        function showArchitectData() {
            const data = URL_ARCHITECT_DATA;
            if (!data.hasData) return;

            // Show name if available
            if (data.name) {
                const nameEl = document.getElementById('verifiedName');
                nameEl.textContent = data.name;
                nameEl.style.display = 'block';
            }

            // Show data stats
            if (data.invest > 0 || data.etf) {
                const section = document.getElementById('architectDataSection');
                section.classList.add('visible');

                if (data.invest > 0) {
                    document.getElementById('dataInvest').textContent = '$' + Math.round(data.invest).toLocaleString();
                }
                if (data.etf) {
                    document.getElementById('dataEtf').textContent = data.etf;
                }
                if (data.wealth > 0) {
                    document.getElementById('dataWealth').textContent = '$' + Math.round(data.wealth).toLocaleString();
                    document.getElementById('dataNote').textContent = 'Based on $' + Math.round(data.invest) + '/mo at ~10% avg annual return (S&P 500 historical average).';
                }
            }

            // Show protocol section (collapsed by default for education)
            document.getElementById('protocolSection').classList.add('visible');

            // Show referral CTA for cold visitors
            // (only show if visitor is NOT the architect themselves)
            const localId = localStorage.getItem('cashvault_architect_id');
            const urlId = new URLSearchParams(window.location.search).get('id');
            if (!localId || localId !== urlId) {
                document.getElementById('referralCta').classList.add('visible');
                // Hide the gift section for non-owners
                document.getElementById('verifiedGift').style.display = 'none';
            }
        }

        // === DETECT IF VISITOR IS THE ARCHITECT (owner vs. stranger) ===
        function isArchitectOwner(verifiedId) {
            const localId = localStorage.getItem('cashvault_architect_id');
            return localId && localId === verifiedId;
        }

        async function verifyArchitect() {
            const input = document.getElementById('architectIdInput');
            const btn = document.getElementById('verifyBtn');
            const processingState = document.getElementById('processingState');
            const processingText = document.getElementById('processingText');
            const processingSteps = document.getElementById('processingSteps');
            const resultVerified = document.getElementById('resultVerified');
            const resultNotFound = document.getElementById('resultNotFound');
            const resultClaimed = document.getElementById('resultClaimed');
            const recentVerifications = document.getElementById('recentVerifications');
            const faqSection = document.getElementById('faqSection');
            
            const architectId = input.value.trim().toUpperCase();
            
            if (!architectId || architectId.length < 10) {
                input.style.borderColor = 'var(--accent-red)';
                input.focus();
                setTimeout(() => { input.style.borderColor = ''; }, 2000);
                return;
            }
            
            resultVerified.classList.remove('show');
            resultNotFound.classList.remove('show');
            resultClaimed.classList.remove('show');
            recentVerifications.style.display = 'none';
            faqSection.style.display = 'none';
            
            processingState.style.display = 'block';
            btn.disabled = true;
            input.disabled = true;
            
            let stepIndex = 0;
            const stepInterval = setInterval(() => {
                if (stepIndex < PROCESSING_STEPS.length) {
                    processingText.textContent = PROCESSING_STEPS[stepIndex].text;
                    processingSteps.textContent = PROCESSING_STEPS[stepIndex].step;
                    stepIndex++;
                }
            }, CONFIG.VERIFICATION_DELAY / PROCESSING_STEPS.length);
            
            let isRealArchitect = false;
            try {
                const architectData = await getFromSharedStorage(`architect-${architectId}`);
                if (architectData) isRealArchitect = true;
            } catch(e) { /* silent */ }

            const localId = localStorage.getItem('cashvault_architect_id');
            if (localId === architectId) isRealArchitect = true;

            setTimeout(() => {
                clearInterval(stepInterval);
                processingState.style.display = 'none';
                btn.disabled = false;
                input.disabled = false;
                
                if (isDisplayedId(architectId) && !isRealArchitect) {
                    showClaimedIdWarning(architectId);
                    recentVerifications.style.display = 'block';
                    return;
                }
                
                const isValidFormat = architectId.startsWith(CONFIG.VALID_PREFIX) && 
                                      architectId.length === CONFIG.VALID_ID_LENGTH &&
                                      /^KOU-[A-Z0-9]{6}$/.test(architectId);
                
                if (isValidFormat) {
                    document.getElementById('verifiedId').textContent = architectId;
                    document.getElementById('verifiedYear').textContent = new Date().getFullYear();
                    resultVerified.classList.add('show');

                    // NEW: Show/hide based on owner vs stranger
                    if (isArchitectOwner(architectId)) {
                        // Owner: show gift, hide referral CTA
                        document.getElementById('verifiedGift').style.display = 'block';
                        document.getElementById('referralCta').classList.remove('visible');
                    } else {
                        // Stranger: show referral CTA, hide gift
                        document.getElementById('referralCta').classList.add('visible');
                        document.getElementById('verifiedGift').style.display = 'none';
                    }

                    // NEW: Always show protocol education and architect data on verification
                    document.getElementById('protocolSection').classList.add('visible');
                    showArchitectData();

                    document.getElementById('ctaSection').style.display = 'none';
                    
                    addToRecentVerifications(architectId);
                    
                    saveToSharedStorage(`architect-${architectId}`, {
                        id: architectId,
                        verifiedAt: new Date().toISOString()
                    });
                    
                    localStorage.setItem('last_verified_id', architectId);
                } else {
                    resultNotFound.classList.add('show');
                }
                
                recentVerifications.style.display = 'block';
                
                setTimeout(() => {
                    const result = isValidFormat ? resultVerified : resultNotFound;
                    result.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
                
            }, CONFIG.VERIFICATION_DELAY);
        }

        function addToRecentVerifications(id) {
            const stored = JSON.parse(localStorage.getItem('recent_verifications') || '[]');
            const filtered = stored.filter(v => v.id !== id);
            filtered.unshift({ id: id, time: Date.now() });
            if (filtered.length > 20) filtered.pop();
            localStorage.setItem('recent_verifications', JSON.stringify(filtered));
            saveArchitectToSharedList(id);
        }

        async function saveArchitectToSharedList(architectId) {
            try {
                if (!window.storage) return;
                let recentList = [];
                try {
                    const existing = await window.storage.get('architects-recent', true);
                    if (existing) recentList = JSON.parse(existing.value);
                } catch(e) { recentList = []; }
                recentList = recentList.filter(a => a.id !== architectId);
                recentList.unshift({ id: architectId, time: Date.now() });
                if (recentList.length > 100) recentList = recentList.slice(0, 100);
                await window.storage.set('architects-recent', JSON.stringify(recentList), true);
            } catch(e) { /* silent */ }
        }

        function showClaimedIdWarning(attemptedId) {
            document.getElementById('resultVerified').classList.remove('show');
            document.getElementById('resultNotFound').classList.remove('show');
            document.getElementById('claimedAttemptedId').textContent = attemptedId;
            document.getElementById('resultClaimed').classList.add('show');
            setTimeout(() => {
                document.getElementById('resultClaimed').scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }

        function checkUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            if (id) {
                const formattedId = id.toUpperCase().trim();
                document.getElementById('architectIdInput').value = formattedId;
                localStorage.setItem('last_verified_id', formattedId);
                setTimeout(() => verifyArchitect(), 500);
            } else {
                const lastId = localStorage.getItem('last_verified_id');
                if (lastId) {
                    document.getElementById('architectIdInput').value = lastId;
                }
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            await loadRecentVerifications();
            animateCounter();
            checkUrlParams();
            
            setInterval(async () => {
                if (document.getElementById('recentVerifications').style.display !== 'none') {
                    await loadRecentVerifications();
                }
            }, 60000);
        });
    </script>
</body>
</html>
