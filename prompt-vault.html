<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Vault | Executive Access</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-primary: #0a0e27;
            --bg-card: #1a1f3a;
            --accent-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --success: #10b981;
            --gold: #fbbf24;
            --danger: #ef4444;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #2a3150;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
        }

        body::before {
            content: ''; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
            z-index: -1; animation: floatGradient 20s ease infinite;
        }
        @keyframes floatGradient {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-20px, -10px); }
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        @media (max-width: 768px) { .container { padding: 20px 16px; } }
        
        h1, h2, h3 { margin: 0; }
        .gradient-text {
            background: linear-gradient(135deg, #f1f5f9 0%, #cbd5e1 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .glass-card {
            background: linear-gradient(135deg, rgba(26, 31, 58, 0.9) 0%, rgba(21, 25, 51, 0.9) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 768px) { .glass-card { padding: 20px 16px; border-radius: 16px; } }

        .input-group { margin-bottom: 0; }
        .input-group label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .premium-input, .premium-textarea {
            width: 100%;
            background: rgba(10, 14, 39, 0.6);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px;
            color: white;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        .premium-input:focus, .premium-textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
        }
        .premium-input.error {
            border-color: var(--danger);
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.2);
        }
        .input-error-text {
            color: var(--danger);
            font-size: 0.7rem;
            margin-top: 4px;
            display: none;
        }
        .input-error-text.show { display: block; }

        .btn-primary {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
            font-size: 0.9rem;
        }
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5);
        }
        .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }

        .nav-pill {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            font-weight: 600;
            white-space: nowrap;
            position: relative;
        }
        .nav-pill.active {
            background: var(--accent-gradient);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }
        .nav-pill.completed {
            border-color: var(--success);
        }
        .nav-pill.completed::after {
            content: '‚úì';
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--success);
            color: white;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            font-size: 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 768px) { .nav-pill { padding: 8px 14px; font-size: 0.75rem; } }

        .sidebar-link {
            display: block;
            width: 100%;
            text-align: center;
            padding: 14px;
            border-radius: 12px;
            border: 1px solid var(--border);
            color: #cbd5e1;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            background: rgba(255, 255, 255, 0.02);
        }
        .sidebar-link:hover {
            border-color: var(--accent-primary);
            color: white;
            background: rgba(99, 102, 241, 0.1);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
            transform: translateY(-2px);
        }

        /* === GOAL-GRADIENT PROGRESS BAR === */
        .progress-container {
            background: rgba(10, 14, 39, 0.6);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .progress-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            font-weight: 600;
        }
        .progress-percent {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--accent-primary);
            font-family: 'JetBrains Mono', monospace;
        }
        .progress-bar-track {
            height: 6px;
            background: rgba(99, 102, 241, 0.15);
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 3px;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* === OPERATIONAL TRANSPARENCY PANEL === */
        .transparency-panel {
            background: rgba(10, 14, 39, 0.8);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-top: 16px;
            overflow: hidden;
        }
        .transparency-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            background: rgba(99, 102, 241, 0.05);
            border-bottom: 1px solid var(--border);
        }
        .transparency-header:hover { background: rgba(99, 102, 241, 0.1); }
        .transparency-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent-primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .transparency-toggle {
            color: var(--text-secondary);
            font-size: 0.7rem;
            transition: transform 0.3s;
        }
        .transparency-toggle.open { transform: rotate(180deg); }
        .transparency-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .transparency-content.open { padding: 16px; max-height: 300px; }
        .transparency-step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            opacity: 0.4;
            transition: all 0.3s;
        }
        .transparency-step.active { opacity: 1; }
        .transparency-step.complete { opacity: 0.7; }
        .step-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.65rem;
            font-weight: 700;
            color: var(--text-secondary);
            flex-shrink: 0;
            transition: all 0.3s;
        }
        .transparency-step.active .step-indicator {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.5);
        }
        .transparency-step.complete .step-indicator {
            background: var(--success);
            color: white;
        }
        .step-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        .transparency-step.active .step-text { color: var(--text-primary); }

        /* === OUTPUT BOX === */
        .output-box {
            background: #0f1221;
            border: 1px solid var(--success);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            position: relative;
            animation: peakGlow 0.6s ease-out;
        }
        @keyframes peakGlow {
            0% { box-shadow: 0 0 0 rgba(16, 185, 129, 0); transform: scale(0.98); opacity: 0; }
            50% { box-shadow: 0 0 40px rgba(16, 185, 129, 0.4), 0 0 80px rgba(99, 102, 241, 0.2); }
            100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.15); transform: scale(1); opacity: 1; }
        }
        .output-code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: #e2e8f0;
            white-space: pre-wrap;
            line-height: 1.6;
            word-break: break-word;
        }

        /* === WATERMARK STYLING (STATUS FRICTION) === */
        .watermark-section {
            margin-top: 16px;
            padding: 16px;
            border: 2px dashed var(--danger);
            border-radius: 8px;
            background: rgba(239, 68, 68, 0.1);
            animation: watermarkPulse 2s ease-in-out infinite;
        }
        @keyframes watermarkPulse {
            0%, 100% { border-color: var(--danger); }
            50% { border-color: rgba(239, 68, 68, 0.5); }
        }
        .watermark-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--danger);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .watermark-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--danger);
            margin-top: 12px;
            padding: 10px;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 4px;
            border-left: 3px solid var(--danger);
        }

        /* === LOADING STATE === */
        .loading-container { text-align: center; padding: 30px 20px; }
        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-text {
            font-size: 0.85rem;
            color: var(--accent-primary);
            font-weight: 600;
            margin-bottom: 4px;
        }
        .loading-subtext {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* === MODAL === */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal-overlay.show { display: flex; }
        
        .modal-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(21, 25, 51, 0.95) 100%);
            border: 2px solid var(--accent-primary);
            border-radius: 20px;
            padding: 40px;
            max-width: 450px;
            width: 100%;
            text-align: center;
            animation: modalReveal 0.4s ease;
            box-shadow: 0 0 60px rgba(99, 102, 241, 0.3);
            position: relative;
        }
        @keyframes modalReveal {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .modal-icon { font-size: 3rem; margin-bottom: 20px; }
        .modal-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        .modal-subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        .modal-input {
            width: 100%;
            padding: 16px;
            background: var(--bg-primary);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            text-align: center;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        .modal-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }
        .modal-input.error { border-color: var(--danger); }
        .modal-error {
            color: var(--danger);
            font-size: 0.8rem;
            margin-bottom: 10px;
            display: none;
        }
        .modal-btn {
            width: 100%;
            background: var(--accent-gradient);
            color: white;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .modal-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5);
        }
        .modal-btn:disabled { opacity: 0.7; cursor: not-allowed; }
        .modal-trust {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
        }
        .modal-close:hover { color: white; }

        /* === UNLOCK BANNER (COST OF WAITING) === */
        .unlock-banner {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            flex-wrap: wrap;
        }
        .unlock-banner.unlocked {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(239, 68, 68, 0.1) 100%);
            border-color: var(--danger);
            animation: unlockedPulse 2s ease-in-out infinite;
        }
        @keyframes unlockedPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            50% { box-shadow: 0 0 20px 0 rgba(239, 68, 68, 0.2); }
        }
        .unlock-banner-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .unlock-banner-icon { font-size: 1.5rem; }
        .unlock-banner-text h4 {
            color: var(--danger);
            font-size: 0.9rem;
            font-weight: 700;
            margin: 0 0 4px 0;
        }
        .unlock-banner-text p {
            color: var(--text-secondary);
            font-size: 0.75rem;
            margin: 0;
        }
        .unlock-banner-progress {
            display: flex;
            gap: 8px;
        }
        .unlock-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
            transition: all 0.3s;
        }
        .unlock-dot.complete {
            background: var(--danger);
            box-shadow: 0 0 10px var(--danger);
        }

        /* === BRIDGE CTA === */
        .bridge-cta {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(34, 211, 153, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }
        .bridge-cta h4 {
            color: var(--success);
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .bridge-cta p {
            color: var(--text-secondary);
            font-size: 0.8rem;
            margin-bottom: 15px;
        }
        .bridge-cta-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--success);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s;
        }
        .bridge-cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        /* === GRID LAYOUTS === */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        @media (max-width: 640px) { .grid-2 { grid-template-columns: 1fr; gap: 12px; } }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 24px;
        }
        @media (max-width: 1024px) { .main-grid { grid-template-columns: 1fr; } }

        .space-y-5 > * + * { margin-top: 16px; }
        .space-y-4 > * + * { margin-top: 12px; }
        .space-y-6 > * + * { margin-top: 20px; }

        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .animate-fade-in { animation: fadeIn 0.5s ease forwards; }

        .nav-container {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 12px;
        }
        .module-title { font-size: 1.15rem; font-weight: 700; color: white; }
        .module-tabs { display: flex; gap: 12px; font-size: 0.75rem; }
        .module-tab {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 600;
            padding: 0;
            transition: color 0.2s;
        }
        .module-tab.active { color: var(--accent-primary); }
        .module-tab-divider { color: var(--border); }

        .copy-btn {
            font-size: 0.75rem;
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }
        .copy-btn:hover { border-color: var(--accent-primary); color: white; }
        .copy-btn.copied { background: var(--success); border-color: var(--success); color: white; }

        .save-btn {
            font-size: 0.75rem;
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid var(--gold);
            background: rgba(251, 191, 36, 0.1);
            color: var(--gold);
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            margin-left: 8px;
        }
        .save-btn:hover { background: var(--gold); color: #000; }
        .save-btn.email-cta {
            border-color: var(--accent-primary);
            background: var(--accent-gradient);
            color: white;
            animation: emailPulse 2s ease-in-out infinite;
        }
        @keyframes emailPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(99, 102, 241, 0); }
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            flex-wrap: wrap;
            gap: 8px;
        }
        .output-status {
            color: var(--success);
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .output-status::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .output-scroll {
            max-height: 280px;
            overflow-y: auto;
        }
        .output-scroll::-webkit-scrollbar { width: 6px; }
        .output-scroll::-webkit-scrollbar-track { background: var(--border); border-radius: 3px; }
        .output-scroll::-webkit-scrollbar-thumb { background: var(--accent-primary); border-radius: 3px; }

        .footer {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.7rem;
            margin-top: 40px;
            opacity: 0.6;
        }

        .tip-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            border-color: rgba(99, 102, 241, 0.3);
        }
        .tip-label {
            color: var(--accent-primary);
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 10px;
            letter-spacing: 0.1em;
        }
        .tip-text {
            color: #cbd5e1;
            font-size: 0.85rem;
            line-height: 1.5;
            min-height: 50px;
        }

        .assets-label {
            color: var(--text-secondary);
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 12px;
            letter-spacing: 0.15em;
        }

        .section-divider {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        /* === LOCKED TOOL CARD === */
        .locked-tool {
            background: rgba(239, 68, 68, 0.05);
            border: 1px dashed rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            opacity: 0.7;
            position: relative;
            overflow: hidden;
        }
        .locked-tool::before {
            content: 'üîí';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            opacity: 0.1;
        }
        .locked-tool h4 {
            color: var(--danger);
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .locked-tool p {
            color: var(--text-muted);
            font-size: 0.75rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- CONFIGURATION ---
        const CONFIG = {
            BEEHIIV_MOCK_MODE: true,
            BEEHIIV_FORM_URL: "https://embeds.beehiiv.com/YOUR_EMBED_ID",
            LINKS: {
                COST_OF_WAITING: "https://spacekou5-oss.github.io/cashvault-funnel/cost-of-waiting.html",
                FREEDOM_CALCULATOR: "https://spacekou5-oss.github.io/cashvault-funnel/freedom-calculator.html",
                INVESTMENT_SIMPLIFIER: "https://spacekou5-oss.github.io/cashvault-funnel/Investment-Simplifier.html",
                AUTOPILOT_SYSTEM: "https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html",
                INSTAGRAM: "https://instagram.com/koutalksmoney",
                CHATGPT: "https://chat.openai.com"
            }
        };

        // === THE WATERMARK (STATUS FRICTION PSYCHOLOGY) ===
        const PROMO_FOOTER = `

-------------------
üîí Generated by The Vault (FREE TIER)
‚ö†Ô∏è WATERMARK ATTACHED ‚Äî Remove by verifying email
üìß Get clean version: @koutalksmoney`;

        // --- PROMPT DATABASE ---
        const PROMPTS = {
            RESUME: `You are an executive resume writer who has placed candidates at Fortune 500 companies.
I'm applying for a {role} position at {company}. Here is my current resume:
{resume}

Your task:
1. Rewrite every bullet point using the "Action Verb + Metric + Impact" formula
2. Remove weak words like "responsible for," "helped with," "assisted"
3. Add quantifiable results wherever possible (even if I have to estimate)
4. Optimize for ATS (Applicant Tracking Systems) by including keywords from this job description:
{jobDesc}

Output the new resume in a clean, copyable format.`,

            COLD_EMAIL: `You are a copywriter who specializes in persuasive cold emails that get responses.
I'm applying for {role} at {company}. I don't have connections there, so I need a cover letter that makes them want to meet me.

Here's what you need to know:
- The job description: {jobDesc}
- My top 3 relevant skills/achievements: {skills}
- Why I actually want this job: {reason}

Write a 3-paragraph cover letter that:
1. Opens with a hook (not "I'm excited to apply...")
2. Proves I can solve their problem with a specific example
3. Ends with a confident ask for an interview
Keep it under 200 words. Make it sound like a human, not a robot.`,

            SIDE_HUSTLE: `You are a business strategist who helps people turn their existing skills into income streams.
I want to start a side hustle, but I don't know what I'm good at. Let's reverse-engineer it.

Here are my answers to your audit questions:
1. Friends ask me for help with: {friendsAsk}
2. Tasks easy for me but hard for others: {easyTask}
3. Free time interests: {interests}
4. Recent problem solved: {problemSolved}

Give me 3 side hustle ideas based on my responses. For each idea:
- Name the service
- Define the target customer
- Estimate how much I could charge
- Outline the 3-step plan to get my first client in 30 days.`,

            FIRE_CALC: `You are a financial independence advisor who helps people calculate their freedom number.
Here's my info:
- Current age: {age}
- Desired retirement age: {retireAge}
- Annual expenses (estimate): \${expenses}
- Current invested assets: \${invested}
- Monthly investment amount: \${monthlyInvest}
- Expected return rate: 8%

Calculate:
1. My FIRE number (total needed to live off 4% withdrawal)
2. How long until I hit that number at my current savings rate
3. If I want to retire by {retireAge}, how much do I need to invest monthly?
4. What happens if I increase my income by 20% and invest it all?
Show me the math in simple terms. Give me hope, but be realistic.`
        };

        // --- BRIDGE CTAs BY CATEGORY ---
        const BRIDGE_CTAS = {
            CAREER: {
                title: "üíº Master Your Career Path",
                subtitle: "Now calculate when you'll be financially free from your job",
                link: CONFIG.LINKS.FREEDOM_CALCULATOR,
                btnText: "Calculate Freedom Date ‚Üí"
            },
            VENTURE: {
                title: "üöÄ Automate Your First $500/Month",
                subtitle: "Turn your side hustle income into an automated wealth machine",
                link: CONFIG.LINKS.AUTOPILOT_SYSTEM,
                btnText: "Install Autopilot System ‚Üí"
            },
            WEALTH: {
                title: "üìà Build Your Portfolio",
                subtitle: "Now invest that money with the right ETF allocation",
                link: CONFIG.LINKS.INVESTMENT_SIMPLIFIER,
                btnText: "Design My Portfolio ‚Üí"
            }
        };

        const TIPS = [
            "üí° Pro Tip: Be specific. Vague input = Vague output.",
            "üí° Pro Tip: Treat AI like an intern. Give it examples.",
            "üí° Pro Tip: Chain prompts. Use Output A as Input for Prompt B.",
            "üí° Pro Tip: Use the 'Regenerate' button in ChatGPT if the first draft is weak."
        ];

        const PROCESSING_STEPS = [
            { id: 1, text: "Analyzing your input data..." },
            { id: 2, text: "Matching to optimal prompt structure..." },
            { id: 3, text: "Injecting personalized variables..." },
            { id: 4, text: "Formatting output for ChatGPT..." },
            { id: 5, text: "Finalizing your custom prompt..." }
        ];

        // --- COMPONENTS ---

        function Gatekeeper({ onUnlock }) {
            const [progress, setProgress] = useState(0);

            useEffect(() => {
                const timer = setInterval(() => {
                    setProgress(prev => {
                        if (prev >= 100) {
                            clearInterval(timer);
                            setTimeout(onUnlock, 400);
                            return 100;
                        }
                        return prev + 3;
                    });
                }, 25);
                return () => clearInterval(timer);
            }, []);

            return (
                <div style={{minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', background: '#0a0e27', padding: '20px'}}>
                    <div style={{textAlign: 'center'}}>
                        <h1 className="gradient-text" style={{fontSize: '2rem', fontWeight: 800, marginBottom: '12px'}}>THE VAULT</h1>
                        <p style={{color: '#6366f1', fontSize: '0.7rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.15em', marginBottom: '24px'}}>Premium Access Verification</p>
                        
                        <div style={{width: '240px', height: '4px', background: '#1a1f3a', borderRadius: '2px', overflow: 'hidden', margin: '0 auto'}}>
                            <div style={{
                                height: '100%', 
                                background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)', 
                                transition: 'width 0.1s',
                                width: `${progress}%`
                            }}></div>
                        </div>
                        <p style={{marginTop: '16px', fontSize: '0.7rem', color: '#64748b', fontFamily: "'JetBrains Mono', monospace"}}>{progress}% Complete</p>
                    </div>
                </div>
            );
        }

        // --- WATERMARK REMOVAL MODAL ---
        function SaveModal({ isOpen, onClose, onSave, promptCategory }) {
            const [email, setEmail] = useState('');
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [error, setError] = useState('');

            const handleSubmit = async () => {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    setError('Please enter a valid email address');
                    return;
                }

                setIsSubmitting(true);
                setError('');

                if (CONFIG.BEEHIIV_MOCK_MODE) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                } else {
                    try {
                        await fetch(CONFIG.BEEHIIV_FORM_URL, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                email: email,
                                utm_source: 'prompt_vault',
                                utm_medium: 'watermark_removal',
                                utm_campaign: promptCategory
                            })
                        });
                    } catch (err) {
                        console.error('Beehiiv error:', err);
                    }
                }

                localStorage.setItem('vault_user_email', email);
                localStorage.setItem('vault_email_captured', 'true');
                setIsSubmitting(false);
                onSave(email);
            };

            if (!isOpen) return null;

            return (
                <div className="modal-overlay show">
                    <div className="modal-card">
                        <button className="modal-close" onClick={onClose}>√ó</button>
                        <div className="modal-icon">üîì</div>
                        <h2 className="modal-title">Remove Watermark</h2>
                        <p className="modal-subtitle">
                            <strong style={{color: 'var(--danger)'}}>‚ö†Ô∏è Your prompt has a visible watermark.</strong>
                            <br /><br />
                            Nobody wants to send a resume or cover letter with 
                            <span style={{color: 'var(--danger)'}}> "Generated by AI"</span> at the bottom.
                            <br /><br />
                            Enter your email to get the <strong>clean, professional version</strong>.
                        </p>
                        <input
                            type="email"
                            className={`modal-input ${error ? 'error' : ''}`}
                            placeholder="your@email.com"
                            value={email}
                            onChange={(e) => { setEmail(e.target.value); setError(''); }}
                            disabled={isSubmitting}
                        />
                        <p className="modal-error" style={{ display: error ? 'block' : 'none' }}>{error}</p>
                        <button
                            className="modal-btn"
                            onClick={handleSubmit}
                            disabled={!email || isSubmitting}
                        >
                            {isSubmitting ? (
                                <>
                                    <span className="loading-spinner" style={{ width: '20px', height: '20px', margin: 0 }}></span>
                                    <span>Removing Watermark...</span>
                                </>
                            ) : (
                                '[ Send Me Clean Version ]'
                            )}
                        </button>
                        <div className="modal-trust">
                            <span>üîí Secure</span>
                            <span>‚Ä¢</span>
                            <span>No spam</span>
                            <span>‚Ä¢</span>
                            <span>Instant delivery</span>
                        </div>
                    </div>
                </div>
            );
        }

        // --- COST OF WAITING UNLOCK BANNER (HIGH LEVERAGE) ---
        function UnlockBanner({ categoriesUsed }) {
            const usedCount = Object.values(categoriesUsed).filter(Boolean).length;
            const allUnlocked = usedCount >= 3;

            // Strategic framing: They've planned. Now feel the cost of not acting.
            if (allUnlocked) {
                return (
                    <div className="unlock-banner unlocked">
                        <div className="unlock-banner-content">
                            <div className="unlock-banner-icon">‚ö†Ô∏è</div>
                            <div className="unlock-banner-text">
                                <h4>YOU'VE BUILT THE PLAN. NOW SEE THE COST OF INACTION.</h4>
                                <p>Every day you delay costs you real money. See the math.</p>
                            </div>
                        </div>
                        <a 
                            href={CONFIG.LINKS.COST_OF_WAITING}
                            onClick={() => {
                                // Track that they earned access
                                localStorage.setItem('cost_of_waiting_unlocked_from', 'prompt_vault');
                                localStorage.setItem('prompt_vault_all_categories', 'true');
                            }}
                            style={{
                                background: 'var(--danger)',
                                color: 'white',
                                padding: '12px 24px',
                                borderRadius: '8px',
                                fontSize: '0.85rem',
                                fontWeight: 700,
                                textDecoration: 'none',
                                textTransform: 'uppercase',
                                display: 'inline-flex',
                                alignItems: 'center',
                                gap: '8px',
                                animation: 'emailPulse 2s ease-in-out infinite'
                            }}
                        >
                            üí∏ See My Daily Loss ‚Üí
                        </a>
                    </div>
                );
            }

            return (
                <div className="unlock-banner">
                    <div className="unlock-banner-content">
                        <div className="unlock-banner-icon">üîí</div>
                        <div className="unlock-banner-text">
                            <h4>Unlock: Cost of Waiting Calculator</h4>
                            <p>Complete all 3 categories to see how much each day of delay costs you</p>
                        </div>
                    </div>
                    <div className="unlock-banner-progress">
                        <div className={`unlock-dot ${categoriesUsed.CAREER ? 'complete' : ''}`} title="Career"></div>
                        <div className={`unlock-dot ${categoriesUsed.VENTURE ? 'complete' : ''}`} title="Venture"></div>
                        <div className={`unlock-dot ${categoriesUsed.WEALTH ? 'complete' : ''}`} title="Wealth"></div>
                    </div>
                </div>
            );
        }

        // --- GOAL-GRADIENT PROGRESS BAR ---
        function GoalGradientBar({ fields, requiredFields }) {
            const filledCount = requiredFields.filter(field => fields[field] && fields[field].toString().trim() !== '').length;
            const progress = (filledCount / requiredFields.length) * 100;
            
            return (
                <div className="progress-container">
                    <div className="progress-header">
                        <span className="progress-label">Prompt Readiness</span>
                        <span className="progress-percent">{Math.round(progress)}%</span>
                    </div>
                    <div className="progress-bar-track">
                        <div className="progress-bar-fill" style={{width: `${progress}%`}}></div>
                    </div>
                </div>
            );
        }

        // --- TRANSPARENCY PANEL ---
        function TransparencyPanel({ isProcessing, currentStep, isOpen, onToggle }) {
            return (
                <div className="transparency-panel">
                    <div className="transparency-header" onClick={onToggle}>
                        <span className="transparency-title">
                            <span style={{fontSize: '0.9rem'}}>üîç</span>
                            See What's Happening
                        </span>
                        <span className={`transparency-toggle ${isOpen ? 'open' : ''}`}>‚ñº</span>
                    </div>
                    <div className={`transparency-content ${isOpen ? 'open' : ''}`}>
                        {PROCESSING_STEPS.map((step, index) => (
                            <div 
                                key={step.id} 
                                className={`transparency-step ${
                                    isProcessing && currentStep === index ? 'active' : 
                                    isProcessing && currentStep > index ? 'complete' : 
                                    !isProcessing && currentStep >= PROCESSING_STEPS.length ? 'complete' : ''
                                }`}
                            >
                                <div className="step-indicator">
                                    {(!isProcessing && currentStep >= PROCESSING_STEPS.length) || (isProcessing && currentStep > index) ? '‚úì' : step.id}
                                </div>
                                <span className="step-text">{step.text}</span>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // --- BRIDGE CTA ---
        function BridgeCTA({ category, categoriesUsed }) {
            const allComplete = Object.values(categoriesUsed).filter(Boolean).length >= 3;
            const cta = BRIDGE_CTAS[category];
            
            // If they haven't completed all categories, show locked state
            if (!allComplete) {
                const remaining = 3 - Object.values(categoriesUsed).filter(Boolean).length;
                return (
                    <div className="locked-tool">
                        <h4>üîí Tool Locked</h4>
                        <p>Complete {remaining} more categor{remaining === 1 ? 'y' : 'ies'} to unlock the Cost of Waiting Calculator</p>
                    </div>
                );
            }

            // After all complete, show the FEAR CTA
            return (
                <div className="bridge-cta" style={{ 
                    background: 'linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.05) 100%)',
                    borderColor: 'rgba(239, 68, 68, 0.4)'
                }}>
                    <h4 style={{ color: 'var(--danger)' }}>‚ö†Ô∏è You've Built the Blueprint</h4>
                    <p>Now see what happens if you don't execute. Every day you wait costs you money.</p>
                    <a 
                        href={CONFIG.LINKS.COST_OF_WAITING}
                        className="bridge-cta-btn"
                        style={{ background: 'var(--danger)' }}
                        onClick={() => {
                            localStorage.setItem('cost_of_waiting_unlocked_from', 'prompt_vault');
                        }}
                    >
                        üí∏ Calculate My Daily Loss ‚Üí
                    </a>
                </div>
            );
        }

        function App() {
            const [locked, setLocked] = useState(true);
            const [activeTab, setActiveTab] = useState('CAREER'); 
            const [currentTip, setCurrentTip] = useState(0);
            const [categoriesUsed, setCategoriesUsed] = useState({ CAREER: false, VENTURE: false, WEALTH: false });
            const [userEmail, setUserEmail] = useState('');
            const [showSaveModal, setShowSaveModal] = useState(false);
            const [pendingSave, setPendingSave] = useState(null);

            useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentTip(prev => (prev + 1) % TIPS.length);
                }, 6000);
                return () => clearInterval(interval);
            }, []);

            // Load saved data
            useEffect(() => {
                const savedEmail = localStorage.getItem('vault_user_email');
                if (savedEmail) setUserEmail(savedEmail);
                
                const savedCategories = localStorage.getItem('prompt_vault_categories_used');
                if (savedCategories) setCategoriesUsed(JSON.parse(savedCategories));
            }, []);

            const handlePromptGenerated = (category) => {
                const newCategoriesUsed = { ...categoriesUsed, [category]: true };
                setCategoriesUsed(newCategoriesUsed);
                localStorage.setItem('prompt_vault_categories_used', JSON.stringify(newCategoriesUsed));
            };

            const handleRequestClean = (prompt, category) => {
                setPendingSave({ prompt, category });
                setShowSaveModal(true);
            };

            const handleEmailSaved = (email) => {
                setUserEmail(email);
                setShowSaveModal(false);
                setPendingSave(null);
            };

            if (locked) return <Gatekeeper onUnlock={() => setLocked(false)} />;

            const totalCategories = Object.values(categoriesUsed).filter(Boolean).length;

            return (
                <div className="container">
                    {/* Save Modal */}
                    <SaveModal 
                        isOpen={showSaveModal}
                        onClose={() => setShowSaveModal(false)}
                        onSave={handleEmailSaved}
                        promptCategory={activeTab}
                    />

                    {/* Header */}
                    <div className="animate-fade-in" style={{textAlign: 'center', marginBottom: '32px'}}>
                        <h1 className="gradient-text" style={{fontSize: '2.25rem', fontWeight: 800, marginBottom: '8px'}}>The Vault</h1>
                        <p style={{color: '#94a3b8', fontSize: '0.95rem'}}>AI Command Console for High Performers</p>
                    </div>

                    {/* COST OF WAITING UNLOCK BANNER */}
                    <UnlockBanner categoriesUsed={categoriesUsed} />

                    <div className="main-grid">
                        
                        {/* Main Content Area */}
                        <div className="space-y-6">
                            
                            {/* Navigation */}
                            <div className="glass-card">
                                <div className="nav-container">
                                    {['CAREER', 'VENTURE', 'WEALTH'].map(tab => (
                                        <button 
                                            key={tab}
                                            onClick={() => setActiveTab(tab)}
                                            className={`nav-pill ${activeTab === tab ? 'active' : ''} ${categoriesUsed[tab] ? 'completed' : ''}`}
                                        >
                                            {tab} OPS
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Modules */}
                            <div className="glass-card animate-fade-in">
                                {activeTab === 'CAREER' && (
                                    <CareerModule 
                                        onGenerated={() => handlePromptGenerated('CAREER')}
                                        onRequestClean={(prompt) => handleRequestClean(prompt, 'CAREER')}
                                        hasEmail={!!userEmail}
                                    />
                                )}
                                {activeTab === 'VENTURE' && (
                                    <VentureModule 
                                        onGenerated={() => handlePromptGenerated('VENTURE')}
                                        onRequestClean={(prompt) => handleRequestClean(prompt, 'VENTURE')}
                                        hasEmail={!!userEmail}
                                    />
                                )}
                                {activeTab === 'WEALTH' && (
                                    <WealthModule 
                                        onGenerated={() => handlePromptGenerated('WEALTH')}
                                        onRequestClean={(prompt) => handleRequestClean(prompt, 'WEALTH')}
                                        hasEmail={!!userEmail}
                                    />
                                )}
                            </div>

                            {/* Bridge CTA - Strategic unlock */}
                            <BridgeCTA category={activeTab} categoriesUsed={categoriesUsed} />
                        </div>

                        {/* Sidebar */}
                        <div className="space-y-6">
                            
                            {/* Tip Card */}
                            <div className="glass-card tip-card">
                                <h3 className="tip-label">Intelligence Feed</h3>
                                <p className="tip-text">{TIPS[currentTip]}</p>
                            </div>

                            {/* Links */}
                            <div className="glass-card">
                                <h3 className="assets-label">External Assets</h3>
                                <div className="space-y-4">
                                    <a href={CONFIG.LINKS.CHATGPT} target="_blank" className="sidebar-link">
                                        Open ChatGPT
                                    </a>
                                    <a href={CONFIG.LINKS.INSTAGRAM} target="_blank" className="sidebar-link">
                                        DM @koutalksmoney
                                    </a>
                                </div>
                            </div>

                            {/* Progress Tracker - Unlock Status */}
                            <div className="glass-card">
                                <h3 className="assets-label">üîì Unlock Progress</h3>
                                <div style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>
                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '12px' }}>
                                        <span>Categories Complete:</span>
                                        <span style={{ color: totalCategories >= 3 ? 'var(--danger)' : 'var(--accent-primary)', fontWeight: 700 }}>
                                            {totalCategories}/3
                                        </span>
                                    </div>
                                    <div style={{ display: 'flex', gap: '8px', marginBottom: '12px' }}>
                                        {['CAREER', 'VENTURE', 'WEALTH'].map(cat => (
                                            <div 
                                                key={cat}
                                                style={{
                                                    flex: 1,
                                                    padding: '8px',
                                                    background: categoriesUsed[cat] ? 'rgba(239, 68, 68, 0.2)' : 'rgba(255,255,255,0.05)',
                                                    border: `1px solid ${categoriesUsed[cat] ? 'var(--danger)' : 'var(--border)'}`,
                                                    borderRadius: '6px',
                                                    textAlign: 'center',
                                                    fontSize: '0.65rem',
                                                    fontWeight: 600,
                                                    color: categoriesUsed[cat] ? 'var(--danger)' : 'var(--text-muted)'
                                                }}
                                            >
                                                {categoriesUsed[cat] ? '‚úì' : ''} {cat}
                                            </div>
                                        ))}
                                    </div>
                                    
                                    {/* Reward Preview */}
                                    <div style={{
                                        background: totalCategories >= 3 ? 'rgba(239, 68, 68, 0.1)' : 'rgba(255,255,255,0.02)',
                                        border: `1px solid ${totalCategories >= 3 ? 'var(--danger)' : 'var(--border)'}`,
                                        borderRadius: '8px',
                                        padding: '12px',
                                        textAlign: 'center'
                                    }}>
                                        <p style={{ 
                                            fontSize: '0.7rem', 
                                            color: totalCategories >= 3 ? 'var(--danger)' : 'var(--text-muted)',
                                            fontWeight: 600,
                                            marginBottom: '4px'
                                        }}>
                                            {totalCategories >= 3 ? 'üîì UNLOCKED' : 'üîí LOCKED'}
                                        </p>
                                        <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)', margin: 0 }}>
                                            Cost of Waiting Calculator
                                        </p>
                                        {totalCategories < 3 && (
                                            <p style={{ fontSize: '0.65rem', color: 'var(--text-muted)', marginTop: '6px' }}>
                                                {3 - totalCategories} more to unlock
                                            </p>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Footer */}
                    <div className="footer">Architecture by Kou</div>
                </div>
            );
        }

        // --- SUB-MODULES ---

        function CareerModule({ onGenerated, onRequestClean, hasEmail }) {
            const [mode, setMode] = useState('RESUME');
            const [inputs, setInputs] = useState({ role: '', company: '', resume: '', jobDesc: '', skills: '', reason: '' });
            
            const requiredFields = mode === 'RESUME' 
                ? ['role', 'company', 'resume', 'jobDesc']
                : ['role', 'company', 'jobDesc', 'skills', 'reason'];
            
            return (
                <div>
                    <div className="module-header">
                        <h2 className="module-title">Career Architect</h2>
                        <div className="module-tabs">
                            <button onClick={() => setMode('RESUME')} className={`module-tab ${mode === 'RESUME' ? 'active' : ''}`}>RESUME</button>
                            <span className="module-tab-divider">|</span>
                            <button onClick={() => setMode('EMAIL')} className={`module-tab ${mode === 'EMAIL' ? 'active' : ''}`}>COLD EMAIL</button>
                        </div>
                    </div>

                    <GoalGradientBar fields={inputs} requiredFields={requiredFields} />

                    <div className="space-y-5">
                        <div className="grid-2">
                            <Input label="Target Role" value={inputs.role} onChange={v => setInputs({...inputs, role: v})} placeholder="e.g. Product Manager" />
                            <Input label="Target Company" value={inputs.company} onChange={v => setInputs({...inputs, company: v})} placeholder="e.g. Google" />
                        </div>
                        
                        {mode === 'RESUME' ? (
                            <>
                                <TextArea label="Paste Old Resume" value={inputs.resume} onChange={v => setInputs({...inputs, resume: v})} placeholder="Paste content here..." />
                                <TextArea label="Job Description" value={inputs.jobDesc} onChange={v => setInputs({...inputs, jobDesc: v})} placeholder="Requirements..." />
                                <Generator 
                                    template={PROMPTS.RESUME} 
                                    data={inputs} 
                                    btnText="Generate Resume Prompt" 
                                    onGenerated={onGenerated}
                                    onRequestClean={onRequestClean}
                                    hasEmail={hasEmail}
                                />
                            </>
                        ) : (
                            <>
                                <TextArea label="Job Description" value={inputs.jobDesc} onChange={v => setInputs({...inputs, jobDesc: v})} placeholder="Requirements..." />
                                <Input label="Top 3 Skills" value={inputs.skills} onChange={v => setInputs({...inputs, skills: v})} placeholder="e.g. SQL, Leadership, Sales" />
                                <Input label="Why This Job?" value={inputs.reason} onChange={v => setInputs({...inputs, reason: v})} placeholder="Authentic reason..." />
                                <Generator 
                                    template={PROMPTS.COLD_EMAIL} 
                                    data={inputs} 
                                    btnText="Generate Email Prompt"
                                    onGenerated={onGenerated}
                                    onRequestClean={onRequestClean}
                                    hasEmail={hasEmail}
                                />
                            </>
                        )}
                    </div>
                </div>
            );
        }

        function VentureModule({ onGenerated, onRequestClean, hasEmail }) {
            const [inputs, setInputs] = useState({ friendsAsk: '', easyTask: '', interests: '', problemSolved: '' });
            const requiredFields = ['friendsAsk', 'easyTask', 'interests', 'problemSolved'];

            return (
                <div>
                    <div className="module-header">
                        <h2 className="module-title">Side Hustle Generator</h2>
                    </div>

                    <GoalGradientBar fields={inputs} requiredFields={requiredFields} />

                    <div className="space-y-5">
                        <Input label="What do friends ask you for?" value={inputs.friendsAsk} onChange={v => setInputs({...inputs, friendsAsk: v})} placeholder="e.g. Travel advice, Excel help" />
                        <Input label="What is easy for you?" value={inputs.easyTask} onChange={v => setInputs({...inputs, easyTask: v})} placeholder="e.g. Organizing files" />
                        <Input label="Free time interests?" value={inputs.interests} onChange={v => setInputs({...inputs, interests: v})} placeholder="e.g. Fitness, Crypto" />
                        <Input label="Recent problem solved?" value={inputs.problemSolved} onChange={v => setInputs({...inputs, problemSolved: v})} placeholder="e.g. Fixed my wifi" />
                        
                        <Generator 
                            template={PROMPTS.SIDE_HUSTLE} 
                            data={inputs} 
                            btnText="Analyze My Market Value"
                            onGenerated={onGenerated}
                            onRequestClean={onRequestClean}
                            hasEmail={hasEmail}
                        />
                    </div>
                </div>
            );
        }

        // === WEALTH MODULE WITH NUMBER-ONLY VALIDATION ===
        function WealthModule({ onGenerated, onRequestClean, hasEmail }) {
            const [inputs, setInputs] = useState({ age: '', retireAge: '40', expenses: '', invested: '0', monthlyInvest: '' });
            const [errors, setErrors] = useState({});
            const requiredFields = ['age', 'retireAge', 'expenses', 'monthlyInvest'];

            const handleNumberInput = (field, value) => {
                const numericValue = value.replace(/[^0-9]/g, '');
                setInputs({ ...inputs, [field]: numericValue });
                if (numericValue !== '') {
                    setErrors(prev => ({ ...prev, [field]: false }));
                }
            };

            const validateAll = () => {
                const newErrors = {};
                requiredFields.forEach(field => {
                    const value = inputs[field];
                    if (value === '' || isNaN(parseInt(value))) {
                        newErrors[field] = true;
                    }
                });
                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };

            return (
                <div>
                    <div className="module-header">
                        <h2 className="module-title">Freedom Calculator (FIRE)</h2>
                    </div>

                    <GoalGradientBar fields={inputs} requiredFields={requiredFields} />

                    <div className="space-y-5">
                        <div className="grid-2">
                            <NumberInput 
                                label="Current Age" 
                                value={inputs.age} 
                                onChange={v => handleNumberInput('age', v)} 
                                placeholder="25" 
                                error={errors.age}
                            />
                            <NumberInput 
                                label="Target Retire Age" 
                                value={inputs.retireAge} 
                                onChange={v => handleNumberInput('retireAge', v)} 
                                placeholder="40" 
                                error={errors.retireAge}
                            />
                        </div>
                        <NumberInput 
                            label="Annual Expenses ($)" 
                            value={inputs.expenses} 
                            onChange={v => handleNumberInput('expenses', v)} 
                            placeholder="50000" 
                            error={errors.expenses}
                        />
                        <div className="grid-2">
                            <NumberInput 
                                label="Invested Assets ($)" 
                                value={inputs.invested} 
                                onChange={v => handleNumberInput('invested', v)} 
                                placeholder="10000" 
                                error={errors.invested}
                            />
                            <NumberInput 
                                label="Monthly Contrib ($)" 
                                value={inputs.monthlyInvest} 
                                onChange={v => handleNumberInput('monthlyInvest', v)} 
                                placeholder="500" 
                                error={errors.monthlyInvest}
                            />
                        </div>

                        <Generator 
                            template={PROMPTS.FIRE_CALC} 
                            data={inputs} 
                            btnText="Calculate My Freedom Date"
                            onGenerated={onGenerated}
                            onRequestClean={onRequestClean}
                            hasEmail={hasEmail}
                            validateBeforeGenerate={validateAll}
                        />
                    </div>
                </div>
            );
        }

        // --- UI COMPONENTS ---

        function Input({ label, value, onChange, placeholder }) {
            return (
                <div className="input-group">
                    <label>{label}</label>
                    <input 
                        type="text" 
                        value={value} 
                        onChange={e => onChange(e.target.value)} 
                        placeholder={placeholder}
                        className="premium-input"
                    />
                </div>
            );
        }

        function NumberInput({ label, value, onChange, placeholder, error }) {
            return (
                <div className="input-group">
                    <label>{label}</label>
                    <input 
                        type="text" 
                        inputMode="numeric"
                        pattern="[0-9]*"
                        value={value} 
                        onChange={e => onChange(e.target.value)} 
                        placeholder={placeholder}
                        className={`premium-input ${error ? 'error' : ''}`}
                    />
                    <p className={`input-error-text ${error ? 'show' : ''}`}>‚ö†Ô∏è Numbers only</p>
                </div>
            );
        }

        function TextArea({ label, value, onChange, placeholder }) {
            return (
                <div className="input-group">
                    <label>{label}</label>
                    <textarea 
                        value={value} 
                        onChange={e => onChange(e.target.value)} 
                        placeholder={placeholder}
                        rows={4}
                        className="premium-textarea"
                    />
                </div>
            );
        }

        // === GENERATOR WITH WATERMARK (STATUS FRICTION) ===
        function Generator({ template, data, btnText, onGenerated, onRequestClean, hasEmail, validateBeforeGenerate }) {
            const [generated, setGenerated] = useState(null);
            const [copied, setCopied] = useState(false);
            const [isProcessing, setIsProcessing] = useState(false);
            const [currentStep, setCurrentStep] = useState(0);
            const [panelOpen, setPanelOpen] = useState(true);

            const handleGenerate = () => {
                if (validateBeforeGenerate && !validateBeforeGenerate()) {
                    return;
                }

                setIsProcessing(true);
                setGenerated(null);
                setCurrentStep(0);
                setPanelOpen(true);

                const stepDuration = 600;
                
                PROCESSING_STEPS.forEach((_, index) => {
                    setTimeout(() => {
                        setCurrentStep(index + 1);
                    }, stepDuration * (index + 1));
                });

                setTimeout(() => {
                    let text = template;
                    Object.keys(data).forEach(key => {
                        const regex = new RegExp(`{${key}}`, 'g');
                        text = text.replace(regex, data[key] || `[INSERT ${key.toUpperCase()}]`);
                    });
                    setGenerated(text);
                    setIsProcessing(false);
                    setCopied(false);
                    onGenerated();
                }, 3000);
            };

            const handleCopy = () => {
                // If no email, copy includes watermark
                const textToCopy = hasEmail ? generated : generated + PROMO_FOOTER;
                navigator.clipboard.writeText(textToCopy);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const handleEmailRequest = () => {
                onRequestClean(generated);
            };

            return (
                <div className="section-divider">
                    <button 
                        onClick={handleGenerate} 
                        className="btn-primary"
                        disabled={isProcessing}
                    >
                        {isProcessing ? 'Processing...' : btnText}
                    </button>

                    {(isProcessing || generated) && (
                        <TransparencyPanel 
                            isProcessing={isProcessing}
                            currentStep={currentStep}
                            isOpen={panelOpen}
                            onToggle={() => setPanelOpen(!panelOpen)}
                        />
                    )}

                    {isProcessing && (
                        <div className="loading-container">
                            <div className="loading-spinner"></div>
                            <div className="loading-text">
                                {PROCESSING_STEPS[Math.min(currentStep, PROCESSING_STEPS.length - 1)]?.text || 'Initializing...'}
                            </div>
                            <div className="loading-subtext">This takes a moment to ensure quality</div>
                        </div>
                    )}

                    {generated && !isProcessing && (
                        <div className="output-box animate-fade-in">
                            <div className="output-header">
                                <span className="output-status">Prompt Generated</span>
                                <div>
                                    <button 
                                        onClick={handleCopy}
                                        className={`copy-btn ${copied ? 'copied' : ''}`}
                                    >
                                        {copied ? "‚úì Copied" : "Copy"}
                                    </button>
                                    <button 
                                        onClick={hasEmail ? handleCopy : handleEmailRequest}
                                        className={`save-btn ${hasEmail ? '' : 'email-cta'}`}
                                    >
                                        {hasEmail ? "üíæ Save Clean" : "üìß Email Me Clean Version"}
                                    </button>
                                </div>
                            </div>
                            <div className="output-scroll">
                                <pre className="output-code">{generated}</pre>
                                
                                {/* === THE WATERMARK (Status Friction) === */}
                                {!hasEmail && (
                                    <div className="watermark-section">
                                        <div className="watermark-badge">
                                            <span>üîí</span>
                                            FREE TIER ‚Äî WATERMARK ATTACHED
                                        </div>
                                        <div className="watermark-text">
                                            -------------------<br/>
                                            üîí Generated by The Vault (FREE TIER)<br/>
                                            ‚ö†Ô∏è WATERMARK ATTACHED ‚Äî Remove by verifying email<br/>
                                            üìß Get clean version: @koutalksmoney
                                        </div>
                                        <p style={{ marginTop: '12px', fontSize: '0.75rem', color: 'var(--text-secondary)' }}>
                                            ‚ö†Ô∏è <strong style={{ color: 'white' }}>This watermark copies with your prompt.</strong><br/>
                                            Nobody wants to send a resume with "Generated by AI" at the bottom.
                                        </p>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
