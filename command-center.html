<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command Center | @koutalksmoney</title>
    
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-primary: #050505;
            --bg-secondary: #0a0a0a;
            --bg-card: #0f0f0f;
            --bg-card-hover: #141414;
            --accent-green: #22c55e;
            --accent-green-dim: rgba(34, 197, 94, 0.15);
            --accent-green-glow: rgba(34, 197, 94, 0.4);
            --accent-gold: #fbbf24;
            --accent-gold-dim: rgba(251, 191, 36, 0.15);
            --accent-gold-glow: rgba(251, 191, 36, 0.4);
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --accent-pink-dim: rgba(236, 72, 153, 0.15);
            --accent-pink-glow: rgba(236, 72, 153, 0.4);
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #52525b;
            --border: #1f1f1f;
            --border-active: #2a2a2a;
            --danger: #ef4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Space Grotesk', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed; inset: 0;
            background-image: 
                linear-gradient(rgba(34, 197, 94, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(34, 197, 94, 0.02) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none; z-index: 0;
        }

        .bg-glow {
            position: fixed; width: 800px; height: 800px; border-radius: 50%;
            filter: blur(200px); opacity: 0.08; pointer-events: none; z-index: 0;
        }
        .bg-glow-1 { top: -400px; left: -200px; background: var(--accent-green); }
        .bg-glow-2 { bottom: -400px; right: -200px; background: var(--accent-gold); opacity: 0.05; }

        .container {
            max-width: 900px; margin: 0 auto; padding: 30px 20px 60px;
            position: relative; z-index: 1;
        }

        /* HEADER */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--border);
        }
        .header-left { display: flex; align-items: center; gap: 15px; }
        .logo {
            font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;
            font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em;
            color: var(--text-secondary);
        }
        .logo span { color: var(--accent-green); }
        .live-indicator {
            display: flex; align-items: center; gap: 6px; padding: 5px 12px;
            background: var(--accent-green-dim); border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 50px; font-size: 0.7rem; font-weight: 600;
            color: var(--accent-green); text-transform: uppercase; letter-spacing: 0.05em;
        }
        .live-dot {
            width: 6px; height: 6px; background: var(--accent-green);
            border-radius: 50%; animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }
        .architect-badge {
            display: flex; align-items: center; gap: 8px; padding: 8px 14px;
            background: var(--bg-card); border: 1px solid var(--border);
            border-radius: 8px; font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem; font-weight: 600; color: var(--accent-gold);
            cursor: pointer; transition: all 0.2s;
        }
        .architect-badge:hover {
            border-color: var(--accent-gold); background: var(--accent-gold-dim);
        }

        /* HERO STATS */
        .hero-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px; }
        .hero-stat {
            background: var(--bg-card); border: 1px solid var(--border);
            border-radius: 16px; padding: 20px 16px; text-align: center;
            position: relative; overflow: hidden; transition: all 0.3s;
        }
        .hero-stat:hover { border-color: var(--border-active); transform: translateY(-2px); }
        .hero-stat.primary {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, var(--bg-card) 100%);
            border-color: rgba(34, 197, 94, 0.3);
        }
        .hero-stat.gold {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, var(--bg-card) 100%);
            border-color: rgba(251, 191, 36, 0.3);
        }
        .hero-stat.clickable { cursor: pointer; }
        .hero-stat-label {
            font-size: 0.65rem; font-weight: 600; text-transform: uppercase;
            letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 6px;
        }
        .hero-stat-value {
            font-family: 'JetBrains Mono', monospace; font-size: 1.5rem;
            font-weight: 800; color: var(--text-primary); line-height: 1;
        }
        .hero-stat.primary .hero-stat-value { color: var(--accent-green); }
        .hero-stat.gold .hero-stat-value { color: var(--accent-gold); }
        .hero-stat-sub { font-size: 0.65rem; color: var(--text-secondary); margin-top: 5px; }
        .hero-stat-cta { font-size: 0.6rem; color: var(--accent-green); margin-top: 3px; }

        /* VELOCITY SECTION */
        .velocity-section {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, var(--bg-card) 100%);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px; padding: 20px; margin-bottom: 25px;
            display: flex; align-items: center; justify-content: space-between;
        }
        .velocity-left { display: flex; align-items: center; gap: 15px; }
        .velocity-icon { font-size: 2rem; }
        .velocity-info h3 { font-size: 0.9rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
        .velocity-info p { font-size: 0.75rem; color: var(--text-secondary); }
        .velocity-score {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem; font-weight: 800; color: var(--accent-purple);
        }

        /* LEVEL SECTION */
        .level-section {
            background: var(--bg-card); border: 1px solid var(--border);
            border-radius: 16px; padding: 20px; margin-bottom: 25px;
        }
        .level-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
        .level-title { font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); }
        .level-badge {
            display: flex; align-items: center; gap: 6px; padding: 5px 12px;
            border-radius: 50px; font-size: 0.7rem; font-weight: 700;
            text-transform: uppercase; letter-spacing: 0.05em;
        }
        .level-badge.bronze { background: linear-gradient(135deg, #92400e, #78350f); color: #fbbf24; }
        .level-badge.silver { background: linear-gradient(135deg, #374151, #1f2937); color: #e5e7eb; }
        .level-badge.gold { background: linear-gradient(135deg, #854d0e, #713f12); color: #fef08a; }
        .level-badge.elite { background: linear-gradient(135deg, #166534, #14532d); color: #86efac; }
        .level-progress { width: 100%; height: 8px; background: var(--bg-secondary); border-radius: 10px; overflow: hidden; margin-bottom: 10px; }
        .level-progress-bar { height: 100%; border-radius: 10px; transition: width 1s ease; }
        .level-progress-bar.bronze { background: linear-gradient(90deg, #92400e, #fbbf24); }
        .level-progress-bar.silver { background: linear-gradient(90deg, #6b7280, #e5e7eb); }
        .level-progress-bar.gold { background: linear-gradient(90deg, #854d0e, #fef08a); }
        .level-progress-bar.elite { background: linear-gradient(90deg, #166534, #22c55e); }
        .level-info { display: flex; justify-content: space-between; font-size: 0.7rem; color: var(--text-muted); }
        .level-info span:last-child { color: var(--accent-green); font-weight: 600; }

        /* SYSTEMS GRID */
        .systems-section { margin-bottom: 25px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
        .section-title { font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); }
        .section-count {
            font-family: 'JetBrains Mono', monospace; font-size: 0.7rem;
            padding: 4px 10px; background: var(--accent-green-dim);
            border-radius: 20px; color: var(--accent-green); font-weight: 600;
        }
        .systems-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        
        /* SYSTEM CARDS */
        .system-card {
            display: flex; align-items: center; gap: 12px; padding: 16px;
            background: var(--bg-card); border: 1px solid var(--border);
            border-radius: 12px; cursor: pointer; transition: all 0.2s; text-decoration: none;
            position: relative; overflow: hidden;
        }
        .system-card:hover { border-color: var(--border-active); background: var(--bg-card-hover); transform: translateX(3px); }
        .system-card.completed { border-color: rgba(34, 197, 94, 0.3); }
        .system-card.completed:hover { border-color: var(--accent-green); }
        
        .system-card.locked { opacity: 0.6; cursor: pointer; border-style: dashed; }
        .system-card.locked:hover { transform: none; background: var(--bg-card); opacity: 0.8; }
        .system-card.locked .system-icon { filter: grayscale(1); }

        /* SOCIAL ACTION CARDS - Special Styling */
        .system-card.social-action {
            position: relative;
        }
        
        .system-card.social-action.dm-unlock {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.08) 0%, var(--bg-card) 100%);
            border-color: rgba(236, 72, 153, 0.3);
            border-style: solid;
        }
        
        .system-card.social-action.dm-unlock:hover {
            border-color: var(--accent-pink);
            box-shadow: 0 0 25px var(--accent-pink-glow);
        }
        
        .system-card.social-action.story-unlock {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, var(--bg-card) 100%);
            border-color: rgba(251, 191, 36, 0.3);
            border-style: solid;
        }
        
        .system-card.social-action.story-unlock:hover {
            border-color: var(--accent-gold);
            box-shadow: 0 0 25px var(--accent-gold-glow);
        }
        
        /* Pulsing animation for social action cards */
        .system-card.social-action.locked::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 14px;
            padding: 2px;
            background: linear-gradient(90deg, transparent, rgba(236, 72, 153, 0.3), transparent);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: social-pulse 2s ease-in-out infinite;
        }
        
        .system-card.social-action.story-unlock.locked::before {
            background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.3), transparent);
        }
        
        @keyframes social-pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        /* Action Badge inside cards */
        .action-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.55rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            animation: badge-pulse 2s ease-in-out infinite;
        }
        
        .action-badge.dm {
            background: var(--accent-pink);
            color: white;
        }
        
        .action-badge.story {
            background: var(--accent-gold);
            color: #000;
        }
        
        @keyframes badge-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .system-icon {
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
            background: var(--bg-secondary); border-radius: 10px; font-size: 1.2rem; flex-shrink: 0;
        }
        .system-card.completed .system-icon { background: var(--accent-green-dim); }
        .system-card.social-action.dm-unlock .system-icon { background: var(--accent-pink-dim); }
        .system-card.social-action.story-unlock .system-icon { background: var(--accent-gold-dim); }
        
        .system-info { flex: 1; min-width: 0; }
        .system-name { font-size: 0.85rem; font-weight: 700; color: var(--text-primary); margin-bottom: 2px; }
        .system-desc { font-size: 0.7rem; color: var(--text-muted); }
        .system-status { font-size: 1.2rem; }

        /* NEXT ACTION */
        .next-action {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, var(--bg-card) 100%);
            border: 2px solid var(--accent-green); border-radius: 16px;
            padding: 22px; margin-bottom: 25px; position: relative; overflow: hidden;
        }
        .next-action::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.05), transparent);
            animation: shimmer 3s infinite;
        }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .next-action-badge {
            display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px;
            background: var(--accent-green); color: #000; border-radius: 50px;
            font-size: 0.6rem; font-weight: 800; text-transform: uppercase;
            letter-spacing: 0.1em; margin-bottom: 12px;
        }
        .next-action-title { font-size: 1.1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; }
        .next-action-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 16px; }
        .next-action-btn {
            display: inline-flex; align-items: center; gap: 10px; padding: 12px 24px;
            background: var(--accent-green); color: #000; border: none; border-radius: 10px;
            font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: 700;
            text-decoration: none; cursor: pointer; transition: all 0.2s; position: relative; z-index: 1;
        }
        .next-action-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px var(--accent-green-glow); }

        /* SHARE SECTION */
        .share-section {
            background: var(--bg-card); border: 1px solid var(--border);
            border-radius: 16px; padding: 20px; text-align: center;
        }
        .share-title { font-size: 0.8rem; font-weight: 700; color: var(--text-secondary); margin-bottom: 5px; }
        .share-subtitle { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 15px; }
        .share-buttons { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .share-btn {
            display: flex; align-items: center; gap: 6px; padding: 10px 16px;
            background: var(--bg-secondary); border: 1px solid var(--border);
            border-radius: 8px; color: var(--text-secondary); font-size: 0.75rem;
            font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none;
        }
        .share-btn:hover { border-color: var(--accent-green); color: var(--accent-green); background: var(--accent-green-dim); }

        /* GENERIC INFO MODAL */
        .info-modal {
            position: fixed; inset: 0; background: rgba(5, 5, 5, 0.95);
            backdrop-filter: blur(10px); z-index: 1000; display: none;
            flex-direction: column; align-items: center; justify-content: center; padding: 20px;
        }
        .info-modal.show { display: flex; }
        .info-modal-card {
            background: var(--bg-card); border: 2px solid var(--accent-green);
            border-radius: 20px; padding: 35px; max-width: 450px; width: 100%; text-align: center;
            animation: modalReveal 0.3s ease; max-height: 90vh; overflow-y: auto;
        }
        @keyframes modalReveal {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .info-modal-card.pink { border-color: var(--accent-pink); }
        .info-modal-card.gold { border-color: var(--accent-gold); }
        
        .info-modal-icon { font-size: 3rem; margin-bottom: 15px; }
        .info-modal-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 8px; }
        .info-modal-subtitle { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 20px; line-height: 1.5; }
        
        .unlock-method {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left;
        }
        .unlock-method-title {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent-green);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .unlock-method-title.pink { color: var(--accent-pink); }
        .unlock-method-title.gold { color: var(--accent-gold); }
        
        .unlock-step {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        .unlock-step:last-child { border-bottom: none; }
        .unlock-step-num {
            width: 22px;
            height: 22px;
            background: var(--accent-green);
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 800;
            flex-shrink: 0;
        }
        .unlock-step-num.pink { background: var(--accent-pink); }
        .unlock-step-num.gold { background: var(--accent-gold); }
        .unlock-step-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        .unlock-step-text strong { color: var(--text-primary); }
        
        .secret-keyword-box {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(139, 92, 246, 0.15));
            border: 2px dashed rgba(236, 72, 153, 0.5);
            border-radius: 12px; padding: 20px; margin-bottom: 20px;
        }
        .secret-keyword-label {
            font-size: 0.65rem; font-weight: 700; text-transform: uppercase;
            letter-spacing: 0.15em; color: var(--accent-pink); margin-bottom: 8px;
        }
        .secret-keyword {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem; font-weight: 800; color: var(--text-primary);
            letter-spacing: 0.1em;
        }
        
        .code-input-group { margin-bottom: 18px; }
        .code-input {
            width: 100%; padding: 14px; background: var(--bg-secondary);
            border: 2px solid var(--border); border-radius: 10px; color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700;
            text-align: center; letter-spacing: 0.15em; text-transform: uppercase;
            transition: border-color 0.2s;
        }
        .code-input:focus { outline: none; border-color: var(--accent-pink); }
        .code-input::placeholder { color: var(--text-muted); letter-spacing: normal; font-size: 0.85rem; }
        .code-error { color: var(--danger); font-size: 0.75rem; margin-top: 6px; display: none; }
        
        .info-modal-btns { display: flex; gap: 10px; flex-direction: column; }
        .info-modal-btn {
            padding: 14px; border-radius: 10px; font-size: 0.9rem; font-weight: 700;
            cursor: pointer; transition: all 0.2s; text-decoration: none;
            display: flex; align-items: center; justify-content: center; gap: 8px; border: none;
        }
        .info-modal-btn.primary {
            background: var(--accent-green); color: #000;
        }
        .info-modal-btn.primary.pink {
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-purple)); color: #fff;
        }
        .info-modal-btn.primary.gold {
            background: linear-gradient(135deg, var(--accent-gold), #f59e0b); color: #000;
        }
        .info-modal-btn.primary:hover {
            transform: translateY(-2px); box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
        }
        .info-modal-btn.secondary {
            background: transparent; color: var(--text-secondary); border: 2px solid var(--border);
        }

        /* DUAL OPTIONS */
        .dual-options { display: flex; gap: 12px; margin-bottom: 18px; }
        .dual-option {
            flex: 1; background: var(--bg-secondary); border: 2px solid var(--border);
            border-radius: 12px; padding: 16px 12px; text-align: center;
            cursor: pointer; transition: all 0.2s;
        }
        .dual-option:hover { border-color: var(--accent-green); }
        .dual-option.selected { border-color: var(--accent-gold); background: rgba(251, 191, 36, 0.1); }
        .dual-option-icon { font-size: 1.5rem; margin-bottom: 8px; }
        .dual-option-title { font-size: 0.8rem; font-weight: 700; color: var(--text-primary); margin-bottom: 3px; }
        .dual-option-desc { font-size: 0.65rem; color: var(--text-muted); }
        
        .dual-section { display: none; }
        .dual-section.show { display: block; }

        /* FOOTER */
        .footer { margin-top: 35px; padding-top: 18px; border-top: 1px solid var(--border); text-align: center; }
        .footer-brand { font-size: 0.7rem; color: var(--text-muted); }
        .footer-brand a { color: var(--accent-green); text-decoration: none; }

        /* ALL COMPLETE */
        .all-complete {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, var(--bg-card) 100%);
            border: 2px solid var(--accent-gold); border-radius: 16px;
            padding: 25px; text-align: center; margin-bottom: 25px;
        }
        .all-complete-icon { font-size: 2.5rem; margin-bottom: 12px; }
        .all-complete-title { font-size: 1.2rem; font-weight: 800; color: var(--accent-gold); margin-bottom: 6px; }
        .all-complete-desc { font-size: 0.85rem; color: var(--text-secondary); }

        /* RESPONSIVE */
        @media (max-width: 700px) {
            .hero-stats { grid-template-columns: 1fr; }
            .systems-grid { grid-template-columns: 1fr; }
            .header { flex-direction: column; gap: 15px; text-align: center; }
            .header-left { flex-direction: column; }
            .share-buttons { flex-direction: column; }
            .share-btn { justify-content: center; }
            .dual-options { flex-direction: column; }
            .velocity-section { flex-direction: column; gap: 15px; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>

    <!-- UNIVERSAL INFO MODAL -->
    <div class="info-modal" id="infoModal">
        <div class="info-modal-card" id="infoModalCard">
            <div class="info-modal-icon" id="infoModalIcon">üîí</div>
            <h2 class="info-modal-title" id="infoModalTitle">System Locked</h2>
            <p class="info-modal-subtitle" id="infoModalSubtitle">Complete the required steps to unlock</p>
            
            <div id="infoModalContent">
                <!-- Dynamic content inserted here -->
            </div>
            
            <div class="info-modal-btns">
                <button class="info-modal-btn primary" id="infoModalPrimaryBtn" onclick="handleInfoModalAction()">
                    Continue
                </button>
                <button class="info-modal-btn secondary" onclick="closeInfoModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- BUDGET CALCULATOR CODE INPUT MODAL -->
    <div class="info-modal" id="budgetCodeModal">
        <div class="info-modal-card pink">
            <div class="info-modal-icon">üîë</div>
            <h2 class="info-modal-title">Enter Unlock Code</h2>
            <p class="info-modal-subtitle">DM the secret keyword to @koutalksmoney to receive your code</p>
            
            <div class="code-input-group">
                <input type="text" id="budgetCodeInput" class="code-input" placeholder="Enter code here" maxlength="12">
                <p class="code-error" id="budgetCodeError">Invalid code. DM "INNERLOOP" to get the correct code.</p>
            </div>
            
            <div class="info-modal-btns">
                <button class="info-modal-btn primary pink" onclick="verifyBudgetCode()">üîì Unlock</button>
                <button class="info-modal-btn secondary" onclick="closeBudgetCodeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- PROMPT VAULT CODE INPUT MODAL -->
    <div class="info-modal" id="vaultCodeModal">
        <div class="info-modal-card gold">
            <div class="info-modal-icon">üîë</div>
            <h2 class="info-modal-title">Enter Vault Code</h2>
            <p class="info-modal-subtitle">Post your Architect Certificate on your Instagram Story, tag @koutalksmoney, and I'll DM you the code!</p>
            
            <div class="code-input-group">
                <input type="text" id="vaultCodeInput" class="code-input" placeholder="Enter code here" maxlength="12">
                <p class="code-error" id="vaultCodeError">Invalid code. Post your certificate to your story and tag me to get the correct code.</p>
            </div>
            
            <div class="info-modal-btns">
                <button class="info-modal-btn primary gold" onclick="verifyVaultCode()">üîì Unlock Vault</button>
                <button class="info-modal-btn secondary" onclick="closeVaultCodeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div class="container" id="mainDashboard">
        <div class="header">
            <div class="header-left">
                <div class="logo">COMMAND <span>CENTER</span></div>
                <div class="live-indicator"><div class="live-dot"></div><span>Live</span></div>
            </div>
            <div class="architect-badge" onclick="copyArchitectId()">
                <span>üèõÔ∏è</span>
                <span id="displayArchitectId">KOU-XXXXXX</span>
            </div>
        </div>

        <div class="hero-stats">
            <div class="hero-stat primary">
                <div class="hero-stat-label">Systems Active</div>
                <div class="hero-stat-value" id="systemsCompleted">0/7</div>
                <div class="hero-stat-sub">Keep building</div>
            </div>
            <div class="hero-stat clickable" id="freedomStat" onclick="goToFreedomCalc()">
                <div class="hero-stat-label">Freedom Year</div>
                <div class="hero-stat-value" id="freedomDate">‚Äî</div>
                <div class="hero-stat-sub" id="freedomSub">Your target</div>
                <div class="hero-stat-cta" id="freedomCta">Calculate ‚Üí</div>
            </div>
            <div class="hero-stat gold">
                <div class="hero-stat-label">Days Building</div>
                <div class="hero-stat-value" id="daysBuilding">1</div>
                <div class="hero-stat-sub">Your streak</div>
            </div>
        </div>

        <div class="velocity-section" id="velocitySection">
            <div class="velocity-left">
                <div class="velocity-icon">‚ö°</div>
                <div class="velocity-info">
                    <h3>Wealth Velocity</h3>
                    <p id="velocityDesc">Complete more systems to accelerate</p>
                </div>
            </div>
            <div class="velocity-score" id="velocityScore">1.0x</div>
        </div>

        <div class="level-section">
            <div class="level-header">
                <span class="level-title">Architect Level</span>
                <span class="level-badge bronze" id="levelBadge"><span>‚≠ê</span><span id="levelName">Bronze</span></span>
            </div>
            <div class="level-progress">
                <div class="level-progress-bar bronze" id="levelProgressBar" style="width: 15%;"></div>
            </div>
            <div class="level-info">
                <span id="levelCurrentXp">0 / 7 systems</span>
                <span id="levelNextReward">3 more ‚Üí Silver</span>
            </div>
        </div>

        <div class="next-action" id="nextAction">
            <div class="next-action-badge"><span>‚ö°</span><span>Next Step</span></div>
            <h3 class="next-action-title" id="nextActionTitle">Start Building</h3>
            <p class="next-action-desc" id="nextActionDesc">Begin with the Autopilot System.</p>
            <a href="#" class="next-action-btn" id="nextActionBtn"><span id="nextActionBtnText">Continue</span><span>‚Üí</span></a>
        </div>

        <div class="all-complete" id="allComplete" style="display: none;">
            <div class="all-complete-icon">üëë</div>
            <h3 class="all-complete-title">ELITE ARCHITECT</h3>
            <p class="all-complete-desc">All systems operational. Maximum velocity achieved.</p>
        </div>

        <div class="systems-section">
            <div class="section-header">
                <span class="section-title">Your Systems</span>
                <span class="section-count" id="systemsCount">0/7</span>
            </div>
            <div class="systems-grid" id="systemsGrid"></div>
        </div>

        <div class="share-section">
            <h3 class="share-title">Share Progress</h3>
            <p class="share-subtitle">Building while they're sleeping</p>
            <div class="share-buttons">
                <a href="#" class="share-btn" onclick="shareToInstagram()"><span>üì∏</span><span>Story</span></a>
                <a href="#" class="share-btn" onclick="shareToTwitter()"><span>ùïè</span><span>Post</span></a>
                <button class="share-btn" onclick="copyShareText()"><span>üìã</span><span>Copy</span></button>
            </div>
        </div>

        <div class="footer">
            <div class="footer-brand">Built by <a href="https://instagram.com/koutalksmoney" target="_blank">@koutalksmoney</a></div>
        </div>
    </div>

    <script>
        const CONFIG = {
            AUTOPILOT_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html',
            FREEDOM_CALCULATOR_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/freedom-calculator.html',
            COST_OF_WAITING_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/cost-of-waiting.html',
            INVESTMENT_SIMPLIFIER_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/Investment-Simplifier.html',
            EIGHT_HUNDRED_CLUB_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/800-club.html',
            BUDGET_CALCULATOR_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/Kous-Budget-Calculator.html',
            PROMPT_VAULT_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/prompt-vault.html',
            COMMAND_CENTER_URL: 'https://spacekou5-oss.github.io/cashvault-funnel/command-center.html',
            INSTAGRAM: 'https://instagram.com/koutalksmoney',
            
            BUDGET_CODE: 'CASHFLOW',
            VAULT_CODE: 'CERTIFIED'
        };

        // === MASTER SYSTEM CONFIGURATION ===
        // The "Wide Net" Strategy: Check explicit flags AND data artifacts
        const SYSTEM_CONFIG = {
            'autopilot': {
                primaryKey: 'autopilot_completed',
                fallbackKey: 'cashvault_architect_id',
                logic: (p, f) => p === 'true' || !!localStorage.getItem(f)
            },
            'freedom': {
                primaryKey: 'freedom_completed',
                fallbackKey: 'freedom_calculator_result',
                logic: (p, f) => p === 'true' || !!localStorage.getItem(f)
            },
            'waiting': {
                primaryKey: 'waiting_completed',
                fallbackKey: 'cost_of_waiting_data',
                logic: (p, f) => p === 'true' || !!localStorage.getItem(f)
            },
            'investment': {
                primaryKey: 'investment_completed',
                fallbackKey: 'investment_simplifier_completed',
                logic: (p, f) => p === 'true' || localStorage.getItem(f) === 'true'
            },
            '800club': {
                primaryKey: 'eightclub_completed',
                fallbackKey: 'credit_protocol_score',
                logic: (p, f) => p === 'true' || parseInt(localStorage.getItem(f) || '0') > 0
            },
            'budget': {
                primaryKey: 'budget_completed',
                fallbackKey: 'budget_unlocked',
                logic: (p, f) => p === 'true' || localStorage.getItem(f) === 'true'
            },
            'prompt': {
                primaryKey: 'prompt_completed',
                fallbackKey: 'vault_saved_prompts',
                logic: (p, f) => {
                    // Advanced Logic: Mark complete only if they are truly engaged
                    const categories = JSON.parse(localStorage.getItem('prompt_vault_categories_used') || '[]');
                    const savedPrompts = JSON.parse(localStorage.getItem(f) || '[]');
                    return p === 'true' || categories.length >= 3 || savedPrompts.length > 0;
                }
            }
        };

        // === ROBUST CHECK FUNCTION ===
        function checkSystemCompletion(systemId) {
            const config = SYSTEM_CONFIG[systemId];
            if (!config) return false;
            
            const primary = localStorage.getItem(config.primaryKey);
            return config.logic(primary, config.fallbackKey);
        }

        // SYSTEMS WITH UNLOCK EXPLANATIONS
        const SYSTEMS = [
            { 
                id: 'autopilot', 
                name: 'Autopilot System', 
                desc: 'Your wealth machine', 
                icon: 'ü§ñ',
                url: CONFIG.AUTOPILOT_URL,
                storageKey: 'autopilot_completed',
                unlockType: 'always',
                priority: 1,
                socialAction: null,
                unlockExplanation: {
                    title: 'Always Available',
                    subtitle: 'This is your entry point. Start here.',
                    steps: ['Click to begin the Autopilot System', 'Complete all 6 modules', 'Claim your unique Architect ID']
                }
            },
            { 
                id: 'freedom', 
                name: 'Freedom Calculator', 
                desc: 'Know your number', 
                icon: 'üéØ',
                url: CONFIG.FREEDOM_CALCULATOR_URL,
                storageKey: 'freedom_completed',
                unlockType: 'completion',
                unlockRequires: 'autopilot',
                priority: 2,
                socialAction: null,
                unlockExplanation: {
                    title: 'Complete Autopilot System',
                    subtitle: "You need to install your core wealth machine first.",
                    steps: ['Open the Autopilot System', 'Complete all 6 modules', 'Claim your Architect ID', 'Freedom Calculator unlocks automatically']
                }
            },
            { 
                id: 'waiting', 
                name: 'Cost of Waiting', 
                desc: 'Urgency multiplier', 
                icon: '‚è∞',
                url: CONFIG.COST_OF_WAITING_URL,
                storageKey: 'waiting_completed',
                unlockType: 'completion',
                unlockRequires: 'freedom',
                priority: 3,
                socialAction: null,
                unlockExplanation: {
                    title: 'Complete Freedom Calculator',
                    subtitle: "Know your target before seeing what delays cost you.",
                    steps: ['Open the Freedom Calculator', 'Enter your financial details', 'Get your Freedom Number', 'Cost of Waiting unlocks automatically']
                }
            },
            { 
                id: 'investment', 
                name: 'Investment Simplifier', 
                desc: 'Portfolio builder', 
                icon: 'üìä',
                url: CONFIG.INVESTMENT_SIMPLIFIER_URL,
                storageKey: 'investment_completed',
                unlockType: 'completion',
                unlockRequires: 'waiting',
                priority: 4,
                socialAction: null,
                unlockExplanation: {
                    title: 'Complete Cost of Waiting',
                    subtitle: "Now that you feel the urgency, learn HOW to invest.",
                    steps: ['Open Cost of Waiting Calculator', 'See what procrastination costs', 'Get motivated to act', 'Investment Simplifier unlocks automatically']
                }
            },
            { 
                id: '800club', 
                name: '800-Club Protocol', 
                desc: 'Credit leverage', 
                icon: 'üí≥',
                url: CONFIG.EIGHT_HUNDRED_CLUB_URL,
                storageKey: 'eightclub_completed',
                unlockType: 'level',
                unlockLevel: 'silver',
                priority: 5,
                socialAction: null,
                unlockExplanation: {
                    title: 'Reach Silver Level',
                    subtitle: "Complete 3 systems to reach Silver and unlock credit mastery.",
                    steps: ['Complete any 3 systems', 'Reach Silver Architect level', '800-Club Protocol unlocks automatically'],
                    showProgress: true
                }
            },
            { 
                id: 'budget', 
                name: 'Budget Calculator', 
                desc: 'Cash flow control', 
                icon: 'üí∞',
                url: CONFIG.BUDGET_CALCULATOR_URL,
                storageKey: 'budget_completed',
                unlockType: 'code',
                unlockKey: 'budget_unlocked',
                priority: 6,
                socialAction: 'dm', // DM to unlock
                unlockExplanation: {
                    title: 'DM Secret Keyword',
                    subtitle: "Get exclusive access by connecting with me directly.",
                    secretKeyword: 'INNERLOOP',
                    steps: ['DM @koutalksmoney on Instagram', 'Send the secret keyword: INNERLOOP', "I'll reply with your unlock code instantly", 'Enter the code to unlock'],
                    hasCodeInput: true
                }
            },
            { 
                id: 'prompt', 
                name: 'Prompt Vault', 
                desc: 'AI arsenal', 
                icon: 'üß†',
                url: CONFIG.PROMPT_VAULT_URL,
                storageKey: 'prompt_completed',
                unlockType: 'dual',
                unlockLevel: 'gold',
                unlockKey: 'vault_unlocked',
                priority: 7,
                socialAction: 'story', // Story post to unlock
                unlockExplanation: {
                    title: 'Two Ways to Unlock',
                    subtitle: "Choose your path to the AI arsenal.",
                    dualOptions: [
                        { 
                            icon: '‚≠ê', 
                            title: 'Reach Gold Level', 
                            desc: 'Complete 5 systems',
                            steps: ['Complete any 5 systems', 'Reach Gold Architect level', 'Prompt Vault unlocks automatically']
                        },
                        { 
                            icon: 'üì∏', 
                            title: 'Post Certificate', 
                            desc: 'Tag me on your story',
                            steps: ['Open Autopilot System', 'Scroll to your Architect Certificate', 'Screenshot the certificate card', '<strong>Post it on your Instagram Story</strong>', '<strong>Tag @koutalksmoney in the story</strong>', "I'll DM you the Vault code!"]
                        }
                    ],
                    hasCodeInput: true
                }
            }
        ];

        let currentArchitectId = '';
        let completedSystems = [];
        let unlockedSystems = ['autopilot'];
        let currentModalSystem = null;

        document.addEventListener('DOMContentLoaded', () => {
            loadArchitectId();
            loadCompletionStatus();
            loadUnlockStatus();
            renderDashboard();
            trackStartDate();
        });

        function loadArchitectId() {
            currentArchitectId = localStorage.getItem('cashvault_architect_id') || 
                                localStorage.getItem('command_center_architect_id') || 
                                'KOU-??????';
        }

        function trackStartDate() {
            if (!localStorage.getItem('architect_start_date')) {
                localStorage.setItem('architect_start_date', new Date().toISOString());
            }
        }

        // === UPDATED LOAD COMPLETION STATUS WITH WIDE NET STRATEGY ===
        function loadCompletionStatus() {
            completedSystems = [];
            
            // Iterate through our defined systems and check status using robust check
            SYSTEMS.forEach(system => {
                if (checkSystemCompletion(system.id)) {
                    completedSystems.push(system.id);
                    // Self-heal: ensure primary key is set if we detected completion via fallback
                    if (localStorage.getItem(system.storageKey) !== 'true') {
                        localStorage.setItem(system.storageKey, 'true');
                    }
                }
            });
            
            // Legacy Fallback: Ensure Autopilot is marked if Architect ID exists (Safety Net)
            if (localStorage.getItem('cashvault_architect_id') && !completedSystems.includes('autopilot')) {
                completedSystems.push('autopilot');
                localStorage.setItem('autopilot_completed', 'true');
            }
        }

        function loadUnlockStatus() {
            unlockedSystems = ['autopilot'];
            
            SYSTEMS.forEach(system => {
                // Completion-based unlock
                if (system.unlockType === 'completion' && system.unlockRequires) {
                    if (completedSystems.includes(system.unlockRequires)) {
                        if (!unlockedSystems.includes(system.id)) unlockedSystems.push(system.id);
                    }
                }
                
                // Level-based unlock
                if (system.unlockType === 'level') {
                    const level = getArchitectLevel();
                    if (system.unlockLevel === 'silver' && ['silver', 'gold', 'elite'].includes(level)) {
                        if (!unlockedSystems.includes(system.id)) unlockedSystems.push(system.id);
                    }
                }

                // Code-based unlock
                if (system.unlockType === 'code' && localStorage.getItem(system.unlockKey) === 'true') {
                    if (!unlockedSystems.includes(system.id)) unlockedSystems.push(system.id);
                }

                // Dual unlock (level OR code)
                if (system.unlockType === 'dual') {
                    const level = getArchitectLevel();
                    const hasCode = localStorage.getItem(system.unlockKey) === 'true';
                    if ((system.unlockLevel === 'gold' && ['gold', 'elite'].includes(level)) || hasCode) {
                        if (!unlockedSystems.includes(system.id)) unlockedSystems.push(system.id);
                    }
                }
            });

            // Ensure completed systems are also unlocked
            completedSystems.forEach(id => {
                if (!unlockedSystems.includes(id)) unlockedSystems.push(id);
            });
        }

        function getArchitectLevel() {
            const count = completedSystems.length;
            if (count >= 7) return 'elite';
            if (count >= 5) return 'gold';
            if (count >= 3) return 'silver';
            return 'bronze';
        }

        function getVelocityScore() {
            const count = completedSystems.length;
            if (count >= 7) return { score: '2.0x', desc: 'Maximum velocity achieved' };
            if (count >= 5) return { score: '1.5x', desc: 'High velocity mode' };
            if (count >= 3) return { score: '1.25x', desc: 'Accelerating' };
            return { score: '1.0x', desc: 'Complete more systems to accelerate' };
        }

        function renderDashboard() {
            document.getElementById('displayArchitectId').textContent = currentArchitectId;
            
            const startDate = localStorage.getItem('architect_start_date');
            if (startDate) {
                const days = Math.max(1, Math.ceil((new Date() - new Date(startDate)) / (1000 * 60 * 60 * 24)));
                document.getElementById('daysBuilding').textContent = days;
            }
            
            const freedomData = localStorage.getItem('freedom_calculator_result');
            if (freedomData) {
                try {
                    const data = JSON.parse(freedomData);
                    if (data.freedomYears) {
                        const freedomYear = new Date().getFullYear() + parseInt(data.freedomYears);
                        document.getElementById('freedomDate').textContent = freedomYear;
                        document.getElementById('freedomSub').textContent = `${data.freedomYears} years`;
                        document.getElementById('freedomCta').style.display = 'none';
                    }
                } catch(e) {}
            }
            
            const velocity = getVelocityScore();
            document.getElementById('velocityScore').textContent = velocity.score;
            document.getElementById('velocityDesc').textContent = velocity.desc;
            
            document.getElementById('systemsCompleted').textContent = `${completedSystems.length}/7`;
            document.getElementById('systemsCount').textContent = `${completedSystems.length}/7`;
            
            renderSystemsGrid();
            updateArchitectLevel();
            updateNextAction();
        }

        function goToFreedomCalc() {
            if (unlockedSystems.includes('freedom')) {
                window.location.href = CONFIG.FREEDOM_CALCULATOR_URL;
            } else {
                const freedomSystem = SYSTEMS.find(s => s.id === 'freedom');
                showInfoModal(freedomSystem);
            }
        }

        function renderSystemsGrid() {
            const grid = document.getElementById('systemsGrid');
            grid.innerHTML = '';

            SYSTEMS.forEach(system => {
                const isCompleted = completedSystems.includes(system.id);
                const isUnlocked = unlockedSystems.includes(system.id);
                const isSocialAction = system.socialAction && !isUnlocked && !isCompleted;
                
                const card = document.createElement('div');
                
                // Build class list
                let classNames = ['system-card'];
                if (isCompleted) classNames.push('completed');
                if (!isUnlocked) classNames.push('locked');
                
                // Add social action styling for locked social apps
                if (isSocialAction) {
                    classNames.push('social-action');
                    if (system.socialAction === 'dm') classNames.push('dm-unlock');
                    if (system.socialAction === 'story') classNames.push('story-unlock');
                }
                
                card.className = classNames.join(' ');
                
                // Build action badge HTML
                let actionBadgeHtml = '';
                if (isSocialAction) {
                    if (system.socialAction === 'dm') {
                        actionBadgeHtml = '<span class="action-badge dm">üóùÔ∏è DM to Unlock</span>';
                    } else if (system.socialAction === 'story') {
                        actionBadgeHtml = '<span class="action-badge story">üì∏ Story to Unlock</span>';
                    }
                }
                
                card.innerHTML = `
                    ${actionBadgeHtml}
                    <div class="system-icon">${system.icon}</div>
                    <div class="system-info">
                        <div class="system-name">${system.name}</div>
                        <div class="system-desc">${system.desc}</div>
                    </div>
                    <div class="system-status">${isCompleted ? '‚úÖ' : (isUnlocked ? '‚óã' : 'üîí')}</div>
                `;

                if (isUnlocked) {
                    card.onclick = () => window.location.href = system.url;
                } else {
                    card.onclick = () => showInfoModal(system);
                }

                grid.appendChild(card);
            });
        }

        // UNIVERSAL INFO MODAL
        function showInfoModal(system) {
            currentModalSystem = system;
            const modal = document.getElementById('infoModal');
            const card = document.getElementById('infoModalCard');
            const icon = document.getElementById('infoModalIcon');
            const title = document.getElementById('infoModalTitle');
            const subtitle = document.getElementById('infoModalSubtitle');
            const content = document.getElementById('infoModalContent');
            const primaryBtn = document.getElementById('infoModalPrimaryBtn');
            
            const exp = system.unlockExplanation;
            
            // Set modal style based on type
            card.className = 'info-modal-card';
            if (system.unlockType === 'code' || system.socialAction === 'dm') card.classList.add('pink');
            if (system.unlockType === 'dual' || system.socialAction === 'story') card.classList.add('gold');
            
            icon.textContent = system.icon;
            title.textContent = `Unlock ${system.name}`;
            subtitle.textContent = exp.subtitle;
            
            let contentHtml = '';
            
            // Dual options (Prompt Vault)
            if (exp.dualOptions) {
                contentHtml += '<div class="dual-options">';
                exp.dualOptions.forEach((opt, i) => {
                    contentHtml += `
                        <div class="dual-option" onclick="selectDualOption(${i})">
                            <div class="dual-option-icon">${opt.icon}</div>
                            <div class="dual-option-title">${opt.title}</div>
                            <div class="dual-option-desc">${opt.desc}</div>
                        </div>
                    `;
                });
                contentHtml += '</div>';
                
                exp.dualOptions.forEach((opt, i) => {
                    const stepColor = i === 0 ? 'gold' : 'pink';
                    contentHtml += `<div class="dual-section" id="dualSection${i}">`;
                    contentHtml += `<div class="unlock-method"><div class="unlock-method-title ${stepColor}">${opt.title}</div>`;
                    opt.steps.forEach((step, j) => {
                        contentHtml += `
                            <div class="unlock-step">
                                <span class="unlock-step-num ${stepColor}">${j + 1}</span>
                                <span class="unlock-step-text">${step}</span>
                            </div>
                        `;
                    });
                    contentHtml += '</div>';
                    
                    // Show progress for level option
                    if (i === 0) {
                        contentHtml += `<p style="text-align:center;color:var(--accent-gold);font-weight:700;margin-bottom:15px;">Your progress: ${completedSystems.length}/5 systems</p>`;
                    }
                    
                    // Show code input for certificate option
                    if (i === 1) {
                        contentHtml += `<p style="text-align:center;margin-top:15px;"><button class="info-modal-btn primary gold" style="width:100%;" onclick="showVaultCodeModal()">I Have My Code ‚Üí</button></p>`;
                    }
                    
                    contentHtml += '</div>';
                });
                
                primaryBtn.style.display = 'none';
            }
            // Secret keyword (Budget Calculator)
            else if (exp.secretKeyword) {
                contentHtml += `
                    <div class="secret-keyword-box">
                        <div class="secret-keyword-label">ü§´ Secret Keyword</div>
                        <div class="secret-keyword">${exp.secretKeyword}</div>
                    </div>
                `;
                
                contentHtml += `<div class="unlock-method"><div class="unlock-method-title pink">How to Unlock</div>`;
                exp.steps.forEach((step, i) => {
                    contentHtml += `
                        <div class="unlock-step">
                            <span class="unlock-step-num pink">${i + 1}</span>
                            <span class="unlock-step-text">${step}</span>
                        </div>
                    `;
                });
                contentHtml += '</div>';
                
                primaryBtn.textContent = 'üîë I Have My Code';
                primaryBtn.className = 'info-modal-btn primary pink';
                primaryBtn.style.display = 'flex';
            }
            // Regular completion unlock
            else {
                const stepColor = system.unlockType === 'level' ? 'gold' : '';
                contentHtml += `<div class="unlock-method"><div class="unlock-method-title ${stepColor}">${exp.title}</div>`;
                exp.steps.forEach((step, i) => {
                    contentHtml += `
                        <div class="unlock-step">
                            <span class="unlock-step-num ${stepColor}">${i + 1}</span>
                            <span class="unlock-step-text">${step}</span>
                        </div>
                    `;
                });
                contentHtml += '</div>';
                
                // Show progress for level-based
                if (exp.showProgress) {
                    const needed = system.unlockLevel === 'silver' ? 3 : 5;
                    contentHtml += `<p style="text-align:center;color:var(--accent-gold);font-weight:700;">Your progress: ${completedSystems.length}/${needed} systems</p>`;
                }
                
                // Set primary button
                if (system.unlockType === 'completion' && system.unlockRequires) {
                    const reqSystem = SYSTEMS.find(s => s.id === system.unlockRequires);
                    primaryBtn.textContent = `Open ${reqSystem.name} ‚Üí`;
                    primaryBtn.className = 'info-modal-btn primary';
                    primaryBtn.style.display = 'flex';
                } else if (system.unlockType === 'level') {
                    primaryBtn.textContent = 'Keep Building ‚Üí';
                    primaryBtn.className = 'info-modal-btn primary gold';
                    primaryBtn.style.display = 'flex';
                } else {
                    primaryBtn.style.display = 'none';
                }
            }
            
            content.innerHTML = contentHtml;
            modal.classList.add('show');
        }

        function closeInfoModal() {
            document.getElementById('infoModal').classList.remove('show');
            currentModalSystem = null;
        }

        function handleInfoModalAction() {
            if (!currentModalSystem) return;
            
            if (currentModalSystem.unlockType === 'code') {
                closeInfoModal();
                showBudgetCodeModal();
            } else if (currentModalSystem.unlockType === 'completion' && currentModalSystem.unlockRequires) {
                const reqSystem = SYSTEMS.find(s => s.id === currentModalSystem.unlockRequires);
                window.location.href = reqSystem.url;
            } else {
                closeInfoModal();
            }
        }

        function selectDualOption(index) {
            document.querySelectorAll('.dual-option').forEach((el, i) => {
                el.classList.toggle('selected', i === index);
            });
            document.querySelectorAll('.dual-section').forEach((el, i) => {
                el.classList.toggle('show', i === index);
            });
        }

        // BUDGET CODE MODAL
        function showBudgetCodeModal() {
            document.getElementById('budgetCodeInput').value = '';
            document.getElementById('budgetCodeError').style.display = 'none';
            document.getElementById('budgetCodeModal').classList.add('show');
        }

        function closeBudgetCodeModal() {
            document.getElementById('budgetCodeModal').classList.remove('show');
        }

        function verifyBudgetCode() {
            const input = document.getElementById('budgetCodeInput');
            const error = document.getElementById('budgetCodeError');
            const code = input.value.trim().toUpperCase();
            
            if (code === CONFIG.BUDGET_CODE) {
                localStorage.setItem('budget_unlocked', 'true');
                closeBudgetCodeModal();
                loadUnlockStatus();
                renderDashboard();
                alert('üéâ Budget Calculator Unlocked!\n\nCash flow control activated.');
            } else {
                error.style.display = 'block';
                input.style.borderColor = 'var(--danger)';
            }
        }

        // VAULT CODE MODAL
        function showVaultCodeModal() {
            closeInfoModal();
            document.getElementById('vaultCodeInput').value = '';
            document.getElementById('vaultCodeError').style.display = 'none';
            document.getElementById('vaultCodeModal').classList.add('show');
        }

        function closeVaultCodeModal() {
            document.getElementById('vaultCodeModal').classList.remove('show');
        }

        function verifyVaultCode() {
            const input = document.getElementById('vaultCodeInput');
            const error = document.getElementById('vaultCodeError');
            const code = input.value.trim().toUpperCase();
            
            if (code === CONFIG.VAULT_CODE) {
                localStorage.setItem('vault_unlocked', 'true');
                closeVaultCodeModal();
                loadUnlockStatus();
                renderDashboard();
                alert('üéâ Prompt Vault Unlocked!\n\nAI arsenal activated.');
            } else {
                error.style.display = 'block';
                input.style.borderColor = 'var(--danger)';
            }
        }

        function updateArchitectLevel() {
            const count = completedSystems.length;
            const badge = document.getElementById('levelBadge');
            const name = document.getElementById('levelName');
            const bar = document.getElementById('levelProgressBar');
            const current = document.getElementById('levelCurrentXp');
            const next = document.getElementById('levelNextReward');
            let level, progress, nextReward;
            
            if (count >= 7) { 
                level = 'elite'; progress = 100; nextReward = 'Max level üëë'; 
                document.getElementById('nextAction').style.display = 'none'; 
                document.getElementById('allComplete').style.display = 'block'; 
            }
            else if (count >= 5) { level = 'gold'; progress = 70 + ((count - 5) / 2) * 30; nextReward = `${7 - count} more ‚Üí Elite`; }
            else if (count >= 3) { level = 'silver'; progress = 40 + ((count - 3) / 2) * 30; nextReward = `${5 - count} more ‚Üí Gold`; }
            else { level = 'bronze'; progress = 15 + (count / 3) * 25; nextReward = `${3 - count} more ‚Üí Silver`; }
            
            badge.className = `level-badge ${level}`;
            name.textContent = level.charAt(0).toUpperCase() + level.slice(1);
            bar.className = `level-progress-bar ${level}`;
            bar.style.width = `${progress}%`;
            current.textContent = `${count} / 7 systems`;
            next.textContent = nextReward;
        }

        function updateNextAction() {
            const title = document.getElementById('nextActionTitle');
            const desc = document.getElementById('nextActionDesc');
            const btn = document.getElementById('nextActionBtn');
            const btnText = document.getElementById('nextActionBtnText');

            const nextSystem = SYSTEMS
                .filter(s => !completedSystems.includes(s.id) && unlockedSystems.includes(s.id))
                .sort((a, b) => a.priority - b.priority)[0];

            if (nextSystem) {
                const messages = {
                    autopilot: { title: 'Install Autopilot System', desc: 'Your core wealth machine. Everything builds on this.' },
                    freedom: { title: 'Calculate Freedom Number', desc: "Can't hit a target you can't see." },
                    waiting: { title: 'See What Waiting Costs', desc: 'Every day you delay costs you money.' },
                    investment: { title: 'Build Your Portfolio', desc: 'Turn deposits into a growing wealth engine.' },
                    '800club': { title: 'Hit 800 Credit Score', desc: 'Credit is leverage. Follow the protocol.' },
                    budget: { title: 'Map Cash Flow', desc: 'Know where every dollar goes.' },
                    prompt: { title: 'Unlock AI Vault', desc: 'Pre-built prompts for acceleration.' }
                };
                const msg = messages[nextSystem.id];
                title.textContent = msg.title;
                desc.textContent = msg.desc;
                btn.href = nextSystem.url;
                btn.onclick = null;
                btnText.textContent = `Open ${nextSystem.name.split(' ')[0]}`;
            }
        }

        function copyArchitectId() {
            navigator.clipboard.writeText(currentArchitectId);
            const badge = document.querySelector('.architect-badge');
            const original = badge.innerHTML;
            badge.innerHTML = '<span>‚úì Copied!</span>';
            setTimeout(() => badge.innerHTML = original, 1500);
        }

        function shareToInstagram() { 
            alert('Screenshot your Command Center!\n\nTag @koutalksmoney to show your progress.'); 
        }

        function shareToTwitter() {
            const text = encodeURIComponent(`${completedSystems.length}/7 wealth systems active ‚ö°\n\nArchitect ID: ${currentArchitectId}\n\n@koutalksmoney`);
            window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
        }

        function copyShareText() {
            const text = `${completedSystems.length}/7 wealth systems active ‚ö°\n\nArchitect ID: ${currentArchitectId}\n\nBuilding the machine.\n\n@koutalksmoney`;
            navigator.clipboard.writeText(text);
            alert('Caption copied!');
        }
    </script>
</body>
</html>
