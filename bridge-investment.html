<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Unlocked | @koutalksmoney</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #111936;
            --bg-card: #1a1f3a;
            --bg-card-hover: #242b4d;
            --accent-indigo: #6366f1;
            --accent-indigo-glow: rgba(99,102,241,0.3);
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-green-glow: rgba(16,185,129,0.2);
            --accent-amber: #f59e0b;
            --accent-red: #ef4444;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --border-accent: rgba(99,102,241,0.3);
        }

        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; line-height: 1.6; }

        .bg-grid {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-image: linear-gradient(rgba(99,102,241,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(99,102,241,0.03) 1px, transparent 1px);
            background-size: 50px 50px; pointer-events: none; z-index: 0;
        }

        .container { position: relative; z-index: 1; max-width: 800px; margin: 0 auto; padding: 40px 20px; }

        /* Success Header */
        .success-header { text-align: center; margin-bottom: 40px; animation: fadeInUp 0.6s ease-out; }
        .success-icon {
            width: 80px; height: 80px; background: linear-gradient(135deg, var(--accent-green), #059669);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            margin: 0 auto 24px; box-shadow: 0 0 40px var(--accent-green-glow); animation: pulse 2s ease-in-out infinite;
        }
        .success-icon svg { width: 40px; height: 40px; color: white; }
        .success-header h1 { font-size: 2rem; font-weight: 800; margin-bottom: 8px; background: linear-gradient(135deg, var(--text-primary), var(--accent-green)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .success-header p { color: var(--text-secondary); font-size: 1.1rem; }

        .reinforcement {
            text-align: center; margin-top: 16px; padding: 12px 20px;
            background: rgba(16,185,129,0.08); border: 1px solid rgba(16,185,129,0.2);
            border-radius: 10px; animation: fadeInUp 0.8s ease-out 0.3s backwards;
        }
        .reinforcement p { font-size: 0.9rem; color: var(--accent-green); font-weight: 600; }
        .reinforcement .subtext { font-size: 0.8rem; color: var(--text-muted); font-weight: 400; margin-top: 4px; }

        /* Portfolio Card */
        .portfolio-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 32px; margin-bottom: 24px; animation: fadeInUp 0.6s ease-out 0.1s backwards; }
        .portfolio-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid var(--border-subtle); }
        .portfolio-meta { display: flex; gap: 16px; align-items: center; flex-wrap: wrap; }
        .meta-badge { display: flex; align-items: center; gap: 6px; padding: 6px 12px; background: var(--bg-secondary); border-radius: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .meta-badge.style { background: linear-gradient(135deg, var(--accent-indigo), var(--accent-purple)); color: white; font-weight: 600; }
        .portfolio-id { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text-muted); }

        /* Allocation Display */
        .allocation-display { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }
        .allocation-box { background: var(--bg-secondary); border-radius: 12px; padding: 20px; text-align: center; border: 1px solid var(--border-subtle); }
        .allocation-box.stocks { border-color: var(--accent-green); box-shadow: 0 0 20px rgba(16,185,129,0.1); }
        .allocation-box.bonds { border-color: var(--accent-indigo); box-shadow: 0 0 20px var(--accent-indigo-glow); }
        .allocation-label { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        .allocation-value { font-size: 2.5rem; font-weight: 800; }
        .allocation-box.stocks .allocation-value { color: var(--accent-green); }
        .allocation-box.bonds .allocation-value { color: var(--accent-indigo); }

        /* Strategy Explainer */
        .strategy-explainer {
            background: linear-gradient(135deg, rgba(99,102,241,0.08) 0%, rgba(139,92,246,0.04) 100%);
            border: 1px solid rgba(99,102,241,0.2); border-radius: 12px;
            padding: 20px; margin-bottom: 24px; animation: fadeInUp 0.6s ease-out 0.12s backwards;
        }
        .strategy-explainer h3 { font-size: 1rem; font-weight: 700; color: var(--accent-indigo); margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .strategy-explainer p { color: var(--text-secondary); font-size: 0.88rem; line-height: 1.7; margin-bottom: 8px; }
        .strategy-explainer .strategy-detail { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px; }
        .strategy-detail-item { flex: 1; min-width: 140px; padding: 10px 14px; background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-subtle); }
        .strategy-detail-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px; }
        .strategy-detail-value { font-size: 0.9rem; font-weight: 700; color: var(--text-primary); }

        /* ETF Grid */
        .etf-section { margin-bottom: 24px; }
        .section-title { font-size: 1rem; font-weight: 700; color: var(--text-secondary); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .section-title::before { content: ''; width: 4px; height: 16px; background: var(--accent-indigo); border-radius: 2px; }
        .etf-grid { display: grid; gap: 12px; }
        .etf-card { background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s ease; }
        .etf-card:hover { border-color: var(--accent-indigo); transform: translateX(4px); }
        .etf-card.core { border-left: 3px solid var(--accent-green); }
        .etf-card.diversifier { border-left: 3px solid var(--accent-purple); }
        .etf-card.bonds { border-left: 3px solid var(--accent-indigo); }
        .etf-card.stability { border-left: 3px solid var(--accent-amber); }
        .etf-info { display: flex; flex-direction: column; }
        .etf-ticker { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--text-primary); }
        .etf-name { font-size: 0.85rem; color: var(--text-muted); }
        .etf-desc { font-size: 0.75rem; color: var(--text-secondary); margin-top: 2px; font-style: italic; }
        .etf-meta { display: flex; gap: 8px; margin-top: 4px; }
        .etf-meta-tag { font-size: 0.65rem; padding: 2px 6px; border-radius: 4px; font-weight: 600; }
        .etf-meta-tag.expense { background: rgba(16,185,129,0.15); color: var(--accent-green); }
        .etf-meta-tag.type { background: rgba(99,102,241,0.15); color: var(--accent-indigo); }
        .etf-percent { font-size: 1.5rem; font-weight: 800; color: var(--accent-green); text-align: right; }
        .etf-dollars { font-size: 0.8rem; color: var(--text-muted); font-weight: 500; text-align: right; }

        /* Projections */
        .projections-card { background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary)); border: 1px solid var(--border-accent); border-radius: 16px; padding: 32px; margin-bottom: 24px; animation: fadeInUp 0.6s ease-out 0.2s backwards; }
        .projections-header { text-align: center; margin-bottom: 24px; }
        .projections-header h3 { font-size: 1.2rem; font-weight: 700; margin-bottom: 4px; }
        .projections-header p { color: var(--text-muted); font-size: 0.9rem; }
        .projections-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .projection-box { background: var(--bg-primary); border-radius: 12px; padding: 20px; text-align: center; border: 1px solid var(--border-subtle); position: relative; overflow: hidden; }
        .projection-box::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; }
        .projection-box.year10::before { background: var(--accent-amber); }
        .projection-box.year20::before { background: var(--accent-purple); }
        .projection-box.year30::before { background: var(--accent-green); }
        .projection-label { font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; }
        .projection-value { font-size: 1.4rem; font-weight: 800; }
        .projection-box.year10 .projection-value { color: var(--accent-amber); }
        .projection-box.year20 .projection-value { color: var(--accent-purple); }
        .projection-box.year30 .projection-value { color: var(--accent-green); }
        .projection-subtext { font-size: 0.75rem; color: var(--text-muted); margin-top: 4px; }

        .comparison-banner {
            margin-top: 20px; padding: 16px; text-align: center;
            background: rgba(251,191,36,0.08); border: 1px solid rgba(251,191,36,0.25); border-radius: 12px;
        }
        .comparison-banner p { font-size: 0.9rem; color: var(--text-secondary); }
        .comparison-banner .highlight { color: var(--accent-green); font-weight: 700; }
        .comparison-banner .avg { color: var(--text-muted); }
        .comparison-banner .multiplier { color: var(--accent-amber); font-size: 1.3rem; font-weight: 800; display: block; margin-top: 6px; }

        .cost-of-waiting {
            display: flex; align-items: center; justify-content: center; gap: 8px;
            margin-top: 16px; padding: 10px 16px;
            background: rgba(239,68,68,0.08); border: 1px solid rgba(239,68,68,0.25); border-radius: 10px;
            font-size: 0.85rem; color: var(--accent-red);
        }
        .cost-of-waiting .tick-value { font-family: 'JetBrains Mono', monospace; font-weight: 800; font-size: 0.95rem; min-width: 60px; text-align: center; }

        /* Share Card */
        .share-card { background: linear-gradient(135deg, #0f172a, #1e293b); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 24px; margin-bottom: 24px; animation: fadeInUp 0.6s ease-out 0.3s backwards; }
        .share-card-header { text-align: center; margin-bottom: 16px; }
        .share-card-header h3 { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
        .share-card-header p { font-size: 0.8rem; color: var(--text-muted); }
        .share-card-inner { background: linear-gradient(145deg, #1a1f3a, #0f1629); border-radius: 12px; padding: 24px; position: relative; overflow: hidden; }
        .share-card-inner::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--accent-indigo), var(--accent-purple), var(--accent-green)); }
        .share-badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; background: rgba(99,102,241,0.2); border-radius: 20px; font-size: 0.75rem; font-weight: 600; color: var(--accent-indigo); margin-bottom: 16px; }
        .share-title { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 4px; }
        .share-value { font-size: 2rem; font-weight: 800; color: var(--accent-green); margin-bottom: 4px; }
        .share-comparison { font-size: 0.8rem; color: var(--accent-amber); font-weight: 600; margin-bottom: 12px; }
        .share-allocation { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 16px; }
        .share-footer { display: flex; justify-content: space-between; align-items: center; padding-top: 16px; border-top: 1px solid var(--border-subtle); }
        .share-id { font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: var(--text-muted); }
        .share-handle { font-size: 0.85rem; color: var(--accent-indigo); font-weight: 600; }
        .share-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 16px; }

        /* Action Buttons */
        .actions { display: grid; gap: 12px; margin-bottom: 32px; animation: fadeInUp 0.6s ease-out 0.4s backwards; }
        .btn { display: flex; align-items: center; justify-content: center; gap: 10px; padding: 16px 24px; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; border: none; transition: all 0.2s ease; text-decoration: none; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-indigo), var(--accent-purple)); color: white; box-shadow: 0 4px 20px var(--accent-indigo-glow); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--accent-indigo-glow); }
        .btn-autopilot { background: linear-gradient(135deg, var(--accent-green), #059669); color: white; box-shadow: 0 4px 20px var(--accent-green-glow); }
        .btn-autopilot:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--accent-green-glow); }
        .btn-secondary { background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border-subtle); }
        .btn-secondary:hover { border-color: var(--accent-indigo); background: var(--bg-card-hover); }
        .btn-ghost { background: transparent; color: var(--text-secondary); border: 1px dashed var(--border-subtle); }
        .btn-ghost:hover { color: var(--text-primary); border-color: var(--text-muted); }
        .btn-sm { padding: 10px 16px; font-size: 0.85rem; }

        /* Autopilot CTA Context */
        .autopilot-context {
            background: var(--bg-card); border: 1px solid rgba(16,185,129,0.3); border-radius: 12px;
            padding: 16px; margin-bottom: 12px; animation: fadeInUp 0.6s ease-out 0.35s backwards;
        }
        .autopilot-context p { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        .autopilot-context .what-how { color: var(--accent-green); font-weight: 700; }
        .autopilot-micro-preview { margin-top: 10px; padding: 8px 12px; background: var(--bg-secondary); border-radius: 8px; font-size: 0.8rem; color: var(--text-muted); font-family: 'JetBrains Mono', monospace; }

        /* Brokerage Explainer */
        .brokerage-explainer {
            background: linear-gradient(135deg, rgba(99,102,241,0.06) 0%, rgba(139,92,246,0.03) 100%);
            border: 1px solid rgba(99,102,241,0.2); border-radius: 14px;
            padding: 24px; margin-bottom: 24px; animation: fadeInUp 0.6s ease-out 0.45s backwards;
        }
        .brokerage-explainer h3 { font-size: 1rem; font-weight: 700; color: var(--accent-indigo); margin-bottom: 14px; display: flex; align-items: center; gap: 8px; }
        .brokerage-explainer .explainer-text { color: var(--text-secondary); font-size: 0.88rem; line-height: 1.7; margin-bottom: 16px; }
        .brokerage-explainer .explainer-highlight { color: var(--accent-green); font-weight: 600; }
        .brokerage-explainer .explainer-note { padding: 12px 16px; background: var(--bg-card); border-left: 3px solid var(--accent-green); border-radius: 0 8px 8px 0; font-size: 0.82rem; color: var(--text-secondary); margin-bottom: 16px; }
        .brokerage-options { display: grid; grid-template-columns: 1fr; gap: 12px; }
        @media (min-width: 600px) { .brokerage-options { grid-template-columns: repeat(3, 1fr); } }
        .brokerage-option { text-align: center; padding: 18px 14px; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 10px; transition: all 0.2s; text-decoration: none; display: block; cursor: pointer; position: relative; }
        .brokerage-option:hover { border-color: var(--accent-indigo); transform: translateY(-3px); box-shadow: 0 8px 20px rgba(99,102,241,0.15); }
        .brokerage-option.recommended { border-color: var(--accent-green); box-shadow: 0 0 20px rgba(16,185,129,0.1); }
        .brokerage-option-rec { font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--accent-green); background: rgba(16,185,129,0.12); padding: 4px 10px; border-radius: 20px; display: inline-block; margin-bottom: 10px; }
        .brokerage-option-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
        .brokerage-option-cost { font-size: 0.75rem; color: var(--accent-green); font-weight: 600; margin-bottom: 10px; }
        .brokerage-option-desc { font-size: 0.8rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 10px; }
        .brokerage-option-best { font-size: 0.75rem; color: var(--accent-indigo); font-weight: 600; margin-bottom: 12px; padding-top: 8px; border-top: 1px solid var(--border-subtle); }
        .brokerage-option-cta { font-size: 0.75rem; color: var(--accent-indigo); font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }

        /* Next Steps */
        .next-steps { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 24px; margin-bottom: 24px; animation: fadeInUp 0.6s ease-out 0.5s backwards; }
        .next-steps h3 { font-size: 1rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }
        .steps-list { display: grid; gap: 16px; }
        .step-item { display: flex; gap: 14px; align-items: flex-start; padding: 16px; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border-subtle); }
        .step-number { width: 32px; height: 32px; background: linear-gradient(135deg, var(--accent-indigo), var(--accent-purple)); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; font-weight: 700; color: white; flex-shrink: 0; }
        .step-content h4 { font-size: 0.95rem; font-weight: 700; margin-bottom: 6px; color: var(--text-primary); }
        .step-content p { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; }
        .step-content .step-detail { font-size: 0.8rem; color: var(--text-muted); margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border-subtle); line-height: 1.5; }
        .step-etf-detail { font-family: 'JetBrains Mono', monospace; color: var(--accent-green); font-weight: 600; }
        .step-time { display: inline-flex; align-items: center; gap: 4px; font-size: 0.72rem; color: var(--accent-amber); font-weight: 600; padding: 2px 8px; background: rgba(245,158,11,0.1); border-radius: 4px; margin-top: 6px; }

        .bookmark-reminder {
            text-align: center; margin-top: 20px; padding: 12px;
            background: rgba(99,102,241,0.05); border: 1px dashed rgba(99,102,241,0.2); border-radius: 10px;
            font-size: 0.8rem; color: var(--text-muted);
        }
        .bookmark-reminder a { color: var(--accent-indigo); text-decoration: none; font-weight: 600; }

        .footer { text-align: center; padding: 32px 0; color: var(--text-muted); font-size: 0.85rem; }
        .footer a { color: var(--accent-indigo); text-decoration: none; }

        .error-state { text-align: center; padding: 60px 20px; }
        .error-state h2 { font-size: 1.5rem; margin-bottom: 12px; }
        .error-state p { color: var(--text-secondary); margin-bottom: 24px; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 40px var(--accent-green-glow); } 50% { box-shadow: 0 0 60px var(--accent-green-glow); } }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; }

        @media (max-width: 600px) {
            .container { padding: 24px 16px; }
            .portfolio-card, .projections-card, .share-card { padding: 20px; }
            .allocation-display { grid-template-columns: 1fr; }
            .projections-grid { grid-template-columns: 1fr; }
            .projection-box { display: flex; justify-content: space-between; align-items: center; text-align: left; }
            .projection-label { margin-bottom: 0; }
            .projection-subtext { display: none; }
            .portfolio-header { flex-direction: column; gap: 12px; align-items: flex-start; }
            .success-header h1 { font-size: 1.6rem; }
            .share-actions { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <canvas id="confetti-canvas"></canvas>
    
    <div class="container" id="main-content">
        <div class="success-header">
            <div class="success-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
            </div>
            <h1>Portfolio Unlocked</h1>
            <p>Your personalized ETF allocation is ready.</p>
            <div class="reinforcement">
                <p id="reinforcement-text">You just did what 90% of people never do: built an actual plan.</p>
                <p class="subtext" id="reinforcement-sub"></p>
            </div>
        </div>

        <div class="portfolio-card" id="portfolio-card">
            <div class="portfolio-header">
                <div class="portfolio-meta">
                    <div class="meta-badge"><span>&#x1F382;</span><span id="display-age">--</span> years old</div>
                    <div class="meta-badge style" id="display-style">--</div>
                </div>
                <div class="portfolio-id" id="display-id">ID: ---</div>
            </div>
            <div class="allocation-display">
                <div class="allocation-box stocks"><div class="allocation-label">&#x1F4C8; Stocks</div><div class="allocation-value" id="display-stocks">--%</div></div>
                <div class="allocation-box bonds"><div class="allocation-label">&#x1F3E6; Bonds</div><div class="allocation-value" id="display-bonds">--%</div></div>
            </div>

            <!-- Strategy Explainer -->
            <div class="strategy-explainer" id="strategyExplainer">
                <h3>&#x1F9E0; What This Means</h3>
                <p id="strategyExplainerText">Loading...</p>
                <div class="strategy-detail" id="strategyDetails"></div>
            </div>

            <div class="etf-section">
                <div class="section-title">Your Buy List</div>
                <div class="etf-grid" id="etf-grid"></div>
            </div>
        </div>

        <div class="projections-card">
            <div class="projections-header">
                <h3>&#x1F680; Growth Projections</h3>
                <p>Based on $<span id="display-monthly">--</span>/month investment</p>
            </div>
            <div class="projections-grid">
                <div class="projection-box year10"><div class="projection-label">10 Years</div><div class="projection-value" id="proj-10">$--</div><div class="projection-subtext">Foundation</div></div>
                <div class="projection-box year20"><div class="projection-label">20 Years</div><div class="projection-value" id="proj-20">$--</div><div class="projection-subtext">Acceleration</div></div>
                <div class="projection-box year30"><div class="projection-label">30 Years</div><div class="projection-value" id="proj-30">$--</div><div class="projection-subtext">Freedom</div></div>
            </div>
            <div class="comparison-banner">
                <p>The average American retires with <span class="avg">$87,000</span>. You're projected at <span class="highlight" id="comp-you">$0</span>.</p>
                <span class="multiplier" id="comp-multiplier">0x ahead of the pack</span>
            </div>
            <div class="cost-of-waiting">
                <span>&#x23F3;</span>
                <span>Not starting costs you </span>
                <span class="tick-value" id="costTickerValue">$0.00</span>
                <span> and counting...</span>
            </div>
        </div>

        <!-- Share Card -->
        <div class="share-card">
            <div class="share-card-header">
                <h3>&#x1F4F8; Screenshot This. Post It. Tag Me.</h3>
                <p>Show your friends you have a plan. Challenge them to build theirs.</p>
            </div>
            <div class="share-card-inner" id="share-card-inner">
                <div class="share-badge"><span>&#x2713;</span> INVESTMENT ARCHITECT</div>
                <div class="share-title">30-Year Projection</div>
                <div class="share-value" id="share-value">$--</div>
                <div class="share-comparison" id="share-comparison">0x ahead of the average American</div>
                <div class="share-allocation"><span id="share-stocks">--%</span> Stocks / <span id="share-bonds">--%</span> Bonds</div>
                <div class="share-footer">
                    <div class="share-id" id="share-id">ID: ---</div>
                    <div class="share-handle">@koutalksmoney</div>
                </div>
            </div>
            <div class="share-actions">
                <button class="btn btn-secondary btn-sm" onclick="copyCaption()"><span>&#x1F4CB;</span> Copy Caption</button>
                <button class="btn btn-ghost btn-sm" onclick="downloadCard()"><span>&#x1F4F8;</span> Download Card</button>
            </div>
        </div>

        <!-- Actions -->
        <div class="actions">
            <div class="autopilot-context" id="autopilot-context">
                <p>You have the <span class="what-how">WHAT</span> (your portfolio). Now install the <span class="what-how">HOW</span>. The Autopilot System sets up automatic monthly purchases of these exact ETFs, so you never have to remember.</p>
                <div class="autopilot-micro-preview" id="autopilot-preview"></div>
            </div>
            <a href="#" id="autopilot-btn" class="btn btn-autopilot"><span>&#x1F916;</span> Install The Autopilot System</a>
        </div>

        <!-- Brokerage Explainer -->
        <div class="brokerage-explainer">
            <h3>&#x1F3E6; Wait, What's a Brokerage?</h3>
            <p class="explainer-text">
                A brokerage is just an app where you buy investments. Think of it like a <span class="explainer-highlight">bank account, but for stocks and ETFs</span>. You transfer money in, then use it to buy the ETFs in your portfolio above.
            </p>
            <div class="explainer-note">
                <strong>Important:</strong> This tool gave you the plan (which ETFs to buy and how much of each). A brokerage is where you actually buy them. You don't need a brokerage to use this app. You need one to execute the plan.
            </div>
            <p class="explainer-text" style="margin-bottom: 12px;">All three are free, charge $0 per trade, and take about 10 minutes to set up. The only real difference is which one fits your style:</p>
            <div class="brokerage-options">
                <a href="https://www.fidelity.com/open-account/overview" target="_blank" rel="noopener" class="brokerage-option recommended">
                    <div class="brokerage-option-rec">Most Popular With Beginners</div>
                    <div class="brokerage-option-name">Fidelity</div>
                    <div class="brokerage-option-cost">$0 to open</div>
                    <div class="brokerage-option-desc">Best app for beginners. Buy fractional shares starting at $1. Free learning center walks you through everything step by step.</div>
                    <div class="brokerage-option-best">Best if: You've never invested before</div>
                    <div class="brokerage-option-cta">Open Account &#x2197;</div>
                </a>
                <a href="https://www.schwab.com/open-an-account" target="_blank" rel="noopener" class="brokerage-option">
                    <div class="brokerage-option-name">Schwab</div>
                    <div class="brokerage-option-cost">$0 to open</div>
                    <div class="brokerage-option-desc">400+ physical branches if you want to talk to a real person. Best research tools in the industry. 24/7 phone and chat support.</div>
                    <div class="brokerage-option-best">Best if: You want in-person or phone help</div>
                    <div class="brokerage-option-cta">Open Account &#x2197;</div>
                </a>
                <a href="https://investor.vanguard.com/accounts-plans/individual-brokerage-account" target="_blank" rel="noopener" class="brokerage-option">
                    <div class="brokerage-option-name">Vanguard</div>
                    <div class="brokerage-option-cost">$0 to open</div>
                    <div class="brokerage-option-desc">The company that invented index funds. Lowest fees in the game. No-frills platform built for people who buy and hold forever.</div>
                    <div class="brokerage-option-best">Best if: You want the absolute lowest cost</div>
                    <div class="brokerage-option-cta">Open Account &#x2197;</div>
                </a>
            </div>
        </div>

        <!-- Next Steps -->
        <div class="next-steps">
            <h3>&#x1F3AF; Your Exact Next 3 Steps</h3>
            <div class="steps-list" id="steps-list">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Open a Free Brokerage Account</h4>
                        <p>Go to Fidelity.com, Schwab.com, or Vanguard.com. Click "Open an Account." Pick "Individual Brokerage Account." Fill in your name, address, and Social Security number. That's it.</p>
                        <div class="step-detail">No fees. No minimum balance. No catches. It's like signing up for any other app, but for investing.</div>
                        <div class="step-time">&#x23F1; ~10 minutes</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Buy Your ETFs</h4>
                        <p id="step2-text">Transfer money into your new account. Then search for each ticker symbol (the 3-4 letter code like VTI or SCHD), enter the dollar amount, and hit "Buy."</p>
                        <div class="step-detail" id="step2-detail">Loading your exact buy list...</div>
                        <div class="step-time">&#x23F1; ~5 minutes per ETF</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4 id="step3-title">Set Up Automatic Monthly Buys</h4>
                        <p id="step3-text">In your brokerage, look for "Recurring Investments" or "Automatic Investments." Set each ETF to buy automatically every month on the same day (like payday). Now your portfolio grows on autopilot.</p>
                        <div class="step-detail">This is the most important step. Automating removes the #1 reason people fail at investing: forgetting to do it.</div>
                        <div class="step-time">&#x23F1; ~5 minutes</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bookmark-reminder" id="bookmark-reminder">
            &#x1F516; <a href="#" id="bookmark-link">Bookmark this page</a> to come back to your portfolio anytime.
        </div>

        <div class="footer">
            Made by <a href="https://instagram.com/koutalksmoney" target="_blank">@koutalksmoney</a><br>
            Not financial advice. Research before investing.
        </div>
    </div>

    <!-- Error State -->
    <div class="container error-state" id="error-state" style="display: none;">
        <h2>Portfolio Not Found</h2>
        <p>It looks like your portfolio data expired or wasn't saved properly.</p>
        <a href="https://spacekou5-oss.github.io/cashvault-funnel/Investment-Simplifier.html" class="btn btn-primary">Build New Portfolio</a>
    </div>

    <script>
        const STORAGE_KEY = 'investmentSimplifier_portfolio';
        const styleLabels = { growth: '\u{1F680} Growth', balanced: '\u2696\uFE0F Balanced', income: '\u{1F6E1}\uFE0F Income' };
        const styleDescriptions = {
            growth: {
                summary: 'Your portfolio is built for maximum long-term growth. It leans heavily into stocks because you have time on your side. The strategy accepts more ups and downs in the short term in exchange for higher projected returns over decades.',
                riskLevel: 'Higher volatility',
                timeHorizon: '10+ years',
                bestFor: 'Young investors with time'
            },
            balanced: {
                summary: 'Your portfolio splits between growth and stability. You get exposure to stock market gains while bonds act as a shock absorber during downturns. This is the "sleep well at night" strategy that still builds serious wealth.',
                riskLevel: 'Moderate volatility',
                timeHorizon: '7+ years',
                bestFor: 'Most investors'
            },
            income: {
                summary: 'Your portfolio prioritizes companies that pay regular dividends and bonds that generate steady income. You are trading some growth potential for more predictable cash flow hitting your account every quarter.',
                riskLevel: 'Lower volatility',
                timeHorizon: '5+ years',
                bestFor: 'Cash flow seekers'
            }
        };

        const etfMeta = {
            'VTI': { expense: '0.03%', type: 'Total Market' },
            'VOO': { expense: '0.03%', type: 'S&P 500' },
            'VXUS': { expense: '0.07%', type: 'International' },
            'BND': { expense: '0.03%', type: 'Bonds' },
            'SCHD': { expense: '0.06%', type: 'Dividends' },
            'SCHG': { expense: '0.04%', type: 'Growth' },
            'QQQM': { expense: '0.15%', type: 'Tech/Growth' },
            'AVUV': { expense: '0.25%', type: 'Small Cap' },
            'VYM': { expense: '0.06%', type: 'High Yield' },
            'DGRO': { expense: '0.08%', type: 'Div Growth' },
            'SGOV': { expense: '0.05%', type: 'Treasury' },
            'VGT': { expense: '0.10%', type: 'Tech Sector' },
            'VT': { expense: '0.07%', type: 'Global' }
        };

        function formatCurrency(num) {
            if (num >= 1000000) return '$' + (num / 1000000).toFixed(2) + 'M';
            if (num >= 1000) return '$' + Math.round(num).toLocaleString();
            return '$' + num.toLocaleString();
        }

        function loadPortfolioData() {
            const params = new URLSearchParams(window.location.search);
            if (params.has('data')) {
                try {
                    const decoded = JSON.parse(decodeURIComponent(params.get('data')));
                    if (decoded && decoded.etfs) return decoded;
                } catch(e) {}
            }
            try {
                const cookies = document.cookie.split(';');
                for (const cookie of cookies) {
                    const [name, value] = cookie.trim().split('=');
                    if (name === 'isPortfolio') {
                        const decoded = JSON.parse(decodeURIComponent(value));
                        if (decoded && decoded.etfs) return decoded;
                    }
                }
            } catch(e) {}
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                try {
                    const parsed = JSON.parse(stored);
                    if (parsed && parsed.etfs) return parsed;
                } catch(e) {}
            }
            return null;
        }

        function loadPortfolio() {
            const portfolio = loadPortfolioData();
            if (!portfolio) { showError(); return; }
            localStorage.setItem('investmentSimplifier_bridge_email', 'true');
            renderPortfolio(portfolio);
            generateBookmarkURL(portfolio);
            setTimeout(() => {
                animateCountUp('proj-30', portfolio.projections.year30);
                setTimeout(() => triggerConfetti(), 1500);
            }, 800);
        }

        function renderPortfolio(p) {
            document.getElementById('display-age').textContent = p.age;
            document.getElementById('display-style').textContent = styleLabels[p.style] || p.style;
            document.getElementById('display-id').textContent = 'ID: ' + p.portfolioId;
            document.getElementById('display-stocks').textContent = p.stockPercent + '%';
            document.getElementById('display-bonds').textContent = p.bondPercent + '%';
            document.getElementById('display-monthly').textContent = p.monthlyInvestment?.toLocaleString() || '500';

            document.getElementById('proj-10').textContent = formatCurrency(p.projections.year10);
            document.getElementById('proj-20').textContent = formatCurrency(p.projections.year20);

            const multiplier = (p.projections.year30 / 87000).toFixed(1);
            document.getElementById('comp-you').textContent = formatCurrency(p.projections.year30);
            document.getElementById('comp-multiplier').textContent = multiplier + 'x ahead of the pack';

            const reinforcementSub = document.getElementById('reinforcement-sub');
            if (p.age && p.age < 30) {
                reinforcementSub.textContent = `The average American has $0 invested at ${p.age}. You're now ahead of 80% of your generation.`;
            } else {
                reinforcementSub.textContent = `Most people never build a portfolio. You just did it in 60 seconds.`;
            }

            renderStrategyExplainer(p);

            document.getElementById('share-value').textContent = formatCurrency(p.projections.year30);
            document.getElementById('share-comparison').textContent = multiplier + 'x ahead of the average American';
            document.getElementById('share-stocks').textContent = p.stockPercent + '%';
            document.getElementById('share-bonds').textContent = p.bondPercent + '%';
            document.getElementById('share-id').textContent = 'ID: ' + p.portfolioId;

            const etfGrid = document.getElementById('etf-grid');
            etfGrid.innerHTML = '';
            p.etfs.forEach(etf => {
                const meta = etfMeta[etf.ticker] || { expense: 'N/A', type: 'Fund' };
                const card = document.createElement('div');
                card.className = `etf-card ${etf.type}`;
                card.innerHTML = `
                    <div class="etf-info">
                        <span class="etf-ticker">${etf.ticker}</span>
                        <span class="etf-name">${etf.name}</span>
                        ${etf.description ? `<span class="etf-desc">${etf.description}</span>` : ''}
                        <div class="etf-meta">
                            <span class="etf-meta-tag expense">${meta.expense} fee</span>
                            <span class="etf-meta-tag type">${meta.type}</span>
                        </div>
                    </div>
                    <div>
                        <span class="etf-percent">${etf.percent}%</span>
                    </div>`;
                etfGrid.appendChild(card);
            });

            const coreEtf = p.etfs.find(e => e.type === 'core') || p.etfs[0];
            const monthly = p.monthlyInvestment || 500;
            const previewEl = document.getElementById('autopilot-preview');
            if (coreEtf) {
                const coreMonthly = Math.round(monthly * coreEtf.percent / 100);
                previewEl.textContent = `${coreEtf.ticker} at ${coreEtf.percent}% = $${coreMonthly}/month on autopilot`;
            }
            document.getElementById('autopilot-btn').href = `https://spacekou5-oss.github.io/cashvault-funnel/autopilot-system.html?source=bridge&monthly=${monthly}&suggested_etf=${coreEtf?.ticker || 'VTI'}`;

            renderPersonalizedSteps(p);
            startCostTicker(p.projections.year30);
        }

        function renderStrategyExplainer(p) {
            const desc = styleDescriptions[p.style] || styleDescriptions.balanced;
            document.getElementById('strategyExplainerText').textContent = desc.summary;
            const details = document.getElementById('strategyDetails');
            details.innerHTML = `
                <div class="strategy-detail-item">
                    <div class="strategy-detail-label">Risk Level</div>
                    <div class="strategy-detail-value">${desc.riskLevel}</div>
                </div>
                <div class="strategy-detail-item">
                    <div class="strategy-detail-label">Best Held For</div>
                    <div class="strategy-detail-value">${desc.timeHorizon}</div>
                </div>
                <div class="strategy-detail-item">
                    <div class="strategy-detail-label">Best For</div>
                    <div class="strategy-detail-value">${desc.bestFor}</div>
                </div>
            `;
        }

        function renderPersonalizedSteps(p) {
            const lumpSum = 1000;
            let step2Detail = '';
            p.etfs.forEach((etf, i) => {
                const amount = Math.round(lumpSum * etf.percent / 100);
                step2Detail += `<span class="step-etf-detail">${etf.ticker}</span> \u2192 Search "${etf.ticker}" in your brokerage, buy $${amount.toLocaleString()} worth (that's ${etf.percent}% of $${lumpSum.toLocaleString()})`;
                if (i < p.etfs.length - 1) step2Detail += '<br><br>';
            });
            document.getElementById('step2-detail').innerHTML = `<strong>Your exact buy list with $${lumpSum.toLocaleString()} to start:</strong><br><br>${step2Detail}`;

            const monthly = p.monthlyInvestment || 500;
            document.getElementById('step3-title').textContent = `Set Up Automatic $${monthly.toLocaleString()}/Month Buys`;
            document.getElementById('step3-text').textContent = `In your brokerage, look for "Recurring Investments" or "Automatic Investments." Set each ETF to buy automatically every month on the same day (like payday). Your $${monthly.toLocaleString()}/month gets split across your ETFs based on the percentages above.`;
        }

        function generateBookmarkURL(p) {
            const encoded = encodeURIComponent(JSON.stringify(p));
            const bookmarkUrl = window.location.origin + window.location.pathname + '?data=' + encoded;
            const bookmarkLink = document.getElementById('bookmark-link');
            bookmarkLink.href = bookmarkUrl;
            bookmarkLink.addEventListener('click', (e) => {
                e.preventDefault();
                navigator.clipboard.writeText(bookmarkUrl).then(() => {
                    bookmarkLink.textContent = 'Link copied! Paste it anywhere.';
                    setTimeout(() => { bookmarkLink.textContent = 'Bookmark this page'; }, 3000);
                }).catch(() => {
                    prompt('Copy this link to save your portfolio:', bookmarkUrl);
                });
            });
        }

        function animateCountUp(elementId, target) {
            const el = document.getElementById(elementId);
            const duration = 1500;
            const start = performance.now();
            function update(now) {
                const elapsed = now - start;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3);
                el.textContent = formatCurrency(Math.round(target * eased));
                if (progress < 1) requestAnimationFrame(update);
            }
            requestAnimationFrame(update);
        }

        function startCostTicker(projectedValue) {
            const dailyCost = projectedValue / (30 * 365);
            const costPerMs = dailyCost / 86400000;
            const el = document.getElementById('costTickerValue');
            const startTime = performance.now();
            function tick(now) {
                const elapsed = now - startTime;
                const accumulated = elapsed * costPerMs;
                el.textContent = '$' + accumulated.toFixed(2);
                requestAnimationFrame(tick);
            }
            requestAnimationFrame(tick);
        }

        function showError() {
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('error-state').style.display = 'block';
        }

        function copyCaption() {
            const data = loadPortfolioData();
            if (!data) return;
            const multiplier = (data.projections.year30 / 87000).toFixed(1);
            const caption = `I just found out I could be ${multiplier}x richer than the average American by retirement.\n\nBuilt my portfolio in 60 seconds. What's your number?\n\n${data.stockPercent}% Stocks / ${data.bondPercent}% Bonds\n30-Year Projection: ${formatCurrency(data.projections.year30)}\n\nBuild yours free \u2193\n@koutalksmoney\n\n#moneytok #investingforbeginners #etfportfolio #buildwealth #financialliteracy`;
            navigator.clipboard.writeText(caption).then(() => {
                const btn = event.target.closest('.btn');
                const original = btn.innerHTML;
                btn.innerHTML = '<span>\u2713</span> Copied!';
                setTimeout(() => btn.innerHTML = original, 2000);
            });
        }

        function downloadCard() {
            const shareCard = document.getElementById('share-card-inner');
            if (!shareCard) return;
            const btn = event.target.closest('.btn');
            const original = btn.innerHTML;
            btn.innerHTML = '<span>\u23F3</span> Generating...';
            html2canvas(shareCard, {
                backgroundColor: '#0f1629',
                scale: 2,
                useCORS: true,
                logging: false
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'my-portfolio-koutalksmoney.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
                btn.innerHTML = '<span>\u2713</span> Downloaded!';
                setTimeout(() => btn.innerHTML = original, 2000);
            }).catch(() => {
                btn.innerHTML = original;
                alert('Long-press the share card above to screenshot, then post to your story and tag @koutalksmoney');
            });
        }

        function triggerConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const particles = [];
            const colors = ['#6366f1', '#8b5cf6', '#10b981', '#f59e0b', '#ec4899'];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 8 + 4,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speed: Math.random() * 3 + 2,
                    angle: Math.random() * Math.PI * 2,
                    spin: (Math.random() - 0.5) * 0.2
                });
            }
            let frame = 0;
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.y += p.speed;
                    p.x += Math.sin(p.angle) * 0.5;
                    p.angle += p.spin;
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.angle);
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                    ctx.restore();
                });
                frame++;
                if (frame < 180) requestAnimationFrame(animate);
                else ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            animate();
        }

        document.addEventListener('DOMContentLoaded', loadPortfolio);
    </script>
</body>
</html>
